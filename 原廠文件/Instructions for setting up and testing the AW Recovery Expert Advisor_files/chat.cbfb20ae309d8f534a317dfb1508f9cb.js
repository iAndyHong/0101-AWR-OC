(()=>{"use strict";var n,t={3010:(n,t,r)=>{var i,e,o={};function u(n){if(n in o){for(var t=o[n],r=0,i=arguments.length<=1?0:arguments.length-1;r<i;r++)t=t.replace("{".concat(r,"}"),r+1<1||arguments.length<=r+1?undefined:arguments[r+1]);return t}return"["+n+"]"}function c(n){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},c(n)}function a(n){var t="";return n===undefined?t="undefined error":"object"===c(n)?"stack"in n&&n.stack?("message"in n&&n.message&&(t+=n.message+"\r\n"),t+=n.stack):"message"in n&&n.message?t=n.message:"type"in n&&n.type&&(t=n.type):t=n,t}function f(n){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},f(n)}function s(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,l(i.key),i)}}function l(n){var t=function(n,t){if("object"!=f(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==f(t)?t:t+""}!function(n){n[n.INFO=0]="INFO",n[n.t=1]="WARNING",n[n.ERROR=2]="ERROR",n[n.u=3]="ATTENTION",n[n.l=4]="DEBUG",n[n.h=5]="SPLITTER"}(i||(i={})),function(n){n[n._=0]="WEB_SOCKET",n[n.S=1]="SYSTEM",n[n.USER=2]="USER",n[n.T=3]="STORE",n[n.k=4]="PARSE",n[n.l=5]="DEBUG",n[n.SEND=6]="SEND",n[n.C=7]="RECEIVED",n[n.DB=8]="DB",n[n.A=9]="ROUTER"}(e||(e={}));var h={0:"#4b973c",1:"#d19520",2:"#a83838",3:"#a89238",4:"#474d95",5:"#797979"},v={0:"#284071",1:"#518796",2:"#5a83b1",3:"#7d3a7b",4:"#967948",5:"#8fa838",6:"#4b973c",7:"#71284a",8:"#7b4bbd",9:"#be7e2a"},d={0:"   WS   ",1:" System ",2:"   User ",3:"  Store ",4:"  Parse ",5:"  Debug ",6:" ▶ Send ",7:" ◀ Get  ",8:"   DB   ",9:"   Nav  "},b=function(){return function(n,t,r){return t&&s(n.prototype,t),r&&s(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(function n(t){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.enabled=!1,this.startText=t},[{key:"color",value:function(n){return"".concat("color:#fff;padding:2px 4px;margin-right:8px;border-radius:2px;","background:").concat(n,";")}},{key:"enable",value:function(){this.enabled=!0}},{key:"message",value:function(n,t,r){var e,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.enabled&&window.console&&window.console.log)if((r instanceof Error||r instanceof Event)&&(r=a(r)),window.document.documentMode)console.log("".concat(this.startText,": ").concat(d[t],": ").concat(r));else{var u=[this.color("#4e6678")],c="%c".concat(this.startText),f=d[t],s=this.color(n===i.INFO||n===i.l?v[t]:h[n]);f&&(u.push(s),c+="%c".concat(f)),o&&(u.push(s),c+="%c".concat(o)),c+="%c".concat(r),u.push("color: inherit;"),(e=window.console).log.apply(e,[c].concat(u))}}},{key:"info",value:function(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(i.INFO,n,t,r)}},{key:"warning",value:function(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(i.t,n,t,r)}},{key:"error",value:function(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(i.ERROR,n,t,r)}},{key:"attention",value:function(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(i.u,n,t,r)}},{key:"debug",value:function(n,t){var r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;this.message(i.l,n,t,r)}}])}(),y=new b("CHAT");var p,m,w=["zip","txt","log","mqh","ex5","mq5","mq4","ex4","mt5","set","tpl","cl","py","sqlite","csv","ipynb","gif","png","jpg","jpeg","webp","onnx","pdf"],g="\0\0\0\0\0\0\0\0",j="0000000000000000",_="6F49000000000000",S=6,O=41,E=50,T=51,k=52,C=53,x=54,A=55,I=56,M=57,R=58,U=62,P=63,B=64,N=68,D=75,$=76,G=77,L=78,z=81,F=82,W=83,q=84,X=88,H=92,J=93,Q=94,V=95,Y=98,Z=99,K=111,nn=127,tn=128,rn=-1,en=-2,on=-3,un=-4,cn=-5,an=-6,fn=-7,sn=-8,ln=-9,hn=-10,vn=-11,dn=-12,bn=-13,yn=-14,pn=-15,mn=-16,wn=-17,gn=1,jn=2,_n=0,Sn=1,On=2,En=3,Tn=1,kn=2,Cn=3,xn=4,An=5,In=6,Mn=6,Rn=7,Un=8,Pn=0,Bn=1,Nn=2,Dn=3,$n=4,Gn=5,Ln=6,zn=7,Fn=8,Wn=128,qn={READ:0,WRITE:1,I:2,M:4},Xn=1,Hn=3,Jn=7;!function(n){n[n.R=28261]="ENGLISH",n[n.U=30066]="RUSSIAN",n[n.P=25956]="GERMAN",n[n.B=24938]="JAPAN",n[n.N=29281]="ARABIC",n[n.D=26746]="CHINESE",n[n.$=29300]="TURKISH",n[n.G=29808]="PORTUGUESE",n[n.L=29541]="SPANISH",n[n.F=29801]="ITALIAN",n[n.W=28523]="KOREAN",n[n.q=29286]="FRENCH",n[n.NONE=0]="NONE"}(p||(p={})),function(n){n[n.en=28261]="en",n[n.ru=30066]="ru",n[n.de=25956]="de",n[n.ja=24938]="ja",n[n.ar=29281]="ar",n[n.zh=26746]="zh",n[n.tr=29300]="tr",n[n.pt=29808]="pt",n[n.es=29541]="es",n[n.it=29801]="it",n[n.ko=28523]="ko",n[n.fr=29286]="fr",n[n.none=0]="none"}(m||(m={}));var Qn,Vn=0,Yn=1,Zn=2,Kn=1,nt=3,tt=20,rt=0,it=25,et=48,ot=40,ut=40,ct=295,at=512,ft=10485760;!function(n){n.DEV="dev",n.PROD="prod"}(Qn||(Qn={}));var st=1e3;function lt(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ht(n){return n>=65&&n<=70?n-55:n>=97&&n<=102?n-87:n>=48&&n<=57?n-48:0}function vt(n){for(var t=[],r=0,i=0;r<n.length;){var e=n.charCodeAt(r++);if(e<128)t[i++]=String.fromCharCode(e);else if(e>191&&e<224){var o=n.charCodeAt(r++);t[i++]=String.fromCharCode((31&e)<<6|63&o)}else if(e>239&&e<365){var u=((7&e)<<18|(63&n.charCodeAt(r++))<<12|(63&n.charCodeAt(r++))<<6|63&n.charCodeAt(r++))-65536;t[i++]=String.fromCharCode(55296+(u>>10)),t[i++]=String.fromCharCode(56320+(1023&u))}else{var c=n.charCodeAt(r++),a=n.charCodeAt(r++);t[i++]=String.fromCharCode((15&e)<<12|(63&c)<<6|63&a)}}return t.join("")}function dt(n){for(var t=BigInt(0),r=n.length;r>0;r--)t=t*BigInt(256)+BigInt(n.charCodeAt(r-1));return t}function bt(n){for(var t="",r=0;r<n.length;r++){var i=15&n.charCodeAt(r),e=n.charCodeAt(r)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=i<10?String.fromCharCode(i+48):String.fromCharCode(i+55)}return t}function yt(n){if(n.length%2)return"";for(var t="",r=0;r+1<n.length;r+=2){var i=ht(n.charCodeAt(r+0)),e=ht(n.charCodeAt(r+1));t+=String.fromCharCode(16*i+e)}return t}function pt(n){return function(n){if(n.length%2)return"";for(var t="",r=n.length-2;r>=0;r-=2){var i=ht(n.charCodeAt(r+0)),e=ht(n.charCodeAt(r+1));t+=String.fromCharCode(16*i+e)}return t}(function(n){var t=this,r=n.split(""),i=[];return r.forEach(function(n){lt(this,t);for(var r=parseInt(n,10),e=0;r||e<i.length;e++)r+=10*(i[e]||0),i[e]=r%16,r=(r-i[e])/16}.bind(this)),i.reduceRight(function(n,r){return lt(this,t),n+r.toString(16)}.bind(this),"").padStart(16,"0")}(n))}function mt(n){for(var t="",r=n.length-1;r>=0;r--){var i=15&n.charCodeAt(r),e=n.charCodeAt(r)>>4&15;t+=e<10?String.fromCharCode(e+48):String.fromCharCode(e+55),t+=i<10?String.fromCharCode(i+48):String.fromCharCode(i+55)}return t}function wt(n){for(var t="",r=n.length;r>0;r-=2)t+=n.substring(r-2,r);return parseInt(t,16)}function gt(n){for(var t="0000000000000000"+n.toString(16).toUpperCase(),r="",i=(t=t.substring(t.length-16)).length;i>0;i-=2)r+=t.substring(i-2,i);return r}function jt(n){for(var t=[],r=0,i=0;i<n.length;i++){var e=n.charCodeAt(i);e<128?t[r++]=String.fromCharCode(e):e<2048?(t[r++]=String.fromCharCode(e>>6|192),t[r++]=String.fromCharCode(63&e|128)):55296==(64512&e)&&i+1<n.length&&56320==(64512&n.charCodeAt(i+1))?(e=65536+((1023&e)<<10)+(1023&n.charCodeAt(++i)),t[r++]=String.fromCharCode(e>>18|240),t[r++]=String.fromCharCode(e>>12&63|128),t[r++]=String.fromCharCode(e>>6&63|128),t[r++]=String.fromCharCode(63&e|128)):(t[r++]=String.fromCharCode(e>>12|224),t[r++]=String.fromCharCode(e>>6&63|128),t[r++]=String.fromCharCode(63&e|128))}return t.join("")}function _t(n,t){return function(n,t){for(var r=Math.min(n.length,t.length);r>0;r--){if(n.charCodeAt(r-1)<t.charCodeAt(r-1))return-1;if(n.charCodeAt(r-1)>t.charCodeAt(r-1))return 1}return n.length<t.length?-1:n.length>t.length?1:0}(yt(n),yt(t))}function St(n){for(var t=0,r=0;r<n.length;r++)t=256*t+n.charCodeAt(n.length-r-1);return new Date(t/1e4-116444736e5)}var Ot=r(9868);function Et(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Tt(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return kt(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kt(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var i=0,e=function(){};return{s:e,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function kt(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Ct(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,xt(i.key),i)}}function xt(n){var t=function(n,t){if("object"!=At(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=At(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==At(t)?t:t+""}function At(n){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},At(n)}function It(){}var Mt=[],Rt=function(){return function(n,t,r){return t&&Ct(n.prototype,t),r&&Ct(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(function n(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:It;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.subscribers=new Set,this._systemName="",this.stop=null,this.value=this,this.start=t},[{key:"set",value:function(n){var t,r;if((t=this.value,r=n,Boolean(t!=t?r==r:t!==r||t&&"object"===At(t)||"function"==typeof t))&&(this.value=n,this.stop)){var i,e=!Mt.length,o=Tt(this.subscribers);try{for(o.s();!(i=o.n()).done;){var u=i.value;u[1](),Mt.push(u,this.value)}}catch(a){o.e(a)}finally{o.f()}if(e){for(var c=0;c<Mt.length;c+=2)Mt[c][0](Mt[c+1]);Mt.length=0}}}},{key:"update",value:function(n){this.set(n(this.value))}},{key:"subscribe",value:function(n){var t=this,r=[n,arguments.length>1&&arguments[1]!==undefined?arguments[1]:It];return this.subscribers.add(r),1===this.subscribers.size&&(this.stop=this.start(this.set)||It),n(this.value),function(){Et(this,t),this.subscribers["delete"](r),0===this.subscribers.size&&this.stop&&(this.stop(),this.stop=null)}.bind(this)}},{key:"refresh",value:function(){var n=this;this.update(function(t){return Et(this,n),t}.bind(this))}}])}();function Ut(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Pt(i.key),i)}}function Pt(n){var t=function(n,t){if("object"!=Gt(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Gt(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Gt(t)?t:t+""}function Bt(n,t,r){return t=Dt(t),function(n,t){if(t&&("object"==Gt(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Nt()?Reflect.construct(t,r||[],Dt(n).constructor):t.apply(n,r))}function Nt(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Nt=function(){return!!n})()}function Dt(n){return Dt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dt(n)}function $t(n,t){return $t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},$t(n,t)}function Gt(n){return Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gt(n)}var Lt=undefined&&undefined.__decorate||function(n,t,r,i){var e,o=arguments.length,u=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"===("undefined"==typeof Reflect?"undefined":Gt(Reflect))&&"function"==typeof Reflect.decorate)u=Reflect.decorate(n,t,r,i);else for(var c=n.length-1;c>=0;c--)(e=n[c])&&(u=(o<3?e(u):o>3?e(t,r,u):e(t,r))||u);return o>3&&u&&Object.defineProperty(t,r,u),u},zt=function(n){function t(){var n;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bt(this,t,arguments))._systemName="layout",n.window=!1,n.edit=!1,n.search=!1,n.errorWindow=!1,n.addMembers=!1,n.create=!1,n.listMembers=!1,n.info=!1,n["delete"]=!1,n.error=!1,n}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&$t(n,t)}(t,n),function(n,t,r){return t&&Ut(n.prototype,t),r&&Ut(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t,[{key:"setLayout",value:function(n){n.window!==undefined&&(this.window=n.window),n.edit!==undefined&&(this.edit=n.edit),n.search!==undefined&&(this.search=n.search),n.errorWindow!==undefined&&(this.errorWindow=n.errorWindow),n.addMembers!==undefined&&(this.addMembers=n.addMembers),n.create!==undefined&&(this.create=n.create),n.listMembers!==undefined&&(this.listMembers=n.listMembers),n.info!==undefined&&(this.info=n.info),n["delete"]!==undefined&&(this["delete"]=n["delete"]),n.error!==undefined&&(this.error=n.error)}}])}(Rt);Lt([function(n,t,r){var i=r.value;r.value=function(){for(var n=this,t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];var o=i.apply(this,r);return o instanceof Promise?o.then(function(){return Et(this,n),this.set(this)}.bind(this)):this.set(this),o}}],zt.prototype,"setLayout",null);var Ft=new zt,Wt=undefined;var qt=(0,Ot.T5)(undefined);qt.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,Wt),Ft.setLayout({errorWindow:!!n})}.bind(undefined));var Xt,Ht,Jt,Qt,Vt,Yt,Zt,Kt,nr,tr,rr,ir,er={chatId:"",changeId:"",authorId:"",authorName:"",type:0,isPublic:!1,isLimited:!1,isClosed:!1,lastUpdate:"",extraId:"",name:"",description:"",links:"",inviteLink:"",language:0,countAdmins:0,countModers:0,countInvited:0,countReaders:0,countMembers:0,avatarIsPresent:!1,lastSeen:"",lastAccess:"",perms:0,isMuted:!1,isSubscribed:!1,date:new Date,created:new Date,dateText:"",isVerified:!1},or="en",ur=!1,cr=48,ar=54,fr=512,sr=!1;function lr(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];sr=t,Xt=n.mode,Ht=n.complaintKey,Jt=n.userId,Qt=n.userLogin,or=n.language,n.playSounds,n.accessLevel,Vt=n.friendlyHosts,Yt=n.readonly,Kt=n.token,nr=n.url,tr=n.version,rr=n.uniq;var r=document.documentElement.clientWidth;ur=r<=414,Xt===Qn.DEV&&(sr=!0),Zt=n.type===rt,cr=Zt?it:et,ar=Zt?ot:ut,fr=Zt||ur?ct:at}function hr(n){var t="";return n.type===En?n.inviteLink?t="/".concat(or,"/channels/").concat(encodeURI(n.inviteLink)):n.chatId&&(t="/".concat(or,"/channels/").concat(n.chatId.toLowerCase())):n.chatId&&(t="/".concat(or,"/messages/").concat(n.chatId.toLowerCase())),t}function vr(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function dr(n){return n.replace(/&/g,"").replace(/</g,"").replace(/>/g,"")}function br(n){return br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},br(n)}window.localizationList=window.localizationList||{},window.localizationInited=!1;window.mqGlobal?window.mqGlobal.Language:window.currentLanguage;var yr={};function pr(n){for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(window.localizationList[t]=n[t])}function mr(n){if(window.localizationInited||function(){var n=document.body.querySelectorAll('script[type="application/json"]');window.localizationInited=!0;for(var t=0,r=n.length;t<r;t++){var i=n[t];if("translate"===i.getAttribute("data-type")){var e=i.innerHTML;if(e){try{e=JSON.parse(e)}catch(o){e=null,console.warn(o)}e&&"object"===br(e)&&pr(e)}}}}(),!n)return window.localizationList;var t,r=window.localizationList;if(n in yr)t=yr[n];else{for(var i=n.split("."),e=0,o=i.length;e<o&&i[e]in r;e++)r=r[i[e]];if("string"==typeof r&&(t=r),!t)return"["+n+"]";yr[n]=t}for(var u=0,c=arguments.length<=1?0:arguments.length-1;u<c;u++)t=t.replace("{"+u+"}",u+1<1||arguments.length<=u+1?undefined:arguments[u+1]);return t}var wr={};!function(){if(window.Intl!==undefined){var n=document.documentElement.lang||"en-GB";switch(n){case"ru":n="ru-RU";break;case"zh":n="zh-CN";break;case"en":n="en-GB"}var t=[n,"en"];wr.datestandard=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],{year:"numeric",month:"2-digit",day:"2-digit"}),wr.shortDate=new window.Intl.DateTimeFormat(t,{day:"numeric",month:"short"}),wr.shortDateUtc=new window.Intl.DateTimeFormat(t,{day:"numeric",month:"short",timeZone:"UTC"}),wr.longDate=new window.Intl.DateTimeFormat(t,{day:"numeric",month:"long"}),wr.longDateUtc=new window.Intl.DateTimeFormat(t,{day:"numeric",month:"long",timeZone:"UTC"}),wr.time=new window.Intl.DateTimeFormat(t,{hour:"numeric",minute:"numeric",hour12:!1}),wr.relative=window.Intl.RelativeTimeFormat?new window.Intl.RelativeTimeFormat(t,{numeric:"auto"}):undefined,wr.shortMonth=new window.Intl.DateTimeFormat(t,{month:"short"}),wr.shortMonthUtc=new window.Intl.DateTimeFormat(t,{month:"short",timeZone:"UTC"}),wr.longMonth=new window.Intl.DateTimeFormat(t,{month:"long"}),wr.longMonthUtc=new window.Intl.DateTimeFormat(t,{month:"long",timeZone:"UTC"}),wr.dayMonth=new window.Intl.DateTimeFormat(t,{day:"numeric",month:"long"}),wr.dayMonthUtc=new window.Intl.DateTimeFormat(t,{day:"numeric",month:"long",timeZone:"UTC"}),wr.longWeekday=new window.Intl.DateTimeFormat(t,{weekday:"long"}),wr.longWeekdayUtc=new window.Intl.DateTimeFormat(t,{weekday:"long",timeZone:"UTC"}),wr.shortWeekday=new window.Intl.DateTimeFormat(t,{weekday:"short"}),wr.shortWeekdayUtc=new window.Intl.DateTimeFormat(t,{weekday:"short",timeZone:"UTC"}),wr.monthYear=new window.Intl.DateTimeFormat(t,{month:"long",year:"numeric"}),wr.monthYearUtc=new window.Intl.DateTimeFormat(t,{month:"long",year:"numeric",timeZone:"UTC"})}}(),window.localizationList=window.localizationList||{};function gr(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;if(!n)return"0";var r=n.toFixed(t).split("."),i=r[0],e=r[1];return e=0===parseInt(e,10)?"":".".concat(e),Math.abs(parseInt(i,10))>=1e3&&(i=i.replace(/\B(?=(\d{3})+(?!\d))/g," ")),i+e}var jr,_r,Sr=navigator.userAgent,Or=navigator.appVersion,Er=Sr.match(/Android/i),Tr=Sr.match(/BlackBerry/i),kr=Sr.match(/iPhone|iPad|iPod/i),Cr=Sr.match(/Opera Mini/i),xr=Sr.match(/IEMobile/i),Ar=(Sr.indexOf("MSIE"),Sr.indexOf("Gecko/"),function(){try{return!!document.documentMode}catch(n){return!1}}()),Ir=Er||Tr||kr||Cr||xr;function Mr(){for(var n=[{name:"Windows 10",regex:/(Windows 10.0|Windows NT 10.0)/},{name:"Windows 8.1",regex:/(Windows 8.1|Windows NT 6.3)/},{name:"Windows 8",regex:/(Windows 8|Windows NT 6.2)/},{name:"Windows 7",regex:/(Windows 7|Windows NT 6.1)/},{name:"Windows Vista",regex:/Windows NT 6.0/},{name:"Windows Server 2003",regex:/Windows NT 5.2/},{name:"Windows XP",regex:/(Windows NT 5.1|Windows XP)/},{name:"Windows 2000",regex:/(Windows NT 5.0|Windows 2000)/},{name:"Windows ME",regex:/(Win 9x 4.90|Windows ME)/},{name:"Windows 98",regex:/(Windows 98|Win98)/},{name:"Windows 95",regex:/(Windows 95|Win95|Windows_95)/},{name:"Windows NT 4.0",regex:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{name:"Windows CE",regex:/Windows CE/},{name:"Windows 3.11",regex:/Win16/},{name:"Android",regex:/Android/},{name:"Open BSD",regex:/OpenBSD/},{name:"Sun OS",regex:/SunOS/},{name:"Chrome OS",regex:/CrOS/},{name:"Linux",regex:/(Linux|X11(?!.*CrOS))/},{name:"iOS",regex:/(iPhone|iPad|iPod)/},{name:"Mac OS X",regex:/Mac OS X/},{name:"Mac OS",regex:/(Mac OS|MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{name:"QNX",regex:/QNX/},{name:"UNIX",regex:/UNIX/},{name:"BeOS",regex:/BeOS/},{name:"OS/2",regex:/OS\/2/},{name:"Search Bot",regex:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}],t=0,r=n.length;t<r;t++){var i=n[t];if(i.regex.test(Sr)){jr=i.name;break}}var e=[];switch(jr&&/Windows/.test(jr)&&((e=/Windows (.*)/.exec(jr))&&e.length&&e.length>1&&(_r=e[1]),jr="Windows"),jr){case"Mac OS":case"Mac OS X":case"Android":(e=/(?:Android|Mac OS|Mac OS X|MacPPC|MacIntel|Mac_PowerPC|Macintosh) ([._\d]+)/.exec(Sr))&&e.length&&e.length>1&&(_r=e[1].replace(/_/g,"."));break;case"iOS":(e=/OS (\d+)_(\d+)_?(\d+)?/.exec(Or))&&e.length&&e.length>2&&(_r="".concat(e[1],".").concat(e[2],".").concat(e[3]||0))}_r===undefined&&(_r=""),jr===undefined&&(jr="")}function Rr(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return Ur(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(Ur(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,Ur(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,Ur(l,"constructor",f),Ur(f,"constructor",a),a.displayName="GeneratorFunction",Ur(f,e,"GeneratorFunction"),Ur(l),Ur(l,e,"Generator"),Ur(l,i,function(){return this}),Ur(l,"toString",function(){return"[object Generator]"}),(Rr=function(){return{w:o,m:h}})()}function Ur(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}Ur=function(n,t,r,i){function o(t,r){Ur(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},Ur(n,t,r,i)}var Pr=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})};function Br(n){var t=document.createElement("textarea");if(t.value=n,t.style.position="fixed",t.style.left="9999px",document.body.appendChild(t),t.focus(),kr){var r=document.createRange();r.selectNodeContents(t);var i=window.getSelection();i&&(i.removeAllRanges(),i.addRange(r)),t.setSelectionRange(0,999999)}else t.select();document.execCommand("copy"),t.blur(),document.body.removeChild(t)}function Nr(n){if(n){var t=n.split(".");if(t&&t.length){var r=t.pop();if(r)return r.toLowerCase()}}}undefined&&undefined.__awaiter,undefined&&undefined.__asyncValues;var Dr;function $r(n){return $r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$r(n)}var Gr={weekday:["Mo","Tu","We","Th","Fr","Sa","Su"],weekdayFull:["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthFull:["January","February","March","April","May","June","July","August","September","October","November","December"]},Lr={date:undefined,dateTime:undefined};function zr(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate())}function Fr(n,t){return(zr(n)-zr(t))/864e5|0}function Wr(n){var t=n.dateTime;switch(n.type){case"datetime":case"datestandardtime":return Xr(t)+" "+Hr(t);case"date":case"datestandard":return Xr(t);case"shortDate":return Lr.shortDate.format(t);case"shortDateTime":return Lr.shortDate.format(t)+" "+Hr(t);case"time":return Hr(t);case"shortMonth":return Lr.shortMonth?Lr.shortMonth.format(t):Vr(t);case"longMonth":return Lr.shortMonth?Lr.longMonth.format(t):Vr(t);default:throw new Error("Datetime type '"+n.type+"' is not supported")}}function qr(n){var t="object"!==$r(n.dateTime)?new Date(n.dateTime):n.dateTime;if(!Dr)return n.type="datestandard",Wr(n);var r=new Date,i=Fr(t,r);switch(n.type){case"datetime":return 0===i?Lr.time.format(t):Lr.relative&&i>=-1?Lr.relative.format(i,"day")+", "+Lr.time.format(t):r.getFullYear()===t.getFullYear()?Lr.shortDate.format(t)+", "+Lr.time.format(t):Xr(t)+", "+Hr(t);case"date":return Lr.relative&&i>=-2&&i<=0?Lr.relative.format(i,"day"):r.getFullYear()===t.getFullYear()?Lr.longDate.format(t):Lr.datestandard.format(t).replace(/-/g,".");default:return 0===i?Lr.time.format(t):Lr.relative&&i>=-1?Lr.relative.format(i,"day"):r.getFullYear()===t.getFullYear()?Lr.shortDate.format(t):Lr.datestandard.format(t).replace(/-/g,".")}}function Xr(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:".";return n.getFullYear()+t+Jr(n.getMonth()+1)+t+Jr(n.getDate())}function Hr(n){return Jr(n.getHours())+":"+Jr(n.getMinutes())}function Jr(n){return("0"+n).slice(-2)}function Qr(n){var t=n.date,r=n.dateLocal,i=void 0===r||r,e=i?t.getFullYear():t.getUTCFullYear(),o=(e=(e="0000"+e).substring(e.length-4))+".";return o+=((e=(i?t.getMonth():t.getUTCMonth())+1)<10?"0"+e:e)+".",o+=((e=i?t.getDate():t.getUTCDate())<10?"0"+e:e)+" ",o+=((e=i?t.getHours():t.getUTCHours())<10?"0"+e:e)+":",o+=(e=i?t.getMinutes():t.getUTCMinutes())<10?"0"+e:e}function Vr(n){return"".concat(mr("monthsShort.".concat(n.getMonth())))}!function(){if(Dr=window.Intl!==undefined){var n={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},t={year:"numeric",month:"long",day:"numeric"},r={year:"numeric",month:"2-digit",day:"2-digit"},i={year:"numeric",month:"2-digit",day:"2-digit",hour:"numeric",minute:"numeric",hour12:!1},e={day:"numeric",month:"short"},o={day:"numeric",month:"long"},u={hour:"numeric",minute:"numeric",hour12:!1},c={month:"short"},a={month:"long"},f={weekday:"short"},s={weekday:"long"},l={year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",hour12:!1},h=document.documentElement.lang||"en-GB";switch(h){case"ru":h="ru-RU";break;case"zh":h="zh-CN";break;case"en":h="en-GB"}var v=[h,"en"];Lr.dateTime=new window.Intl.DateTimeFormat(v,n),Lr.date=new window.Intl.DateTimeFormat(v,t),Lr.datestandard=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],r),Lr.datestandardtime=new window.Intl.DateTimeFormat(["lt-LT","ko-KR","en"],i),Lr.shortDate=new window.Intl.DateTimeFormat(v,e),Lr.longDate=new window.Intl.DateTimeFormat(v,o),Lr.time=new window.Intl.DateTimeFormat(v,u),Lr.relative=window.Intl.RelativeTimeFormat?new window.Intl.RelativeTimeFormat(v,{numeric:"auto"}):null,Lr.shortMonth=new window.Intl.DateTimeFormat(v,c),Lr.longMonth=new window.Intl.DateTimeFormat(v,a),Lr.shortWeekday=new window.Intl.DateTimeFormat(v,f),Lr.longWeekday=new window.Intl.DateTimeFormat(v,s),Lr.humanreadabledate=new window.Intl.DateTimeFormat(v,l),function(){Gr={month:[],monthFull:[],weekday:[],weekdayFull:[]};for(var n=0;n<12;n++){var t=new Date(2020,n,10),r=Lr.shortMonth.format(t).replace(".","");r=r.charAt(0).toUpperCase()+r.slice(1,3);var i=Lr.longMonth.format(t);i=i.charAt(0).toUpperCase()+i.slice(1),Gr.month.push(r),Gr.monthFull.push(i)}for(var e=0;e<7;e++){var o=new Date(2020,9,5+e),u=Lr.shortWeekday.format(o);u=u.charAt(0).toUpperCase()+u.slice(1);var c=Lr.longWeekday.format(o);c=c.charAt(0).toUpperCase()+c.slice(1),Gr.weekday.push(u),Gr.weekdayFull.push(c)}}()}}();var Yr,Zr=["bytes","kb","mb","gb","tb"];function Kr(n,t,r){var i=t;if(t.recType!==kn)return i;var e=n.getBinary(32),o=n.getInt32(),u=function(n){if(0==n)return"0 Byte";var t=parseInt(Math.floor(Math.log(n)/Math.log(1024)),10);return Math.round(n/Math.pow(1024,t)*100)/100+" "+Zr[t]}(o),c=n.getString16(),a=n.getString16(),f=Nr(a);if(!f||!w.includes(f))return i.recType=Cn,i;var s="",l=0,h=0,v=0,d=null;return n.isEnded()||(n.getUint16(),l=n.getInt8(),h=n.getInt32(),v=n.getInt32(),(d=n.getBlob(n.Size(),"image/png"))&&(s=URL.createObjectURL(d)),(l||h||v)&&(i.preview={type:l,width:h,height:v,src:s},d&&(i.preview.blob=d))),i.hash=e,i.fileSize=o,i.fileSizeString=u,i.mime=c,i.fileName=a,i.url="https://"+nr+"/attach/0x"+r,i}function ni(n,t,r){var i=n.getReader32();if(i.Size()<=0)return t;switch(t.recType){case Tn:return function(n,t,r){var i=t;if(t.recType!==Tn)return i;var o=n.getBinary(n.getUint32()),u=n.getReader32(),c=vr(vt(o));if(i.text=c,!u)return i;for(i.tags={};!u.isEnded();)try{var a=u.getUint8();u.getUint16(),u.getUint16();var f=u.getReader16();if(0===f.Size())return i;if(a===Mn){var s=f.getString16(),l=f.getString16(),h=f.getString16(),v=f.getString16(),d=void 0;0!==f.Size()&&(d={width:f.getInt16(),height:f.getInt16(),hash:f.getUint8(),src:"https://"+nr+"/enrichment/0x"+r}),i.tags.enrich={url:s,title:l,siteName:h,description:v,preview:d}}else if(a===Rn){var b=bt(f.getBinary(8)),p=f.getUint8(),m=bt(f.getBinary(8)),w=f.getString16(),g=vr(f.getString16());i.tags.quote={citedId:b,citedType:p,citedUser:m,citedAuthor:w,citedText:g}}else if(a===Un){var j=f.getUint8();f.getUint8();for(var _=[];!f.isEnded();)_.push(bt(f.getBinary(8)));i.tags.files={type:j,linkedIds:_}}}catch(S){y.error(e.k,S)}return i}(i,t,r);case xn:return function(n,t){var r=t;if(t.recType!==xn)return r;var i=n.getUint8();switch(r.type=i,i){case Bn:case Nn:r.userId=bt(n.getBinary(8)),r.userName=n.getString16();break;case Dn:case $n:case Gn:r.changeValue=n.getUint8();break;case Ln:case zn:r.name=n.getString16()}return r}(i,t);case kn:return Kr(i,t,r)}return t}function ti(n){var t={messageId:j};try{var r=n.getReader32(),i=r.getBinary(8);t.messageId=bt(i);var o=r.getBinary(8),u=dr(r.getString16()),c=r.getUint32(),a=r.getUint8(),f=r.getBinary(8),s=St(i);return t={messageId:t.messageId,authorId:bt(o),authorName:u,sequence:c,recType:a,date:s,dateText:Qr({date:s}),linkId:bt(f)},a===In?(t.recType=Cn,t):ni(r,t,mt(i))}catch(l){y.error(e.k,l)}return t.recType=Cn,t}function ri(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];try{var r=n.getReader32(),i=undefined;t&&(r=(i=r).getReader32());var o=r.getBinary(8),u=r.getBinary(8),c=r.getBinary(8),a=dr(r.getString16()),f=r.getUint8(),s=Boolean(r.getUint8()),l=Boolean(r.getUint8()),h=Boolean(r.getUint8()),v=r.getBinary(8),d=r.getBinary(8),b=r.getString16(),p=vr(r.getString16()),m=dr(r.getString16()),w=dr(r.getString16()),g=r.getInt32(),j=r.getInt32(),_=r.getInt32(),S=r.getInt32(),O=r.getInt32(),E=Boolean(r.getUint8());r.getBinary(32);var T=r.getBinary(8),k=r.getBinary(8),C=r.getInt16(),x=Boolean(r.getInt8()),A=Boolean(r.getInt8()),I=!1;try{I=Boolean(r.getInt8())}catch($){}var M=St(v),R=bt(o),U=bt(c),P=bt(u),B="";E&&(B="https://"+nr+"/avatar/0x"+mt(o)+"?"+P);var N={chatId:R,changeId:P,authorId:U,authorName:a,type:f,isPublic:s,isLimited:l,isClosed:h,lastUpdate:bt(v),extraId:bt(d),name:b,description:p,links:m,inviteLink:w,language:g,countAdmins:j,countModers:_,countInvited:S,countReaders:O,countMembers:j+_+S+O,avatarIsPresent:E,avatar:B,lastSeen:bt(T),lastAccess:bt(k),perms:C,isMuted:x,isSubscribed:A,date:M,dateText:Qr({date:M}),created:St(o),isVerified:I};if(t&&i&&!i.isEnded())try{var D=ti(i);D&&D.recType!==Cn&&(N.topMessage=D)}catch(G){y.error(e.k,G)}return N}catch(G){return y.error(e.k,G),null}}function ii(n){var t=n;if(delete t.changeId,delete t.authorId,delete t.authorName,delete t.isPublic,delete t.isLimited,delete t.isClosed,delete t.lastUpdate,delete t.extraId,delete t.links,delete t.countAdmins,delete t.countModers,delete t.countInvited,delete t.countReaders,delete t.lastSeen,delete t.lastAccess,delete t.perms,delete t.isMuted,delete t.isSubscribed,t.topMessage){var r=t.topMessage;delete r.authorId,delete r.sequence,delete r.linkId,r.recType===kn&&r.hash&&delete r.hash}return Object.assign(t,{timestamp:(new Date).getTime()})}function ei(n){var t=n.getBinary(8),r=ti(n);return r?{chatId:bt(t),message:r}:{chatId:bt(t)}}function oi(n,t){return{result:t,messageId:bt(n.getBinary(8))}}function ui(n,t){var r=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],i={chats:[],result:t};if(!n)return i;try{for(;!n.isEnded();){var o=ri(n,r);o&&i.chats.push(o)}}catch(u){y.error(e.k,u)}return i}!function(n){n[n.INT_8=0]="INT_8",n[n.UINT_8=1]="UINT_8",n[n.STRING_8=2]="STRING_8",n[n.INT_16=3]="INT_16",n[n.UINT_16=4]="UINT_16",n[n.STRING_16=5]="STRING_16",n[n.INT_32=6]="INT_32",n[n.UINT_32=7]="UINT_32",n[n.STRING_32=8]="STRING_32",n[n.INT_64=9]="INT_64",n[n.INT_64_HEX=10]="INT_64_HEX",n[n.INT_64_HEX_BE=11]="INT_64_HEX_BE",n[n.UINT_8_32=12]="UINT_8_32",n[n.X=13]="ARRAY",n[n.H=14]="BLOCK"}(Yr||(Yr={}));var ci=[{name:"userId",type:Yr.INT_64_HEX_BE},{name:"userName",type:Yr.STRING_16},{name:"userLogin",type:Yr.STRING_16},{name:"userAvatar",type:Yr.STRING_16},{name:"isDeleted",type:Yr.UINT_8}];function ai(n){var t=n.getReader32();return{userId:bt(t.getBinary(8)),userName:dr(t.getString16()),userLogin:t.getString16(),userAvatar:t.getString16(),isDeleted:Boolean(t.getUint8())}}function fi(n){for(var t=[];!n.isEnded();)try{t.push(ai(n))}catch(r){y.error(e.k,r)}return t}function si(n){var t=n.getBinary(8),r=n.getString16(),i=n.getInt32();return{userId:bt(t),userName:r,userFlags:i,J:!!(i&Wn),V:!!(i&Fn)}}function li(n,t){var r=this,i={};return t.forEach(function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r);var e="";switch(t.type){case Yr.INT_8:e=n.getInt8();break;case Yr.UINT_8:e=n.getUint8();break;case Yr.STRING_8:e=n.getString8();break;case Yr.INT_16:e=n.getInt16();break;case Yr.UINT_16:e=n.getUint16();break;case Yr.STRING_16:e=n.getString16();break;case Yr.INT_32:e=n.getInt32();break;case Yr.UINT_32:e=n.getUint32();break;case Yr.STRING_32:e=n.getString32();break;case Yr.INT_64:e=n.getBinary(8);break;case Yr.INT_64_HEX_BE:e=bt(n.getBinary(8));break;case Yr.INT_64_HEX:e=mt(n.getBinary(8));break;case Yr.UINT_8_32:e=n.getBinary(32);break;case Yr.X:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");for(e=[];!n.isEnded();)try{var o=n.getReader32();e.push(li(o,t.struct))}catch(u){console.warn(u)}break;case Yr.H:if(!("struct"in t)||!t.struct)throw new Error("Struct is empty");e=li(n.getReader32(),t.struct);break;default:throw new Error("Unknown type")}i[t.name]=e}.bind(this)),i}var hi=[{name:"chatId",type:Yr.INT_64_HEX_BE},{name:"userId",type:Yr.INT_64_HEX_BE},{name:"isDelete",type:Yr.UINT_8},{name:"perm",type:Yr.UINT_16}];var vi=[{name:"user",type:Yr.H,struct:ci},{name:"perms",type:Yr.UINT_16}],di=[{name:"chatId",type:Yr.INT_64_HEX_BE},{name:"users",type:Yr.X,struct:vi}];var bi=[{name:"users",type:Yr.X,struct:ci}];var yi=[{name:"chatId",type:Yr.INT_64_HEX_BE},{name:"userId",type:Yr.INT_64_HEX_BE},{name:"userName",type:Yr.STRING_16},{name:"permission",type:Yr.UINT_16},{name:"isDeleted",type:Yr.UINT_8}];var pi=[{name:"count",type:Yr.UINT_32}];var mi=[{name:"chatId",type:Yr.INT_64_HEX_BE}];function wi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gi(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100,i=arguments.length>2&&arguments[2]!==undefined&&arguments[2],e=!1;return new Promise(function(o,u){var c=this;if(wi(this,t),n){var a=[{Uint8:i?1:0},{String16:n},{Uint8:0},{Uint32:r}];ir.send(W,a).then(function(n){var t=n.reader,r=n.result;wi(this,c);var i=ui(t,r,e);o(i)}.bind(this))["catch"](function(n){wi(this,c),u(n)}.bind(this))}else u(new Error("Keyword is empty"))}.bind(this))}function ji(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _i(n,t){var r=this;return new Promise(function(i,e){var o=this;if(ji(this,r),n)if(t){var u=yt(n),c=yt(t);ir.send(H,[u,c]).then(function(n){var t=n.result;ji(this,o),i(t)}.bind(this))["catch"](function(n){ji(this,o),e(n)}.bind(this))}else e(new Error("Last access is empty"));else e(new Error("Chat id is empty"))}.bind(this))}function Si(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Oi(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return new Promise(function(o,u){var c=this;if(Si(this,r),0!==parseInt(n,16))if(n){var a=yt(n),f=t?yt(t):g,s=[a,{Uint8:i?1:0},f,{Uint32:8192}];ir.send(M,s).then(function(n){var t=n.result,r=n.reader;Si(this,c);var i=function(n,t){for(var r=n.getUint8(),i=n.getBinary(8),o=n.getBinary(8),u=n.getInt16(),c={result:t,isAscending:r,chatId:bt(i),lastAccess:bt(o),perms:u,messages:[]};!n.isEnded();)try{var a=ti(n);if(!a)continue;c.messages.push(a)}catch(f){y.error(e.k,f)}return c}(r,t);o(i)}.bind(this))["catch"](function(n){Si(this,c),u(n)}.bind(this))}else u(new Error("Chat id is empty"));else u(new Error("Chat id is zero"))}.bind(this))}function Ei(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ti(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ki(n,t){var r=this;return new Promise(function(i,e){var o=this;if(Ti(this,r),0!==parseInt(n,16))if(0!==parseInt(t,16))if(t)if(n){var u=yt(n),c=yt(t);ir.send(A,[u,{Uint8:Cn},c]).then(function(n){var t=n.reader,r=n.result;Ti(this,o);var e=oi(t,r);i(e)}.bind(this))["catch"](function(n){Ti(this,o),e(n)}.bind(this))}else e(new Error("Chat id is empty"));else e(new Error("Message id is empty"));else e(new Error("Message id is zero"));else e(new Error("Chat id is zero"))}.bind(this))}function Ci(n){if(n===undefined)return 0;if("string"==typeof n)return n.length;if(Array.isArray(n)){for(var t=0,r=0;r<n.length;++r)t+=Ci(n[r]);return t}return"String"in n&&n.String!==undefined?jt(n.String).length:"String8"in n&&n.String8!==undefined?jt(n.String8).length+1:"String16"in n&&n.String16!==undefined?jt(n.String16).length+2:"String32"in n&&n.String32!==undefined?jt(n.String32).length+4:"Uint8"in n||"Int8"in n?1:"Uint16"in n||"Int16"in n?2:"Uint32"in n||"Int32"in n?4:0}function xi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ai(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ii(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Mi(n,t,r,i){var e=this;if(n<t.byteLength){var o=Math.min(131072,t.byteLength-n);if(function(n,t){var r=this;return new Promise(function(i,e){var o=this;Ai(this,r),ir.send(Y,[{Uint32:t}],n).then(function(n){var t=n.reader,r=n.result,e=n.id;Ai(this,o);var u=function(n,t){return{result:t,sizeUploaded:n.getInt32()}}(t,r);i(Object.assign(u,{id:e}))}.bind(this))["catch"](function(n){Ai(this,o),e(n)}.bind(this))}.bind(this))}(o,n).then(function(o){var u=o.result,c=o.id;Ii(this,e),u!==jn?u===gn&&ir.setRequest(c,{resolve:r,reject:i}):Mi(n,t,r,i)}.bind(this))["catch"](function(n){Ii(this,e),i(n)}.bind(this)),o>1e3)for(var u=0,c=1;c<=10;c++){var a=Math.floor(c*o/10);(function(n,r){var i=t.slice(n,r);ir.directSend(i)})(n+u,n+a),u=a}else{var f=t.slice(n);ir.directSend(f)}n+=o}else i(new Error("Offset => byteLength"))}function Ri(n){var t=this;return new Promise(function(r,i){if(Ii(this,t),n){var o=new FileReader;o.onloadend=function(){if(o.readyState!==FileReader.DONE)return y.error(e.S,"read file error","Prepare file"),void i(new Error("read file error"));Mi(0,o.result,r,i)},o.readAsArrayBuffer(n)}else i(new Error("File is undefined"))}.bind(this))}function Ui(n){return function(n){if(Array.isArray(n))return Pi(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return Pi(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pi(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pi(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Bi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ni=window.Uint8Array?new Uint8Array([139,22,96,224,115,20,103,83,95,225,254,248,9,43,105,26,39,200,253,236,146,105,43,153,4,74,142,140,44,204,239,233,137,90,166,229,193,243,253,164,31,83,99,67,154,127,243,184,19,54,180,200,198,59,213,81,215,22,74,96,224,79,170,166]):undefined;function Di(n){var t=this;return new Promise(function(r,i){if(Bi(this,t),n)if(Ni){var o=new FileReader,u=n.slice(0,n.size);o.onloadend=function(){var t=this;if(o.readyState!==FileReader.DONE)return y.error(e.S,"read file error","Prepare file"),void i(new Error("read file error"));var u=o.result,c=new Uint8Array(u.byteLength+Ni.byteLength);if(c.set(new Uint8Array(u)),c.set(Ni,u.byteLength),window.crypto)window.crypto.subtle.digest("SHA-256",u).then(function(i){var o=this;Bi(this,t);var u=String.fromCharCode.apply(null,Ui(new Uint8Array(i)));window.crypto.subtle.digest("SHA-256",c).then(function(t){Bi(this,o);var i=String.fromCharCode.apply(null,Ui(new Uint8Array(t)));r({cipherKey:i,hash:u,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}.bind(this))["catch"](function(n){Bi(this,o),y.error(e.S,n)}.bind(this))}.bind(this))["catch"](function(n){Bi(this,t),y.error(e.S,n)}.bind(this));else if(window.msCrypto){var a=window.msCrypto.subtle.digest("SHA-256",u);a.oncomplete=function(){var t=String.fromCharCode.apply(null,Ui(new Uint8Array(a.result))),i=window.msCrypto.subtle.digest("SHA-256",c);i.oncomplete=function(){var e=String.fromCharCode.apply(null,Ui(new Uint8Array(i.result)));r({cipherKey:e,hash:t,fileSize:n.size,mime:n.type,fileName:n.name,file:n})}}}else i(new Error("The browser doesn't support crypto"))},o.readAsArrayBuffer(u)}else i(new Error("The browser doesn't support Uint8Array"));else i(new Error("File is undefined"))}.bind(this))}function $i(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Gi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Li(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined&&arguments[2],e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:100,o=!(arguments.length>4&&arguments[4]!==undefined)||arguments[4];return new Promise(function(u,c){var a=this;Gi(this,r);var f=t?yt(t):g,s=[{Uint8:i?1:0},f,{Uint8:o?1:0},{Uint32:e},{Uint8:n}];ir.send(nn,s).then(function(n){var t=n.result,r=n.reader;Gi(this,a);var i=ui(r,t);u(i)}.bind(this))["catch"](function(n){Gi(this,a),c(n)}.bind(this))}.bind(this))}function zi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Fi(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1],i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100,e=!(arguments.length>3&&arguments[3]!==undefined)||arguments[3];return new Promise(function(o,u){var c=this;zi(this,t);var a=n?yt(n):g,f=[{Uint8:r?1:0},a,{Uint8:e?1:0},{Uint32:i}];ir.send(I,f).then(function(n){var t=n.result,r=n.reader;zi(this,c);var i=ui(r,t);o(i)}.bind(this))["catch"](function(n){zi(this,c),u(n)}.bind(this))}.bind(this))}function Wi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function qi(n){var t=this;return new Promise(function(r,i){var e=this;if(Wi(this,t),n&&n.length){var o=[];n.forEach(function(n){Wi(this,e),o.push(yt(n))}.bind(this)),ir.send($,o).then(function(n){var t=n.reader;Wi(this,e);var i=fi(t);r(i)}.bind(this))["catch"](function(n){Wi(this,e),i(n)}.bind(this))}else i(new Error("Users id is empty"))}.bind(this))}function Xi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Hi(n){var t=this;return new Promise(function(r,i){var e=this;if(Xi(this,t),n){var o=[],u=n.isPublic?n.inviteLink:"";if(n.type===On)o=[{Uint8:On},{Uint8:n.isPublic?1:0},{Uint8:n.isLimited?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];else if(n.type===En)o=[{Uint8:En},{Uint8:n.isPublic?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];else{var c=n.userId?yt(n.userId):g;o=[{Uint8:Sn},c]}ir.send(C,o).then(function(n){var t=n.reader;Xi(this,e),r(function(n){return li(n,mi).chatId}(t))}.bind(this))["catch"](function(n){Xi(this,e),i(n)}.bind(this))}else i(new Error("Chat object is empty"))}.bind(this))}function Ji(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Qi(n,t){var r=this;return new Promise(function(i,e){var o=this;if(Ji(this,r),t)if(0!==parseInt(t,16))if(!(u=n)||!u.size||["image/gif","image/jpeg","image/png"].indexOf(u.type)<0)e(new Error("File is not valid"));else{var u,c=yt(t);Di(n).then(function(n){var t=this;Ji(this,o);var r=n.cipherKey,u=n.hash,a=n.fileSize,f=n.mime,s=n.fileName,l=n.file,h=[c,{Uint8:1},r,u,{Uint32:a},{String16:f},{String16:s}];ir.send(X,h).then(function(n){var r=this,o=n.result;Ji(this,t),o!==jn?i():Ri(l).then(function(){Ji(this,r),i()}.bind(this))["catch"](function(n){Ji(this,r),e(n)}.bind(this))}.bind(this))["catch"](function(n){Ji(this,t),e(n)}.bind(this))}.bind(this))["catch"](function(n){Ji(this,o),e(n)}.bind(this))}else e(new Error("Chat id is zero"));else e(new Error("Chat id is empty"))}.bind(this))}function Vi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Yi(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Zi(n){var t=this;return new Promise(function(r,i){var e=this;if(Yi(this,t),n)if(0!==parseInt(n.chatId,16)){var o=yt(n.chatId),u=n.isPublic?n.inviteLink:"",c=[o,{Uint8:n.isPublic?1:0},{Uint8:n.isLimited?1:0},{Uint8:n.isClosed?1:0},{String16:n.name},{String16:n.description},{String16:n.links},{String16:u},{Uint32:n.language}];ir.send(k,c).then(function(n){var t=n.result;Yi(this,e),r(t)}.bind(this))["catch"](function(n){Yi(this,e),i(n)}.bind(this))}else i(new Error("Chat id is zero"));else i(new Error("Chat object is empty"))}.bind(this))}function Ki(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ne(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:100;return new Promise(function(e,o){var u=this;if(Ki(this,r),n)if(0!==parseInt(n,16)){var c=[yt(n),t=t?yt(t):g,{Uint32:i}];ir.send(G,c).then(function(n){var t=n.result,r=n.reader;Ki(this,u);var i=function(n){return li(n,di)}(r);e({result:t,data:i})}.bind(this))["catch"](function(n){Ki(this,u),o(n)}.bind(this))}else o(new Error("Chat id is zero"));else o(new Error("Chat id is empty"))}.bind(this))}function te(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function re(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return new Promise(function(o,u){var c=this;if(te(this,r),0!==parseInt(n,16))if(0!==parseInt(t,16))if(n)if(t){var a=[yt(n),yt(t),{Uint8:e?1:0},{Uint16:i}];ir.send(T,a).then(function(n){var t=n.reader;te(this,c),o(function(n){return li(n,hi)}(t))}.bind(this))["catch"](function(n){te(this,c),u(n)}.bind(this))}else u(new Error("User id is empty"));else u(new Error("Chat id is empty"));else u(new Error("User id is zero"));else u(new Error("Chat id is zero"))}.bind(this))}function ie(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ee(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:nt,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:10,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(e,o){var u=this;ie(this,n);var c=g;i&&(c=yt(i));var a=[{Uint8:t},c,{Uint32:r}];ir.send(q,a).then(function(n){var t=n.reader;ie(this,u),e(function(n){return li(n,bi).users}(t))}.bind(this))["catch"](function(n){ie(this,u),o(n)}.bind(this))}.bind(this))}function oe(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ue(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return new Promise(function(i,e){var o=this;if(oe(this,t),n){var u=[{String16:n},{Uint32:r}];ir.send(D,u).then(function(n){var t=n.reader;oe(this,o);var r=fi(t);i(r)}.bind(this))["catch"](function(n){oe(this,o),e(n)}.bind(this))}else e(new Error("Keyword is empty"))}.bind(this))}function ce(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ae(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:Vn,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:p.NONE,i=!(arguments.length>2&&arguments[2]!==undefined)||arguments[2],o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:10,u=arguments.length>4&&arguments[4]!==undefined&&arguments[4];return new Promise(function(c,a){var f=this;ce(this,n);var s=[{Uint8:u?1:0},{Uint8:t},{Uint32:r},{Uint8:i?1:0},{Uint32:o}];ir.send(Z,s).then(function(n){var t=n.reader;ce(this,f);var r=function(n,t){var r=[];if(!n)return r;try{for(;!n.isEnded();){var i=ri(n,t);i&&r.push(ii(i))}}catch(o){y.error(e.k,o)}return r}(t,i);c(r)}.bind(this))["catch"](function(n){ce(this,f),a(n)}.bind(this))}.bind(this))}function fe(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function se(n){var t=this,r=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];return new Promise(function(i,e){var o=this;fe(this,t),0!==parseInt(n,16)?ir.send(Q,[yt(n),{Uint8:r?1:0}]).then(function(n){var t=n.reader;fe(this,o);var u=ri(t,r);u?i(u):e(new Error("Chat parse error"))}.bind(this))["catch"](function(n){fe(this,o),e(n)}.bind(this)):e(new Error("Chat id is zero"))}.bind(this))}function le(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function he(){var n=this;return new Promise(function(t,r){var i=this;le(this,n),ir.send(tn,null).then(function(n){var r=n.reader;le(this,i);var e=function(n){return li(n,pi).count}(r);t(e)}.bind(this))["catch"](function(n){le(this,i),r(n)}.bind(this))}.bind(this))}function ve(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function de(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return be(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(be(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,be(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,be(l,"constructor",f),be(f,"constructor",a),a.displayName="GeneratorFunction",be(f,e,"GeneratorFunction"),be(l),be(l,e,"Generator"),be(l,i,function(){return this}),be(l,"toString",function(){return"[object Generator]"}),(de=function(){return{w:o,m:h}})()}function be(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}be=function(n,t,r,i){function o(t,r){be(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},be(n,t,r,i)}var ye=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})};function pe(n,t){return ye(this,void 0,void 0,de().m(function r(){var i,o,u,c,a;return de().w(function(r){for(;;)switch(r.p=r.n){case 0:return i=[{Uint8:t},{Uint8:4},{Uint32:12},yt(n)],y.info(e._,"protocol: ".concat(t)),r.p=1,r.n=2,ir.send(R,i);case 2:return o=r.v,u=o.reader,r.a(2,si(u));case 3:if(r.p=3,!((a=r.v).cause===cn&&t>1)){r.n=5;break}return r.n=4,pe(n,t-1);case 4:return c=r.v,r.a(2,c);case 5:throw a;case 6:return r.a(2)}},r,null,[[1,3]])}))}function me(){var n=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0];ir.send(L,[{Uint8:n?1:0}])}function we(){var n=0,t=0,r=(_r===undefined&&Mr(),_r||"");if(r){var i=r.split(".");n=parseInt(i[0],10),i.length>1&&(t=parseInt(i[1],10))}var e=100*n+t,o=[{Uint8:9},{Uint8:4},{Uint32:12},{Uint32:0},yt(Jt),{Uint32:e},{Uint32:0},{Uint8:2},pt(rr),{Uint8:0},{Uint32:0}];ir.send(S,o,undefined)}function ge(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function je(n){var t=this,r=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];return new Promise(function(i,e){var o=this;ge(this,t);var u=yt(n);ir.send(J,[u,{Uint8:r?1:0}]).then(function(n){var t=n.result;ge(this,o),i(t)}.bind(this))["catch"](function(n){ge(this,o),e(n)}.bind(this))}.bind(this))}var _e=[{name:"chatId",type:Yr.INT_64_HEX_BE},{name:"isVerified",type:Yr.UINT_8}];function Se(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Oe(n,t){var r=this;return new Promise(function(i,e){var o=this;if(Se(this,r),n){var u=yt(n);ir.send(E,[u,{Uint8:t?1:0}]).then(function(n){var t=n.reader,r=n.result;Se(this,o);var e=function(n){return li(n,_e)}(t);i({data:e,result:r})}.bind(this))["catch"](function(n){Se(this,o),e(n)}.bind(this))}else e(new Error("Chat id is empty"))}.bind(this))}function Ee(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return Te(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(Te(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,Te(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,Te(l,"constructor",f),Te(f,"constructor",a),a.displayName="GeneratorFunction",Te(f,e,"GeneratorFunction"),Te(l),Te(l,e,"Generator"),Te(l,i,function(){return this}),Te(l,"toString",function(){return"[object Generator]"}),(Ee=function(){return{w:o,m:h}})()}function Te(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}Te=function(n,t,r,i){function o(t,r){Te(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},Te(n,t,r,i)}var ke=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})};function Ce(){return ke(this,void 0,void 0,Ee().m(function n(){var t,r;return Ee().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,ir.send(z);case 1:return t=n.v,r=t.reader,n.a(2,fi(r))}},n)}))}function xe(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return Ae(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(Ae(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,Ae(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,Ae(l,"constructor",f),Ae(f,"constructor",a),a.displayName="GeneratorFunction",Ae(f,e,"GeneratorFunction"),Ae(l),Ae(l,e,"Generator"),Ae(l,i,function(){return this}),Ae(l,"toString",function(){return"[object Generator]"}),(xe=function(){return{w:o,m:h}})()}function Ae(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}Ae=function(n,t,r,i){function o(t,r){Ae(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},Ae(n,t,r,i)}var Ie=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})};function Me(n){return Ie(this,arguments,void 0,function(n){var t=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];return xe().m(function r(){var i,e,o;return xe().w(function(r){for(;;)switch(r.n){case 0:return i=yt(n),r.n=1,ir.send(F,[i,{Uint8:t?1:0}]);case 1:return e=r.v,o=e.result,r.a(2,o)}},r)})()})}function Re(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ue(){var n=this,t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:On,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,i=arguments.length>2&&arguments[2]!==undefined&&arguments[2],o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:20;return new Promise(function(u,c){Re(this,n);var a=1,f=[];o<=0?c(new Error("Count is zero")):function s(){var n=this;a>50&&u(f),Li(t,r,i,o).then(function(t){Re(this,n),f=f.concat(t.chats),t.result===jn&&t.chats.length?(a++,r=!1===i?t.chats[t.chats.length-1].lastUpdate:t.chats[0].lastUpdate,s()):u(f)}.bind(this))["catch"](function(t){Re(this,n),y.error(e.S,t),u(f)}.bind(this))}()}.bind(this))}var Pe=window.globalStorage();function Be(n){var t=this;return new Promise(function(r,i){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),Pe&&Pe.supported?Pe.getItem(n,function(t,i){r(t===n?i:"")}):i(new Error("Local storage is not supported"))}.bind(this))}function Ne(n,t){Pe&&Pe.supported&&Pe.setItem(n,t)}function De(n){Pe&&Pe.supported&&Pe.removeItem(n)}var $e,Ge,Le,ze=(0,Ot.T5)([]),Fe=(0,Ot.T5)([]);function We(n){$e=n.userId,n.userName,n.userFlags,Ge=n.J,Le=n.V}function qe(n){var t,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100;return function(){for(var i=this,e=arguments.length,o=new Array(e),u=0;u<e;u++)o[u]=arguments[u];clearTimeout(t),t=setTimeout(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),n.apply(void 0,o)}.bind(this),r)}}var Xe=undefined;function He(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Je=(0,Ot.T5)(0),Qe=!1,Ve=qe(function(){var n=this;if(!$e||$e===_)return;he().then(function(t){He(this,n),Je.set(t)}.bind(this))["catch"](function(t){He(this,n),y.error(e.S,t,"Unread")}.bind(this))},500);function Ye(n,t){if(n){var r=n.querySelector(".notify-icon_messages");if(r){var i=r.querySelector(".notify-icon_count");i&&r.removeChild(i),t>0&&(r.innerHTML='<i class="notify-icon_count">'.concat(t,"</i>"))}}}function Ze(){var n=this;Qe||(Qe=!0,Je.subscribe(function(t){He(this,n),function(n){Ne("mql5_chats_unread","".concat(n))}(t=Math.min(t,99))}.bind(this)))}function Ke(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return no(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?no(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function no(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function to(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}Je.subscribe(function(n){He(this,Xe),function(n){if(Yt)return;var t=document.getElementById("notifyMessages");t&&Ye(t,n);var r=document.getElementById("notifyMessagesMobile");r&&Ye(r,n);!function(n){var t=document.getElementById("counterMessagesMenu");if(!t)return;t.innerHTML=n>0?"<i>".concat(n,"</i>"):""}(n)}(n=Math.min(n,99))}.bind(undefined));var ro=(0,Ot.T5)([]),io=(0,Ot.T5)([]),eo=(0,Ot.T5)([]),oo=(0,Ot.T5)([]),uo=!0,co=!0,ao=!0,fo=!0,so=!1,lo=!1,ho=(0,Ot.T5)([]),vo=(0,Ot.T5)(_n);function bo(n,t){var r=n.topMessage?n.topMessage.messageId:n.lastUpdate;return _t(t.topMessage?t.topMessage.messageId:t.lastUpdate,r)}function yo(n){var t=this;return n.filter(function(n){return to(this,t),n.authorId===$e}.bind(this))}function po(n){var t=ro;switch(n){case _n:t=ro;break;case Sn:t=io;break;case On:t=eo;break;case En:t=oo}return t}function mo(n,t){switch(n){case Sn:co=t;break;case On:ao=t;break;case En:fo=t;break;default:uo=t}}function wo(n){var t=this,r=j,i=(0,Ot.Jt)(n);return i.length?(i.forEach(function(n){to(this,t),_t(n.lastUpdate,r)>0&&(r=n.lastUpdate)}.bind(this)),r):r}function go(n){var t=this;ro.update(function(r){var i=this;return to(this,t),r.filter(function(t){return to(this,i),t.chatId!==n}.bind(this))}.bind(this)),io.update(function(r){var i=this;return to(this,t),r.filter(function(t){return to(this,i),t.chatId!==n}.bind(this))}.bind(this)),eo.update(function(r){var i=this;return to(this,t),r.filter(function(t){return to(this,i),t.chatId!==n}.bind(this))}.bind(this)),oo.update(function(r){var i=this;return to(this,t),r.filter(function(t){return to(this,i),t.chatId!==n}.bind(this))}.bind(this))}function jo(n,t){n=n.sort(bo),po(t).set(n)}function _o(){var n=this,t=[];t.push(Fi(undefined,!1,tt).then(function(t){to(this,n),Oo(t.chats,_n)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))),t.push(Li(Sn,undefined,!1,tt).then(function(t){to(this,n),Oo(t.chats,Sn)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))),t.push(Ue(On).then(function(t){to(this,n),Oo(t,On)}.bind(this))),t.push(Ue(En).then(function(t){to(this,n),Oo(t,En)}.bind(this))),Promise.allSettled(t).then(function(){to(this,n),lo=!0}.bind(this))}function So(n){var t=this,r=function(n){var t=!1;switch(n){case Sn:t=co;break;case On:t=ao;break;case En:t=fo;break;default:t=uo}return t}(n);if(r&&!so){so=!0;var i=po(n),o=(0,Ot.Jt)(i),u=undefined;switch(o.length&&(u=function(n){var t=this,r=j,i=(0,Ot.Jt)(n);return i.length?(i.forEach(function(n){to(this,t),r===j&&(r=n.lastUpdate),_t(r,n.lastUpdate)>0&&(r=n.lastUpdate)}.bind(this)),r):r}(i)),n){case Sn:case On:case En:Li(n,u,!1,tt).then(function(r){to(this,t),r.chats.length&&r.result===jn||mo(n,!1),Oo(r.chats,n),so=!1}.bind(this))["catch"](function(n){to(this,t),y.error(e.T,n),so=!1}.bind(this));break;case _n:Fi(u,!1,tt).then(function(r){to(this,t),r.chats.length&&r.result===jn||mo(n,!1),Oo(r.chats,n),so=!1}.bind(this))["catch"](function(n){to(this,t),y.error(e.T,n),so=!1}.bind(this))}}}function Oo(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:_n;n&&n.length&&function(n,t){var r=this;t.update(function(t){var i=this;return to(this,r),t.length?(n.forEach(function(n){to(this,i);for(var r=!1,e=0,o=t.length;e<o;e++)if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),r=!0;break}!r&&n.isSubscribed&&t.push(n)}.bind(this)),t.sort(bo),t):(n.sort(bo),n)}.bind(this))}(n,po(t))}function Eo(n,t){var r=this;t.update(function(t){if(to(this,r),!t.length)return n.isSubscribed&&t.push(n),t;for(var i=!1,e=0,o=t.length;e<o;e++){if(t[e].chatId===n.chatId){n.isSubscribed?t.splice(e,1,n):t.splice(e,1),i=!0;break}}return i&&(t=t.sort(bo)),!i&&n.isSubscribed&&(_t(n.lastUpdate,t[0].lastUpdate)?t.unshift(n):t.push(n)),t}.bind(this))}function To(n){Eo(n,ro),Eo(n,po(n.type))}function ko(){var n=this;y.info(e.T,"get chat updates"),Fi(wo(ro),!0,tt).then(function(t){to(this,n),Oo(t.chats,_n)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this)),Li(Sn,wo(io),!0,tt).then(function(t){to(this,n),Oo(t.chats,Sn)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this)),Li(On,wo(eo),!0,tt).then(function(t){to(this,n),Oo(t.chats,On)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this)),Li(En,wo(oo),!0,tt).then(function(t){to(this,n),Oo(t.chats,En)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))}function Co(n,t,r){var i=this;r.update(function(r){to(this,i);for(var e=0,o=r.length;e<o;e++){var u=r[e];if(u.chatId===n){u.lastSeen=t;break}}return r}.bind(this))}function xo(n,t,r){var i=this,e=(0,Ot.Jt)(r),o=!1;e.find(function(r){return to(this,i),r.chatId===n&&(r.lastAccess!==t&&(o=!0,r.lastAccess=t),!0)}.bind(this)),o&&r.set(e)}function Ao(n,t){xo(n.chatId,t,ro),xo(n.chatId,t,po(n.type))}function Io(n,t,r){var i=this;r.update(function(r){to(this,i);for(var e=0,o=r.length;e<o;e++){var u=r[e];if(u.chatId===n){u.isMuted=t;break}}return r}.bind(this))}function Mo(n,t){Io(n.chatId,t,ro),Io(n.chatId,t,po(n.type))}function Ro(){var n=this;vo.subscribe(function(t){to(this,n),Ne("mql5_chats_type","".concat(t))}.bind(this)),eo.subscribe(function(t){var r;to(this,n),r=yo(t),ze.set(r)}.bind(this)),oo.subscribe(function(t){var r;to(this,n),r=yo(t),Fe.set(r)}.bind(this));var t=(0,Ot.un)([ro,io,eo,oo],function(t){to(this,n);var r=[],i=Ke(t,4),e=i[0],o=i[1],u=i[2],c=i[3];return e.length&&r.push(_n),o.length&&r.push(Sn),u.length&&r.push(On),c.length&&r.push(En),!~r.indexOf((0,Ot.Jt)(vo))&&lo&&vo.set(_n),Ve(),r}.bind(this));t.subscribe(function(t){to(this,n),ho.set(t)}.bind(this))}var Uo=undefined;var Po=(0,Ot.T5)(er),Bo=(0,Ot.T5)([]);function No(){return(0,Ot.Jt)(Po)}Po.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,Uo),!!n&&n.type===Sn}.bind(undefined));var Do=/^\/[a-z]{2}\/.*/;function $o(n){if(n){Do.test(n)&&(n=n.substring(3));var t=document.getElementById("langmenu");if(t){var r=t.querySelectorAll("a");if(r.length)for(var i=0,e=r.length;i<e;i++){var o=r[i].getAttribute("href");if(o){var u=o.substring(0,3);r[i].setAttribute("href",u+n)}}}}}function Go(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return Lo(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Lo(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var i=0,e=function(){};return{s:e,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function Lo(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}var zo,Fo=/^{([a-z]*)}$/i,Wo=new Set,qo=window.location.pathname,Xo=!1;function Ho(n){return n.replace(/(^\/+|\/+$)/g,"").split("/")}function Jo(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:e.A;sr&&y.debug(t,n)}function Qo(){var n,t=window.location.pathname,r=undefined,i=Ho(t),e={},o=Go(Wo);try{for(o.s();!(n=o.n()).done;){var u=n.value,c=Ho(u.path),a=Math.max(i.length,c.length);e={};for(var f=a-1;f>=0;f--){var s=i[f],l=c[f];if(s===undefined||l===undefined)break;if(Fo.test(l)){var h=Fo.exec(l);h&&(e[h[1]]=s),0===f&&(r=u)}else{if(s!==l)break;0===f&&(r=u)}}if(r)break}}catch(v){o.e(v)}finally{o.f()}r&&r.callback(e)}function Vo(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};if(Xo){var i=function(n){var t=window.location,r="";return n===t.pathname?r:r=t.origin?"".concat(t.origin).concat(n):"".concat(t.protocol,"//").concat(t.hostname).concat(n)}(n||qo);if($o(n),i){var o=Object.assign(Object.assign({},r),{key:"".concat(Date.now())});try{if(t)return Jo("Replace state: ".concat(n)),void window.history.replaceState(o,document.title,i);Jo("Push state: ".concat(n)),window.history.pushState(o,document.title,i)}catch(u){try{window.location[t?"replace":"assign"](i)}catch(c){y.error(e.A,c)}y.error(e.A,u)}}}}function Yo(n){Wo.add(n)}function Zo(){Xo&&Vo(qo)}var Ko=(0,Ot.T5)();function nu(n){var t=No();!t||t.chatId!==n&&t.inviteLink!==n?Vo(hr(t),!0):tu(Po)}function tu(n){var t=this,r=(0,Ot.Jt)(n);if(!Le&&!(r.perms&qn.M)||r.type===Sn)return Vo(hr(r),!0),void ru();Ko.set(iu((0,Ot.Jt)(n))),Ft.setLayout({edit:!0}),Vo(hr(r)+"/edit"),zo=n.subscribe(function(n){if(function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),!n)return zo=undefined,void ru();var r=(0,Ot.Jt)(Ko);if(r){var i=iu(n);i.avatarError=r.avatarError,i.errorDescription=r.errorDescription,i.errorCommon=r.errorCommon,i.errorInviteLink=r.errorInviteLink,i.errorName=r.errorName,i.avatarIsPresent=r.avatarIsPresent,i.avatarToUpload=r.avatarToUpload,Ko.set(i)}}.bind(this))}function ru(){var n=No();n&&Ft.window&&Ft.edit&&Vo(hr(n)),Ft.setLayout({edit:!1}),zo&&zo()}function iu(n){return{chatId:n.chatId,type:n.type,isPublic:n.isPublic,isLimited:n.isLimited,isClosed:n.isClosed,name:n.name,description:n.description,links:n.links,inviteLink:n.inviteLink,language:n.language,avatar:n.avatar,avatarToUpload:undefined,avatarIsPresent:n.avatarIsPresent,authorId:n.authorId,countMembers:n.countMembers,isSubscribed:n.isSubscribed,perms:n.perms,errorInviteLink:"",errorCommon:"",errorName:!1,errorDescription:!1,avatarError:undefined,created:n.created,isVerified:n.isVerified}}function eu(n){var t=No();t&&n.chatId===t.chatId&&(Po.set(n),Vo(hr(n),!0))}function ou(){if((0,Ot.Jt)(Ft).window){var n=No();n&&!n.isSubscribed&&go(n.chatId),Ft.setLayout({window:!1}),Po.set(er),Zo()}}function uu(){ou(),qt.set(u("chatNotFound","javascript:void(false);","window.closeAllPopupsChat();","button button_small button_blue"))}function cu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function au(n){var t=this,r=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1],i=arguments.length>2?arguments[2]:undefined,o=arguments.length>3?arguments[3]:undefined;ou(),qi([n]).then(function(n){if(cu(this,t),n&&n.length){var i=n[0],e=dr(i.userName||i.userLogin||""),c='<a href="/'.concat(or,"/users/").concat(i.userLogin||"",'" target="_blank">').concat(e,"</a>"),a='<div class="chat-error-window__text">'.concat(u(o,c),"</div>");r&&(a+='<a href="/'.concat(or,"/users/").concat(i.userLogin||"",'" target="_blank" class="button button_small button_blue">\n                ').concat(u("friendAddToChat"),"\n                </a>")),qt.set(a)}}.bind(this))["catch"](function(n){cu(this,t);var r='<div class="chat-error-window__text">'.concat(u(i),"</div>");qt.set(r),y.error(e.S,n)}.bind(this))}var fu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function su(n){var t,r,i,e,o,u,c,a="",f=0;for(n=function(n){n=n.replace(/\r\n/g,"\n");for(var t="",r=0;r<n.length;r++){var i=n.charCodeAt(r);i<128?t+=String.fromCharCode(i):i>127&&i<2048?(t+=String.fromCharCode(i>>6|192),t+=String.fromCharCode(63&i|128)):(t+=String.fromCharCode(i>>12|224),t+=String.fromCharCode(i>>6&63|128),t+=String.fromCharCode(63&i|128))}return t}(n);f<n.length;)e=(t=n.charCodeAt(f++))>>2,o=(3&t)<<4|(r=n.charCodeAt(f++))>>4,u=(15&r)<<2|(i=n.charCodeAt(f++))>>6,c=63&i,isNaN(r)?u=c=64:isNaN(i)&&(c=64),a=a+fu.charAt(e)+fu.charAt(o)+fu.charAt(u)+fu.charAt(c);return a}function lu(n){if(!n)return"";var t,r,i,e,o,u,c="",a=0;for(n=n.replace(/[^A-Za-z0-9+/=]/g,"");a<n.length;)t=fu.indexOf(n.charAt(a++))<<2|(e=fu.indexOf(n.charAt(a++)))>>4,r=(15&e)<<4|(o=fu.indexOf(n.charAt(a++)))>>2,i=(3&o)<<6|(u=fu.indexOf(n.charAt(a++))),c+=String.fromCharCode(t),64!==o&&(c+=String.fromCharCode(r)),64!==u&&(c+=String.fromCharCode(i));return c=function(n){var t="",r=0,i=0,e=0,o=0;for(;r<n.length;)(i=n.charCodeAt(r))<128?(t+=String.fromCharCode(i),r++):i>191&&i<224?(e=n.charCodeAt(r+1),t+=String.fromCharCode((31&i)<<6|63&e),r+=2):(e=n.charCodeAt(r+1),o=n.charCodeAt(r+2),t+=String.fromCharCode((15&i)<<12|(63&e)<<6|63&o),r+=3);return t}(c),c}var hu,vu={};function du(n){var t=this,r=(new Date).getTime();n.forEach(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t),n.timestamp&&r-n.timestamp<36e5&&(vu[n.userId]||(vu[n.userId]=(0,Ot.T5)(n)))}.bind(this))}function bu(n){return bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},bu(n)}function yu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var pu=0;function mu(n){var t=this,r=/msg[0-9].mql5.(dev|com)/;return n.forEach(function(n){yu(this,t);var i=n.avatar;i&&(n.avatar=i.replace(r,nr)),n.date=new Date(n.date),n.topMessage&&(n.topMessage.date=new Date(n.topMessage.date))}.bind(this)),n}function wu(){Ne("mql5_chats_verify","".concat((new Date).getTime()))}function gu(){De("mql5_chats_tok"),De("mql5_chats"),De("mql5_chats_verify"),De("mql5_chats_connect"),De("mql5_chats_unread"),Ne("mql5_chats_tok","".concat(hu||"",";").concat(pu)),ro.set([]),io.set([]),eo.set([]),oo.set([]),_o(),wu()}function ju(n){var t=this;return new Promise(function(r){if(yu(this,t),!n||!n.length)return _o(),wu(),void r();var i=undefined;try{(n=lu(n))&&(i=JSON.parse(n))}catch(o){y.error(e.T,o)}if(!i||"object"!==bu(i))return _o(),wu(),void r();i.group=i.group||[],i.channel=i.channel||[],i.users=i.users||[],Array.isArray(i.group)||(i.group=[]),Array.isArray(i.channel)||(i.channel=[]),y.info(e.T,"received group: ".concat(i.group.length)),y.info(e.T,"received channel: ".concat(i.channel.length)),i.group=mu(i.group),i.channel=mu(i.channel),i.users=function(n){var t=this,r=/'msg[0-9].mql5.(dev|com)'/;return n.forEach(function(n){yu(this,t);var i=n.userAvatar;i&&(n.userAvatar=i.replace(r,nr))}.bind(this)),n}(i.users),eo.set(i.group),oo.set(i.channel),du(i.users),function(){var n=this,t=[];t.push(Fi(undefined,!1,tt).then(function(t){to(this,n),Oo(t.chats,_n)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))),t.push(Li(Sn,undefined,!1,tt).then(function(t){to(this,n),Oo(t.chats,Sn)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))),t.push(Li(On,wo(eo),!0,tt).then(function(t){to(this,n),Oo(t.chats,On)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))),t.push(Li(En,wo(oo),!0,tt).then(function(t){to(this,n),Oo(t.chats,En)}.bind(this))["catch"](function(t){to(this,n),y.error(e.T,t)}.bind(this))),Promise.allSettled(t).then(function(){to(this,n),lo=!0}.bind(this))}(),function(){var n=this;Be("mql5_chats_verify").then(function(t){var r=this;if(yu(this,n),t&&t.length){var i=parseInt(t,10);isNaN(i)?wu():(new Date).getTime()-i>36e5&&(y.info(e.T,"Verify chats"),Ue(On).then(function(n){yu(this,r),jo(n,On)}.bind(this)),Ue(En).then(function(n){yu(this,r),jo(n,En)}.bind(this)),wu())}else wu()}.bind(this))["catch"](function(t){yu(this,n),y.error(e.S,t)}.bind(this))}(),r()}.bind(this))}function _u(n){var t=this;return new Promise(function(r){if(yu(this,t),!n||!n.length)return vo.set(0),void r();var i=parseInt(n,10);isNaN(i)?vo.set(_n):vo.set(i),r()}.bind(this))}function Su(n){var t=this;return new Promise(function(r){var i=this;if(yu(this,t),!n||!n.length)return gu(),void r();var o=n.split(";");if(2!==o.length)return gu(),void r();var u=o[0],c=parseInt(o[1],10);if(u!==hu||c!==pu)return gu(),void r();Be("mql5_chats_type").then(_u).then(function(){return yu(this,i),Be("mql5_chats").then(ju)}.bind(this)).then(r)["catch"](function(n){yu(this,i),y.error(e.S,n),r()}.bind(this))}.bind(this))}function Ou(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Eu,Tu,ku=[],Cu=(0,Ot.T5)([]),xu=(0,Ot.T5)(j);function Au(n){var t=this;0!==parseInt(n,16)&&(ku.push(n),Cu.update(function(r){Ou(this,t);for(var i=0,e=r.length;i<e;i++)(r[i].linkId&&r[i].linkId===n||r[i].messageId===n)&&(r.splice(i,1),i--,e--);return r}.bind(this)))}function Iu(n){var t=this;ku.push(n),Cu.update(function(r){Ou(this,t);for(var i=0,e=r.length;i<e;i++)if(r[i].messageId===n){r.splice(i,1);break}return r}.bind(this))}function Mu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ru={};function Uu(n,t){var r=this;return new Promise(function(i,o){var u=this;Mu(this,r);var c=function(n){for(var t=(0,Ot.Jt)(Cu),r=null,i=0,e=t.length;i<e;i++)if(t[i].messageId===n){r=t[i];break}return r}(n);c?i({message:c,key:t}):function(n){var t=this;return new Promise(function(r,i){var e=this;if(Ei(this,t),0!==parseInt(n,16))if(n){var o=yt(n);ir.send(V,[o]).then(function(n){var t=n.reader;Ei(this,e),r(ei(t))}.bind(this))["catch"](function(n){Ei(this,e),i(n)}.bind(this))}else i(new Error("Message id is empty"));else i(new Error("Message id is zero"))}.bind(this))}(n).then(function(n){Mu(this,u);var r=n.message;r?i({message:r,key:t}):o(new Error("Message is empty"))}.bind(this))["catch"](function(n){Mu(this,u),y.error(e.S,n),o(n)}.bind(this))}.bind(this))}function Pu(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Bu(n){var t=this;return n.sort(function(n,r){return Pu(this,t),n.date>r.date?1:n.date<r.date?-1:0}.bind(this)),n}function Nu(n){var t=this;return new Promise(function(r){var i=this;Pu(this,t),Cu.update(function(t){var o=this;Pu(this,i);var u=0;return n.forEach(function(n){var r=this;Pu(this,o),(!Eu||_t(n.messageId,Eu)<0)&&function(n){Eu=n}(n.messageId),(!Tu||_t(n.messageId,Tu)>0)&&function(n){Tu=n}(n.messageId),n.recType!==Cn&&n.recType!==An&&(~ku.indexOf(n.messageId)||(n.linkId&&parseInt(n.linkId,16)>0&&Iu(n.linkId),n.recType===Tn&&n.tags&&(n.tags.quote||n.tags.files)?(u++,function(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(i,o){var u=this;if(Mu(this,t),n.recType===Tn&&n.tags)if(Ru[n.messageId])i(Ru[n.messageId]);else{var c=[],a=n.tags;a&&(a.quote&&!r&&c.push(Uu(a.quote.citedId,"quote")),a.files&&a.files.linkedIds.forEach(function(n){Mu(this,u),Au(n),c.push(Uu(n,"file"))}.bind(this)));var f=[];Promise.allSettled(c).then(function(t){var r=this;Mu(this,u);var o={};t.forEach(function(n){var t=this;if(Mu(this,r),"fulfilled"===n.status){var i=n.value,u=i.message;"quote"===i.key?u.recType===Tn?o.quote=u:o.quote||u.recType===Cn||(o.quote=u):u.recType===kn&&function(){Mu(this,t);var n=u.preview&&u.preview.type,r=~u.mime.indexOf("octet-stream");n&&u.fileSize<ft&&!r?(o.media||(o.media=[]),o.media.push(u)):(o.files||(o.files=[]),o.files.push(u))}.bind(this)()}else"rejected"===n.status&&y.warning(e.S,n.reason)}.bind(this)),f.length?Promise.allSettled(f).then(function(){Mu(this,r),n.parsedTags=o,Ru[n.messageId]=n,i(n)}.bind(this)):(n.parsedTags=o,Ru[n.messageId]=n,i(n))}.bind(this))}else o(new Error("Message does not contain tags"))}.bind(this))}(n).then(function(n){Pu(this,r),function(n){var t=this;Cu.update(function(r){return Pu(this,t),~ku.indexOf(n.messageId)||n.recType===An?r:(n.linkId&&parseInt(n.linkId,16)>0&&Iu(n.linkId),r.push(n),Bu(r))}.bind(this))}(n)}.bind(this))["catch"](function(n){Pu(this,r),y.error(e.T,n)}.bind(this))):(u++,t.push(n))))}.bind(this)),r(u),Bu(t)}.bind(this))}.bind(this))}function Du(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var $u=(0,Ot.T5)(!1),Gu=(0,Ot.T5)(!1);function Lu(n){var t=No();t&&n.chatId===t.chatId&&(Ao(t,n.lastAccess),Nu(n.messages))}function zu(n){var t=this,r=No();if(r&&n.chatId===r.chatId){Ao(r,n.lastAccess),Gu.set(!1);var i=n.result===jn,e=n.messages;Nu(e).then(function(n){Du(this,t),n||Wu()}.bind(this)),i&&e.length||$u.set(!0)}}function Fu(){var n=this,t=No();t&&t.chatId&&Ft.window&&(y.info(e.S,"get message updates"),Oi(t.chatId,Tu,!0).then(Lu)["catch"](function(t){Du(this,n),y.error(e.S,t)}.bind(this)))}function Wu(){(0,Ot.Jt)($u)||(0,Ot.Jt)(Gu)||function(n){var t=this,r=No();r&&r.chatId&&(Gu.set(!0),Oi(r.chatId,n).then(zu)["catch"](function(n){Du(this,t),y.error(e.S,n)}.bind(this)))}(Eu)}function qu(){Cu.set([]),Eu=undefined,Tu=undefined,$u.set(!1),Gu.set(!1);var n=No();n&&xu.set(n.lastAccess)}function Xu(){qu()}var Hu,Ju,Qu,Vu=null,Yu=document.createElement("span"),Zu={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(var Ku in Zu)Object.prototype.hasOwnProperty.call(Zu,Ku)&&Yu.style[Ku]!==undefined&&(Vu=Zu[Ku]);var nc,tc,rc,ic,ec,oc,uc,cc,ac,fc,sc,lc,hc,vc,dc,bc,yc,pc,mc,wc,gc=!1,jc={},_c=null,Sc={},Oc=0,Ec=null,Tc=null,kc=null,Cc=null,xc=null,Ac=null,Ic=null,Mc=null,Rc=!1,Uc=Vu;function Pc(){jc.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,jc.width=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth}function Bc(){Pc(),Hu=document.createElement("div"),document.body.appendChild(Hu),Hu.className="light-box",Ir&&Hu.classList.add("light-box_mobile");var n=document.createElement("div");n.className="light-box__shadow",Hu.appendChild(n),n.addEventListener("click",Xc),n.addEventListener("touchstart",Xc),(Ju=document.createElement("div")).className="light-box__content",Hu.appendChild(Ju),(Ic=document.createElement("div")).className="light-box__attachment-area",Ju.appendChild(Ic),(Qu=document.createElement("div")).className="light-box__footer",Ju.appendChild(Qu);var t=document.createElement("div");t.className="light-box__close",t.addEventListener("click",Xc),t.addEventListener("touchstart",Xc),t.innerHTML='<i class="icons-lightbox icons-lightbox_close"></i>',t.setAttribute("title",mr("lightBox.close")),Qu.appendChild(t),(Mc=document.createElement("div")).className="light-box__show-full",Qu.appendChild(Mc),Mc.addEventListener("click",Nc),Mc.addEventListener("touchstart",Nc),Mc.innerHTML='<i class="icons-lightbox icons-lightbox_uncollapse"></i>',Mc.setAttribute("title",mr("lightBox.showOriginal")),(Tc=document.createElement("a")).className="light-box__save",Tc.setAttribute("target","_blank"),Tc.innerHTML='<i class="icons-lightbox icons-lightbox_save"></i>',Tc.setAttribute("title",mr("lightBox.save")),Qu.appendChild(Tc),Ac&&((tc=document.createElement("div")).className="light-box__prev",tc.innerHTML='<i class="icons-lightbox icons-lightbox_prev"></i>',tc.addEventListener("click",qc),tc.addEventListener("touchstart",qc),tc.setAttribute("title",mr("lightBox.previous")),Ju.appendChild(tc),(nc=document.createElement("div")).className="light-box__next",nc.innerHTML='<i class="icons-lightbox icons-lightbox_next"></i>',nc.addEventListener("click",Wc),nc.addEventListener("touchstart",Wc),nc.setAttribute("title",mr("lightBox.next")),Ju.appendChild(nc)),rc=window.pageYOffset||document.documentElement.scrollTop,document.body.classList.add("light-box-showed"),document.body.style.top="-"+rc+"px",Ju.style.transition="none",Ju.style.width="300px",Ju.style.height="300px",Ju.style.marginTop="-150px",Ju.style.marginLeft="-150px",Ju.style.transition="all 0.3s ease-out",window.addEventListener("resize",Fc),document.addEventListener("keydown",Hc)}function Nc(n){function t(){Ac&&(Dc(tc,0===Cc),Dc(nc,Cc===Oc-1)),Mc.setAttribute("title",mr("lightBox.showOriginal")),Hu.classList.remove("light-box_full-size"),Mc.firstChild.className="icons-lightbox icons-lightbox_uncollapse",document.addEventListener&&document.removeEventListener(Uc,t)}var r,i;((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),gc)?(Fc(),document.addEventListener?document.addEventListener(Uc,t):t()):(Hu.classList.add("light-box_full-size"),Mc.firstChild.className="icons-lightbox icons-lightbox_collapse",Mc.setAttribute("title",mr("lightBox.collapse")),Ac&&(Dc(tc,!0),Dc(nc,!0)),r=jc.width<=Sc.width+40?jc.width-40:Sc.width+20,i=jc.height<=Sc.height+80?jc.height-80:Sc.height,Ju.style.width=r+"px",Ju.style.marginLeft="-"+r/2+"px",Ju.style.height=i+"px",Ju.style.marginTop="-"+(i/2+20)+"px");gc=!gc}function Dc(n,t){n&&(t?n.classList.add("light-box__disabled"):n.classList.remove("light-box__disabled"))}function $c(){kc.addEventListener("error",$c),Ic.classList.add("light-box__on-error"),Ic.innerHTML="",(Ec=document.createElement("div")).className="light-box__error-message",Ec.innerHTML=mr("lightBox.errorLoading")+"<br>",Ic.appendChild(Ec);var n=mr("lightBox.linkToImg"),t=document.createElement("a");t.setAttribute("href",_c),t.setAttribute("title",n),t.setAttribute("target","_blank"),t.innerText=n,Ec.appendChild(t)}function Gc(){if(kc){document.addEventListener&&Ju.removeEventListener(Uc,zc),Ec&&(Ec.parentNode&&Ec.parentNode.removeChild(Ec),Ec=null,Ic.classList.remove("light-box__on-error"));var n=Sc.width,t=Sc.height;Sc.width=kc.offsetWidth,Sc.height=kc.offsetHeight,Dc(Mc,!(Sc.width>jc.width||Sc.height>jc.height)),xc&&(xc.removeEventListener("load",Gc),xc.removeEventListener("error",$c),xc.parentNode&&xc.parentNode.removeChild(xc),xc=null),document.addEventListener?(n!==Sc.width&&t!==Sc.height?Ju.addEventListener(Uc,zc):zc(),Fc()):(Fc(),zc())}}function Lc(n,t){_c=n,xc=kc,Dc(Mc,!0),xc&&(xc.removeEventListener("load",Gc),xc.removeEventListener("error",$c),xc.parentNode===document.body&&(xc.parentNode.removeChild(xc),xc=null),kc=null),(kc=new Image).addEventListener("load",Gc),kc.addEventListener("error",$c),t&&kc.setAttribute("srcset",t),kc.setAttribute("src",n+(Ar?"?"+Math.random():"")),kc.classList.add("light-box__attachment-loading"),document.body.appendChild(kc),Ac&&(Dc(tc,0===Cc),Dc(nc,Cc===Oc-1)),Tc.setAttribute("href",n)}function zc(){Ic.innerHTML="",kc.classList.remove("light-box__attachment-loading"),Ic.appendChild(kc),document.addEventListener&&Ju.removeEventListener(Uc,zc)}function Fc(){Pc();var n,t=Sc.width,r=Sc.height,i=t>r;t&&r&&(i?(n=t/r,t>jc.width-40&&(r=(t=jc.width-40)/n),r>jc.height-80&&(n=r/t,t=(r=jc.height-80)/n)):(n=r/t,r>jc.height-80&&(t=(r=jc.height-80)/n),t>jc.width-40&&(n=t/r,r=(t=jc.width-40)/n)),t<200&&(t=200,r=i?t/n:t*n),Ju.style.width=t+"px",Ju.style.marginLeft="-"+t/2+"px",Ju.style.height=r+"px",Ju.style.marginTop="-"+(r/2+20)+"px")}function Wc(n){Ac&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),Cc++,Lc(Ac[Cc]))}function qc(n){Ac&&((n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),Cc--,Lc(Ac[Cc]))}function Xc(n){Rc=!1,(n=n||window.event)&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.cancelBubble=!0,n.stopPropagation&&n.stopPropagation()),document.body.removeChild(Hu),kc&&(kc.parentNode.removeChild(kc),kc.removeEventListener("load",Gc)),document.body.classList.remove("light-box-showed"),window.scrollTo(0,rc),window.removeEventListener("resize",Fc),document.removeEventListener("keydown",Hc),kc=null,document.body.style.top=""}function Hc(n){var t=(n=n||window.event).keyCode||n.which;27===t&&Xc(n),39===t&&Cc!==Oc-1&&Wc(n),37===t&&0!==Cc&&qc(n)}function Jc(n){Sc=n}function Qc(n){return new Promise(function(t){Fc(),n.classList.remove("light-box__attachment-loading"),Ic.appendChild(n),document.addEventListener&&Ju.removeEventListener(Uc,zc),t()})}function Vc(){Dc(Mc,!0),Dc(Tc,!0)}function Yc(){return Rc}function Zc(n){var t=(n=Math.floor(n))%60;return parseInt(n/60,10)+":"+(n<10?"0"+t:t)}function Kc(){var n=ec.currentTime/ec.duration*100;pc.value=n,mc.style.width=n+"%"}function na(){var n=100*ec.volume;bc.value=n,yc.style.width=n+"%",0!==parseInt(n,10)?ac.innerHTML='<i class="icons-player icons-player_sound"></i>':ac.innerHTML='<i class="icons-player icons-player_mute"></i>'}function ta(){var n=document.createElement("div");n.className="light-box__time-line",n.innerHTML='<div class="light-box__time-line__bg"></div>',(wc=document.createElement("div")).className="light-box__time-line__buffered",n.appendChild(wc),(mc=document.createElement("div")).className="light-box__time-line__value",n.appendChild(mc),(pc=document.createElement("input")).className="light-box__time-line__range",pc.setAttribute("type","range"),pc.setAttribute("min",0),pc.setAttribute("max",100),pc.setAttribute("value",0);var t=!1;return pc.addEventListener("mousemove",function(n){n.stopPropagation(),t&&(ec.currentTime=ec.duration*(pc.value/100))}),pc.addEventListener("mousedown",function(n){n.stopPropagation(),t=!0}),pc.addEventListener("mouseup",function(n){n.stopPropagation(),t=!1}),pc.addEventListener("change",function(){ec.currentTime=ec.duration*(pc.value/100)}),n.appendChild(pc),function(){var n=ec.duration;if(n>0)for(var t=0;t<ec.buffered.length;t++)if(ec.buffered.start(ec.buffered.length-1-t)<=ec.currentTime){wc.style.width=ec.buffered.end(ec.buffered.length-1-t)/n*100+"%";break}}(),n}function ra(){document.fullscreenElement||(dc=!0,ia())}function ia(n){n&&n.stopPropagation(),dc?(vc.innerHTML='<i class="icons-player icons-player_expand"></i>',uc.removeEventListener(lc[3],ra),document[lc[1]]()):(uc[lc[0]](),vc.innerHTML='<i class="icons-player icons-player_collapsed"></i>',uc.addEventListener(lc[3],ra)),dc=!dc}function ea(n){n&&n.stopPropagation(),ec.paused||ec.ended?ec.play():ec.pause()}function oa(){var n;(oc=document.createElement("div")).className="light-box__controls light-box__controls_active",(cc=document.createElement("div")).className="light-box__play",cc.innerHTML='<i class="icons-player icons-player_play"></i>',cc.addEventListener("click",ea),oc.appendChild(cc),(ac=document.createElement("div")).className="light-box__sound",ac.innerHTML='<i class="icons-player icons-player_sound"></i>',ac.addEventListener("click",function(n){n.stopPropagation(),ec.muted?(ec.muted=!1,ec.volume=1):(ec.muted=!0,ec.volume=0)}),oc.appendChild(ac),oc.appendChild(((n=document.createElement("div")).className="light-box__sound-line",n.innerHTML='<div class="light-box__sound-line__bg"></div>',(yc=document.createElement("div")).className="light-box__sound-line__value",n.appendChild(yc),(bc=document.createElement("input")).className="light-box__time-line__range",bc.setAttribute("type","range"),bc.setAttribute("min",0),bc.setAttribute("max",100),bc.setAttribute("value",0),bc.addEventListener("mousemove",function(n){n.stopPropagation(),ec.volume=bc.value/100}),bc.addEventListener("change",function(){ec.volume=bc.value/100}),na(),n.appendChild(bc),n));var t=document.createElement("a");t.className="light-box__download",t.innerHTML='<i class="icons-player icons-player_download"></i>',t.setAttribute("href",ec.currentSrc),t.setAttribute("target","_blank"),oc.appendChild(t),lc?((vc=document.createElement("div")).className="light-box__full-screen",vc.innerHTML='<i class="icons-player icons-player_expand"></i>',vc.addEventListener("click",ia),oc.appendChild(vc)):oc.classList.add("light-box__controls_no-full-screen");var r=document.createElement("div");return r.className="light-box__time",(fc=document.createElement("span")).className="light-box__time__current",fc.innerText="0:00",r.appendChild(fc),r.insertAdjacentHTML("beforeend",' / <span class="light-box__time__full">'.concat(Zc(ec.duration),"</span>")),oc.appendChild(r),oc.appendChild(ta()),oc}function ua(){hc.innerHTML='<i class="icons-player icons-player_stop-big"></i>',hc.classList.remove("light-box__disabled")}function ca(){var n=this;ec.removeEventListener("canplay",ca);var t=ec.videoWidth;t<330&&(t=330),Jc({width:t,height:ec.videoHeight}),ic&&ic.parentNode&&ic.parentNode.removeChild(ic),(uc=document.createElement("div")).className="light-box__attachment-area",uc.appendChild(oa()),uc.appendChild(ec),uc.appendChild(((hc=document.createElement("div")).className="light-box__status light-box__status_animated light-box__disabled",hc.innerHTML='<i class="icons-player icons-player_play-big"></i>',hc.addEventListener("animationend",function(){hc.classList.add("light-box__disabled")}),hc)),ec.addEventListener("play",function(){hc.innerHTML='<i class="icons-player icons-player_play-big"></i>',hc.classList.remove("light-box__disabled"),cc.innerHTML='<i class="icons-player icons-player_stop"></i>',oc.classList.remove("light-box__controls_active"),uc.classList.add("light-box__hide-cursor")}),ec.addEventListener("pause",function(){ua(),cc.innerHTML='<i class="icons-player icons-player_play"></i>',oc.classList.add("light-box__controls_active"),uc.classList.remove("light-box__hide-cursor"),Kc()}),ec.addEventListener("ended",function(){ua(),cc.innerHTML='<i class="icons-player icons-player_play"></i>',oc.classList.add("light-box__controls_active"),uc.classList.remove("light-box__hide-cursor"),Kc()}),ec.addEventListener("progress",function(){Kc()}),ec.addEventListener("timeupdate",function(){fc.innerText=Zc(ec.currentTime),Kc()}),ec.addEventListener("click",ea),ec.addEventListener("mousemove",function(){oc.classList.add("light-box__controls_active"),uc.classList.remove("light-box__hide-cursor"),clearTimeout(sc),sc=setTimeout(function(){ec.paused||ec.ended||(oc.classList.remove("light-box__controls_active"),uc.classList.add("light-box__hide-cursor"))},1e3)}),ec.addEventListener("volumechange",na),Qc(uc).then(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),ec.classList.remove("light-box__attachment-loading")}.bind(this))}function aa(n){var t=n.src,r=n.type,i=n.preview;lc=function(){for(var n,t=document.createElement("span"),r=[["requestFullScreen","cancelFullScreen","fullScreen","fullscreenchange"],["webkitRequestFullScreen","webkitCancelFullScreen","webkitIsFullScreen","webkitfullscreenchange"],["mozRequestFullScreen","mozCancelFullScreen","mozfullScreen","mozfullscreenchange"]],i=0,e=r.length;i<e;i++)if(t[r[i][0]]){n=r[i];break}return n}(),Bc(),function(n){var t=n.src,r=void 0===t?null:t;r&&((ic=document.createElement("img")).className="light-box__attachment-loading",document.body.appendChild(ic),ic.addEventListener("load",function(){Jc({width:ic.offsetWidth,height:ic.offsetHeight}),Qc(ic)}),ic.setAttribute("src",r))}({src:i}),function(n){var t=n.src,r=void 0===t?null:t,i=n.preview,e=void 0===i?null:i,o=n.type;if(r){(ec=document.createElement("video")).className="light-box__attachment-loading",e&&ec.setAttribute("poster",e),document.body.appendChild(ec);var u=document.createElement("source");u.setAttribute("type",o+';codecs="avc1.42E01E, mp4a.40.2"'),u.setAttribute("src",r),ec.appendChild(u);var c=document.createElement("div");c.className="light-box__error-message",c.innerHTML=mr("lightBox.notSupport")+'<a href="'.concat(r,'" target="_blank">').concat(mr("lightBox.linkToVideo"),"</a>"),ec.appendChild(c),ec.addEventListener("canplay",ca),u.addEventListener("error",function(){Jc({width:300,height:300}),c.innerHTML=mr("lightBox.errorLoading")+'<br><a href="'.concat(r,'" target="_blank">').concat(mr("lightBox.linkToVideo"),"</a>"),Qc(c)})}}({src:t,preview:i,type:r}),Vc()}function fa(){return Yc()}function sa(n,t){var r,i,e,o,u=0;function c(){u=Date.now(),i=undefined,r=n.apply(o,e),i||(e=undefined,o=undefined)}return function(){o=this;for(var a=arguments.length,f=new Array(a),s=0;s<a;s++)f[s]=arguments[s];e=f;var l=Date.now(),h=t-(l-u);return h<=0||h>t?(i&&(clearTimeout(i),i=undefined),u=l,r=n.apply(o,e)):i||(i=setTimeout(c,h)),r}}var la=sa(function(){for(var n={group:[],channel:[],users:[]},t=(0,Ot.Jt)(eo),r=(0,Ot.Jt)(oo),i=0,e=0,o=t.length;e<o&&!(i>500);e++)n.group.push(t[e]),i++;for(var u=0,c=r.length;u<c&&!(i>st);u++)n.channel.push(r[u]),i++;n.users=function(){var n=0,t=[];for(var r in vu)if(Object.prototype.hasOwnProperty.call(vu,r)){if(n>100)break;t.push((0,Ot.Jt)(vu[r])),n++}return t}(),Ne("mql5_chats",su(JSON.stringify(n)))},1e3);function ha(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function va(){Ft.setLayout({create:!1}),ru(),qt.set(undefined)}function da(n){var t=this;se(n.chatId).then(function(n){ha(this,t),n&&(eu(n),To(n))}.bind(this))["catch"](function(n){ha(this,t),y.error(e.S,n,"Main")}.bind(this))}function ba(n){var t,r;t=n.chatId,r=n.lastSeen,Co(t,r,ro),Co(t,r,io),Co(t,r,eo),Co(t,r,oo)}function ya(n){var t,r;n.isDeleted&&go(n.chatId),n.permission&qn.I||(t=n.chatId,(r=No())&&t===r.chatId&&ru()),n.isDeleted?function(n){go(n.chatId);var t=No();t&&t.chatId===n.chatId&&ou()}(n):da(n)}function pa(n){var t=this;return new Promise(function(r,i){var o=this;ha(this,t),n?(!function(n,t){if(n)y.error(e.S,n);else{var r=No();if(r&&t&&r.chatId===t.chatId){var i=t.message;i&&(i.recType===Cn?i.linkId&&Iu(i.linkId):Nu([i]))}}}(undefined,n),se(n.chatId).then(function(t){var i=this;if(ha(this,o),t&&(r(t),eu(t),To(t),!Yt)){var u=No();u&&u.chatId===n.chatId&&t.lastAccess!==t.lastUpdate&&(xu.set(t.lastAccess),_i(t.chatId,t.lastUpdate).then(function(){ha(this,i),Ao(u,t.lastUpdate)}.bind(this))["catch"](function(n){ha(this,i),y.error(e.S,n,"Main")}.bind(this)))}}.bind(this))["catch"](function(n){ha(this,o),y.error(e.S,n,"Main")}.bind(this))):i(new Error("Data is undefined"))}.bind(this))}function ma(){var n=this;Ze(),function(n,t){var r=this;return new Promise(function(i){var o=this;yu(this,r),hu=n,pu=t,Be("mql5_chats_tok").then(Su).then(i)["catch"](function(n){yu(this,o),y.error(e.S,n),i()}.bind(this))}.bind(this))}(Qt,tr).then(function(){ha(this,n),Ro(),eo.subscribe(la),oo.subscribe(la)}.bind(this)),window.HotKeys.Add(27,function(){Yc()||fa()||(va(),ou(),Zt||Ft.setLayout({search:!1}))})}function wa(){return m[or]}function ga(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ja(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;"number"==typeof n&&(n=gt(n)),Hi({type:Sn,isPublic:!1,name:"",description:"",links:"",inviteLink:"",language:0,userId:n}).then(function(n){var i=this;ga(this,t),se(n).then(function(n){ga(this,i),n&&(parseInt(n.lastAccess,16)||window.fz&&window.fz("track","MQL5+Chat+New"),eu(n),To(n),Oa(n),r&&r())}.bind(this))["catch"](function(t){ga(this,i),y.error(e.USER,t,"Open"),go(n),uu()}.bind(this))}.bind(this))["catch"](function(r){var i=this;ga(this,t);var o=parseInt(r.name,10);if(o===pn){var c=wt(n)-1;ee(nt,1,gt(c)).then(function(t){ga(this,i),!r&&t&&t.length&&t[0].userId===n?au(n,!1,"friendWaitingPair","friendWaitingPairWithName"):au(n,!0,"errorUserNonChatablePrivacyFriends","privacyOnlyFriendsWithName")}.bind(this))["catch"](function(n){ga(this,i),y.error(e.USER,n,"Open")}.bind(this))}else o===wn?qt.set(u("errorUserBannedAnotherUser")):(qt.set(r.message),y.error(e.USER,r,"Open"))}.bind(this))}function _a(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(i,o){var u=this;(ga(this,t),n)?/^[0-9a-fA-F]{16}$/.test(n)?Sa(n,r).then(i)["catch"](o):function(n){var t=this,r=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];return new Promise(function(i,e){var o=this;ve(this,t),n?ir.send(x,[{String16:n},{Uint8:r?1:0}]).then(function(n){var t=n.reader;ve(this,o);var r=ri(t,!0);r?i(r):e(new Error("Parse error"))}.bind(this))["catch"](function(n){ve(this,o),e(n)}.bind(this)):e(new Error("Chat invite link is empty"))}.bind(this))}(decodeURI(n)).then(function(n){ga(this,u),Oa(n,r),i(n)}.bind(this))["catch"](function(n){ga(this,u),uu(),y.error(e.USER,n,"Open"),o(n)}.bind(this)):o(new Error("id or link name is empty"))}.bind(this))}function Sa(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined&&arguments[1];return new Promise(function(i,o){var u=this;ga(this,t);var c=function(n){for(var t=(0,Ot.Jt)(ro),r=undefined,i=0,e=t.length;i<e;i++){var o=t[i];if(o.chatId===n){r=o;break}}return r}(n);if(c)return Oa(c,r),void i(c);se(n).then(function(n){ga(this,u),n&&(n.isSubscribed&&(eu(n),To(n)),Oa(n,r),i(n))}.bind(this))["catch"](function(t){ga(this,u),y.error(e.USER,t,"Open"),go(n),uu(),o(t)}.bind(this))}.bind(this))}function Oa(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(n){var r=No();Ft.window&&r&&r.chatId===n.chatId||(va(),function(n){arguments.length>1&&arguments[1]!==undefined&&arguments[1]||Vo(hr(n)),Ft.setLayout({window:!0}),Po.set(n)}(n,t),Zt||t||$o(hr(n)))}}function Ea(n){return Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ea(n)}function Ta(n){return function(n){if(Array.isArray(n))return ka(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return ka(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ka(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Ca(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,xa(i.key),i)}}function xa(n){var t=function(n,t){if("object"!=Ea(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Ea(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Ea(t)?t:t+""}var Aa=function(){function n(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.dataView=t,this.pos=r,this.posEnd=i!==undefined?r+i:t.byteLength}return function(n,t,r){return t&&Ca(n.prototype,t),r&&Ca(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(n,[{key:"Size",value:function(){return this.posEnd-this.pos}},{key:"advance",value:function(n){if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");this.pos+=n}},{key:"isEnded",value:function(){return this.pos>=this.posEnd}},{key:"getInt32",value:function(){if(this.pos+4>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getInt32(this.pos,!0);return this.pos+=4,n}},{key:"getUint32",value:function(){if(this.pos+4>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getUint32(this.pos,!0);return this.pos+=4,n}},{key:"getInt16",value:function(){if(this.pos+2>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getInt16(this.pos,!0);return this.pos+=2,n}},{key:"getUint16",value:function(){if(this.pos+2>this.posEnd)throw new Error("Buffer overflow");var n=this.dataView.getUint16(this.pos,!0);return this.pos+=2,n}},{key:"getInt8",value:function(){if(this.pos>=this.posEnd)throw new Error("Buffer overflow");return this.dataView.getInt8(this.pos++)}},{key:"getUint8",value:function(){if(this.pos>=this.posEnd)throw new Error("Buffer overflow");return this.dataView.getUint8(this.pos++)}},{key:"getString8",value:function(){var n=this.getUint8();return vt(this.getBinary(n))}},{key:"getString16",value:function(){var n=this.getUint16();return vt(this.getBinary(n))}},{key:"getString32",value:function(){var n=this.getUint32();return vt(this.getBinary(n))}},{key:"getInt64NumberLikeString",value:function(){var n=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0],t=arguments.length>1&&arguments[1]!==undefined&&arguments[1];if(this.pos+8>this.posEnd)throw new Error("Buffer overflow");var r=new Uint8Array(this.dataView.buffer,this.pos,8);n&&(this.pos+=8);for(var i=t&&r.length>0&&r[0]>=128,e=[],o=r.length-1;o>=0;o--){var u=r[o];i&&(u=256-(o===r.length-1?0:1)-u);for(var c=0,a=e.length;u>0||c<a;c++)u+=256*(e[c]||0),e[c]=u%10,u=(u-e[c])/10}return(i?"-":"")+e.reverse().join("")}},{key:"getBinary",value:function(n){if(0===n)return"";if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");var t=new Uint8Array(this.dataView.buffer,this.pos,n),r=String.fromCharCode.apply(null,Ta(t));return this.pos+=n,r}},{key:"getBlob",value:function(n,t){if(0===n)return null;if(this.pos+n>this.posEnd)throw new Error("Buffer overflow");var r=[new Uint8Array(this.dataView.buffer,this.pos,n)],i=new Blob(r,{type:t});return this.pos+=n,i}},{key:"getReader32",value:function(){var t=this.getUint32();if(t>this.posEnd-this.pos)throw new Error("Buffer overflow");var r=new n(this.dataView,this.pos,t);return this.pos+=t,r}},{key:"getReader16",value:function(){var t=this.getUint16();if(t>this.posEnd-this.pos)throw new Error("Buffer overflow");var r=new n(this.dataView,this.pos,t);return this.pos+=t,r}}])}();function Ia(n,t,r){if("string"==typeof r)for(var i=0;i<r.length;i++)n.setUint8(t++,r.charCodeAt(i));else if(Array.isArray(r))for(var e=0;e<r.length;++e)t=Ia(n,t,r[e]);else if("String"in r&&r.String!==undefined||"String8"in r&&r.String8!==undefined||"String16"in r&&r.String16!==undefined||"String32"in r&&r.String32!==undefined){var o="";"String8"in r&&r.String8!==undefined?(o=jt(r.String8),n.setUint8(t++,o.length)):"String16"in r&&r.String16!==undefined?(o=jt(r.String16),n.setUint16(t,o.length,!0),t+=2):"String32"in r&&r.String32!==undefined?(o=jt(r.String32),n.setUint32(t,o.length,!0),t+=4):r.String!==undefined&&(o=jt(r.String));for(var u=0;u<o.length;u++)n.setUint8(t++,o.charCodeAt(u))}else"Uint8"in r&&r.Uint8!==undefined?n.setUint8(t++,r.Uint8):"Int8"in r&&r.Int8!==undefined?n.setInt8(t++,r.Int8):"Uint16"in r&&r.Uint16!==undefined?(n.setUint16(t,r.Uint16,!0),t+=2):"Int16"in r&&r.Int16!==undefined?(n.setInt16(t,r.Int16,!0),t+=2):"Uint32"in r&&r.Uint32!==undefined?(n.setUint32(t,r.Uint32,!0),t+=4):"Int32"in r&&r.Int32!==undefined?(n.setInt32(t,r.Int32,!0),t+=4):"Uint64"in r&&r.Uint64!==undefined&&(n.setBigUint64(t,r.Uint64,!0),t+=8);return t}function Ma(n){return Ma="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ma(n)}function Ra(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ua(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Pa(i.key),i)}}function Pa(n){var t=function(n,t){if("object"!=Ma(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Ma(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Ma(t)?t:t+""}var Ba=2e3,Na=12e4,Da=function(){return function(n,t,r){return t&&Ua(n.prototype,t),r&&Ua(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(function n(t,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.counterId=0,this.debug=!1,this.connecting=!1,this.requests=new Map,this.listeners=new Map,this.url=t,this.debug=r,this.connecting=!1,this.reconnectTimeout=Ba,this.resendTimeout=Ba,this.unsuccessfulConnections=0,this.init=this.init.bind(this),this.handleOpen=this.handleOpen.bind(this),this.handleError=this.handleError.bind(this),this.handleMessage=this.handleMessage.bind(this),this.handleClose=this.handleClose.bind(this),this.handleBeforeunload=this.handleBeforeunload.bind(this)},[{key:"getReconnectInterval",value:function(){var n=this.reconnectTimeout;return this.reconnectTimeout*=(3+Math.random())/2,Math.min(n,Na)}},{key:"getResendInterval",value:function(){var n=this.resendTimeout;return this.resendTimeout*=(3+Math.random())/2,Math.min(n,Na)}},{key:"close",value:function(){window.removeEventListener("beforeunload",this.handleBeforeunload),this.socket&&(this.socket.removeEventListener("open",this.handleOpen),this.socket.removeEventListener("error",this.handleError),this.socket.removeEventListener("message",this.handleMessage),this.socket.removeEventListener("close",this.handleClose),this.socket.close())}},{key:"reconnect",value:function(){var n=this;y.info(e._,"reconnect"),this.unsuccessfulConnections++,this.unsuccessfulConnections>10||setTimeout(function(){Ra(this,n),this.close(),this.connect()}.bind(this),this.getReconnectInterval())}},{key:"reset",value:function(){this.requests=new Map}},{key:"resetTimeout",value:function(){this.reconnectTimeout=Ba,this.unsuccessfulConnections=0}},{key:"handleOpen",value:function(){this.connecting=!1,y.info(e._,"connected"),this.resendTimeout=Ba,this.onOpen&&this.onOpen()}},{key:"handleError",value:function(n){var t="Error";t=this.socket&&this.socket.readyState===this.socket.CLOSED?"WebSocket connection to '".concat(this.url,"' failed"):a(n),y.error(e._,t),this.onError&&this.onError(new Error(t)),this.connecting=!1,this.socket.close()}},{key:"failResultToText",value:function(n){switch(n){case rn:return"Generic fail";case en:return"Access denied";case on:return"Invalid parameters";case un:return"Invalid request";case cn:return"Invalid version (of protocol or something)";case an:return"Failed call, we need disconnect";case fn:return"Out of memory situation";case sn:return"Sql query error";case ln:return"User banned to interact with other user";case hn:return"Network problems";case vn:return"File/data too big";case dn:return"Data didn't exist";case bn:return"Duplicate";case yn:return"User banned temporary for too many messages or assigning";case pn:return"Messaging disallowed with this user (due only-friends checkbox)";case mn:return"Something interrupted request processing";case wn:return"Cannot send message. This user has blocked you.";default:return"[UNKNOWN_RESULT]"}}},{key:"commandDebug",value:function(n,t,r,i,o){if(this.debug)try{var u=window.BigInt?dt(r):mt(r),c="code: ".concat("".concat(t).padStart(3," "),",   id: ").concat("".concat(u).padStart(4," "),",");c+="   length: ".concat("".concat(i).padStart(7," ")," byte").concat(o?",   result: ".concat(o):""," "),this.outputDebug(c,n)}catch(a){y.error(e.S,a)}}},{key:"outputDebug",value:function(n,t){this.debug&&y.debug(t,n)}},{key:"off",value:function(n,t){var r=this.listeners.get(n);r&&r.has(t)&&r["delete"](t)}},{key:"on",value:function(n,t){var r=this.listeners.get(n);r||(r=new Set,this.listeners.set(n,r)),r.add(t)}},{key:"setRequest",value:function(n,t){this.requests.set(n,t)}},{key:"deleteRequest",value:function(n){var t=this.requests.get(n);t&&t.counter&&clearTimeout(t.counter),this.requests["delete"](n)}},{key:"trigger",value:function(n,t){var r=this,i=this.listeners.get(n);i&&i.forEach(function(n){Ra(this,r),n(t)}.bind(this))}},{key:"handleMessage",value:function(n){if(this.messagePartial){var t=new Uint8Array(n.data),r=new Uint8Array(this.messagePartial.byteLength+t.byteLength);r.set(this.messagePartial,0),r.set(t,this.messagePartial.byteLength),this.messagePartial=r}else this.messagePartial=new Uint8Array(n.data);var i=new DataView(this.messagePartial.buffer);if(!(i.byteLength<13)){var o=i.getUint8(0),u=new Aa(i,1,8).getBinary(8),c=i.getUint32(9,!0);if(!(i.byteLength<c+13)){var a,f=new Aa(i,13),s=this.messagePartial.buffer.byteLength;switch(this.messagePartial.byteLength>c+13?this.messagePartial=this.messagePartial.slice(c+13):this.messagePartial=undefined,o){case O:case U:case P:case B:case N:a=undefined;break;default:a=f.getInt8()}this.commandDebug(e.C,o,u,s,a);var l=this.requests.get(u);if(l&&a!==undefined)if(this.deleteRequest(u),a>0)l.resolve({result:a,reader:f,id:u});else{y.error(e._,"code ".concat(o,": ").concat(a," ").concat(this.failResultToText(a)));var h=new Error("An error occurred. Code: ".concat(a));a===en?h=new Error("Access denied"):a===ln?h=new Error("Your account is banned"):a===yn&&(h=new Error("Your account is temporarily banned")),h.name="".concat(a),h.cause=a,l.reject(h)}this.trigger(o,f)}}}},{key:"handleClose",value:function(n){n.wasClean?y.warning(e._,"connection was closed by the server-side"):y.warning(e._,"connection was suddenly closed"),this.reconnect()}},{key:"handleBeforeunload",value:function(){Ne("mql5_chats_connect","".concat((new Date).getTime())),this.close()}},{key:"sendData",value:function(n,t,r){var i=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;if(this.socket.readyState!==this.socket.OPEN)return setTimeout(function(){Ra(this,i),this.sendData(n,t,r,o)}.bind(this),this.getResendInterval()),void y.warning(e._,"WebSocket not open, try resend after timeout");var u=13+(t?Ci(t):0),c=new ArrayBuffer(u),a=new DataView(c);a.setUint8(0,n),r?Ia(a,1,r):(a.setUint32(1,287454020,!1),a.setUint32(5,1432778632,!1)),a.setUint32(9,u+(o||0)-13,!0),t&&Ia(a,13,t),this.commandDebug(e.SEND,n,r,c.byteLength);try{this.socket.send(c)}catch(f){y.error(e._,f,"Send message"),this.socket&&this.socket.readyState===this.socket.OPEN||(y.warning(e._,"WebSocket closed, try reconnect"),this.reconnect())}}},{key:"send",value:function(n){var t=this,r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:null,i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined;return new Promise(function(o,u){var c=this;if(Ra(this,t),!this.socket){var a="WebSocket not created";return y.warning(e._,a),void u(new Error(a))}this.counterId++;var f=function(n){for(var t=n,r="",i=0;i<8;i++)r+=String.fromCharCode(t%256),t=t/256|0;return r}(this.counterId),s=undefined;n!==S&&n!==L&&(s=setTimeout(function(){Ra(this,c);var t=this.requests.get(f);t&&t.reject(new Error("Timed out in 10 sec. Error ".concat(n),{cause:n}))}.bind(this),1e4)),this.requests.set(f,{resolve:o,reject:u,counter:s}),this.sendData(n,r,f,i)}.bind(this))}},{key:"directSend",value:function(n){var t=this;if(this.socket.readyState!==this.socket.OPEN)return setTimeout(function(){Ra(this,t),this.directSend(n)}.bind(this),this.getResendInterval()),void y.warning(e._,"WebSocket not open, try resend after timeout");this.debug&&y.info(e.SEND,"block length: ".concat(n.byteLength," byte")),this.socket.send(n)}},{key:"init",value:function(n,t){var r=this;this.onOpen=n,this.onError=t,Promise.resolve().then(function(){if(Ra(this,r),!window.WebSocket)return y.warning(e._,"WebSocket is not supported by this browser"),void t(new Error("WebSocket is not supported by this browser"));this.connect()}.bind(this))}},{key:"connect",value:function(){var n=this;if(!this.connecting){if(y.info(e._,"build: ".concat(12)),this.connecting=!0,"visible"!==document.visibilityState){var t=function(){Ra(this,n),"visible"===document.visibilityState&&(document.removeEventListener("visibilitychange",t),this.connecting=!1,this.connect())}.bind(this);return y.info(e._,"сonnection postponed, document visibility is ".concat(document.visibilityState)),void document.addEventListener("visibilitychange",t)}y.info(e._,"connecting"),this.socket=new WebSocket("wss://".concat(this.url)),this.socket.binaryType="arraybuffer",this.reset(),this.socket.addEventListener("open",this.handleOpen),this.socket.addEventListener("error",this.handleError),this.socket.addEventListener("message",this.handleMessage),this.socket.addEventListener("close",this.handleClose),window.addEventListener("beforeunload",this.handleBeforeunload)}}}])}();function $a(n){return $a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$a(n)}function Ga(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function La(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,za(i.key),i)}}function za(n){var t=function(n,t){if("object"!=$a(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=$a(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==$a(t)?t:t+""}var Fa=function(){return function(n,t,r){return t&&La(n.prototype,t),r&&La(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(function n(t,r){!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),this.lastNotified=0,this.storeKey=t;try{window.Audio&&(this.sound=new Audio(r||"https://c.mql5.com/i/message/new_message_click2.mp3"))}catch(i){console.error(i)}},[{key:"getLastNotified",value:function(){var n=this;return new Promise(function(t){var r=this;Ga(this,n),Be(this.storeKey).then(function(n){if(Ga(this,r),n!==undefined){var i=0;null!==n&&(i=parseInt(n,10)),i>this.lastNotified&&(this.lastNotified=i),t(this.lastNotified)}else t(this.lastNotified)}.bind(this))}.bind(this))}},{key:"setLastNotified",value:function(n){Ne(this.storeKey,"".concat(n)),this.lastNotified=n}},{key:"play",value:function(n){var t=this;this.sound&&this.getLastNotified().then(function(r){var i,e=this;if(Ga(this,t),(!0===window.isWindowActive||window.isLastActiveWindow())&&r<n){try{var o=null===(i=this.sound)||void 0===i?void 0:i.play();o!==undefined&&o.then(function(){Ga(this,e)}.bind(this))["catch"](function(n){Ga(this,e),console.error(n)}.bind(this))}catch(u){console.error(u)}this.setLastNotified(n)}}.bind(this))}}])}();function Wa(n){var t,r=n;!function(n){var t=arguments.length>1&&arguments[1]!==undefined&&arguments[1],r=document.getElementById("chatContainer")||document.getElementById("chatsWidget");if(r&&(r.innerHTML='<div class="chat-errors-block">\n  <div class="alert alert_danger" id="chatErrorBlock"><span class="chat-errors-block__text">'.concat(n,"</span></div>\n  </div>"),t)){var i=document.getElementById("chatErrorBlock");if(i){var e=document.createElement("button");e.innerText=u("retry"),e.type="button",e.className="button button_green button_small",e.onclick=function(){r.innerHTML="",ir.resetTimeout(),ir.reconnect()},i.appendChild(e)}}}(r.message,(t=r.cause,t===R&&ir.unsuccessfulConnections>=10))}function qa(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return Xa(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(Xa(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,Xa(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,Xa(l,"constructor",f),Xa(f,"constructor",a),a.displayName="GeneratorFunction",Xa(f,e,"GeneratorFunction"),Xa(l),Xa(l,e,"Generator"),Xa(l,i,function(){return this}),Xa(l,"toString",function(){return"[object Generator]"}),(qa=function(){return{w:o,m:h}})()}function Xa(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}Xa=function(n,t,r,i){function o(t,r){Xa(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},Xa(n,t,r,i)}function Ha(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Ja,Qa=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},Va=!1;function Ya(){var n=this;return Ja||(Ja=new Promise(function(t,r){var i,o=this;Ha(this,n),i=new Da(nr,sr),ir=i;var u=new Fa("mql5_chats_last_notified","https://c.mql5.com/i/message/new_message_click2.mp3");ir.on(U,function(n){Ha(this,o);var t=ri(n);t&&da(t)}.bind(this)),ir.on(N,function(n){Ha(this,o);var t=function(n){var t=n.getBinary(8),r=n.getBinary(8);return{chatId:bt(t),lastSeen:bt(r)}}(n);ba(t)}.bind(this)),ir.on(B,function(n){Ha(this,o);var t=function(n){return li(n,yi)}(n);ya(t)}.bind(this)),ir.on(P,function(n){var t=this;Ha(this,o);var r=ei(n);pa(r).then(function(n){if(Ha(this,t),!n.isMuted){var i=r.message;i&&i.authorId!==Jt&&i.recType!==Cn&&u.play(i.date.getTime())}}.bind(this))["catch"](function(n){Ha(this,t),y.error(e._,n)}.bind(this))}.bind(this)),ir.init(function(){return Ha(this,o),Qa(this,void 0,void 0,qa().m(function n(){var i,o,u=this;return qa().w(function(n){for(;;)switch(n.p=n.n){case 0:return y.info(e._,"authorization"),we(),n.p=1,n.n=2,pe(Kt,9);case 2:i=n.v,y.info(e._,"authorized"),ir.resetTimeout(),We(i),me(!0),Ce().then(function(n){Ha(this,u),Bo.set(n)}.bind(this)),Va?(ko(),Fu()):t(),Va=!0,n.n=4;break;case 3:n.p=3,o=n.v,y.error(e._,new Error("auth failed: ".concat(o.message))),ir.close(),Wa(o),r(o);case 4:return n.a(2)}},n,this,[[1,3]])}))}.bind(this),function(n){Ha(this,o),r(n)}.bind(this))}.bind(this)),Ja)}function Za(n){return Za="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Za(n)}function Ka(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var nf={width:400,height:354};function tf(n,t){nf.width=n,nf.height=t,Ne("chat",JSON.stringify(nf))}var rf=r(6279),ef=(r(1249),undefined);var of=(0,Ot.T5)(undefined);of.subscribe(function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,ef),Ft.setLayout({error:!!n})}.bind(undefined));var uf=r(1232),cf=r(8898);function af(n){return af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},af(n)}function ff(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,sf(i.key),i)}}function sf(n){var t=function(n,t){if("object"!=af(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=af(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==af(t)?t:t+""}function lf(n,t,r){return t=vf(t),function(n,t){if(t&&("object"==af(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,hf()?Reflect.construct(t,r||[],vf(n).constructor):t.apply(n,r))}function hf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(hf=function(){return!!n})()}function vf(n){return vf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vf(n)}function df(n,t){return df=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},df(n,t)}function bf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function yf(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return pf(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pf(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pf(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function mf(n){var t,r,i,e,o;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.Qq7)(n[0]),(0,rf.CFu)(r,"class","alert alert_danger"),(0,rf.CFu)(t,"class","chat-error")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),o=!0},p:function(n,t){var r=yf(t,1)[0];(!o||1&r)&&(0,rf.iQh)(i,n[0])},i:function(n){var t=this;o||(n&&(0,rf.Dti)(function(){bf(this,t),o&&(e||(e=(0,rf.h86)(r,uf.Rv,{duration:200},!0)),e.run(1))}.bind(this)),o=!0)},o:function(n){n&&(e||(e=(0,rf.h86)(r,uf.Rv,{duration:200},!1)),e.run(0)),o=!1},d:function(n){n&&(0,rf.YoD)(t),n&&e&&e.end()}}}function wf(n,t,r){var i,e=this;return(0,rf.j0C)(n,of,function(n){return bf(this,e),r(0,i=n)}.bind(this)),(0,cf.Rc)(function(){var n=this;bf(this,e),setTimeout(function(){bf(this,n),(0,rf.vu6)(of,i=undefined,i)}.bind(this),5e3)}.bind(this)),[i]}var gf=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=lf(this,t),(0,rf.TsN)(r,n,wf,mf,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&df(n,t)}(t,n),function(n,t,r){return t&&ff(n.prototype,t),r&&ff(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const jf=gf;function _f(n){return _f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_f(n)}var Sf=undefined;function Of(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ef(i.key),i)}}function Ef(n){var t=function(n,t){if("object"!=_f(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=_f(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==_f(t)?t:t+""}function Tf(n,t,r){return t=Cf(t),function(n,t){if(t&&("object"==_f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,kf()?Reflect.construct(t,r||[],Cf(n).constructor):t.apply(n,r))}function kf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(kf=function(){return!!n})()}function Cf(n){return Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Cf(n)}function xf(n,t){return xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},xf(n,t)}function Af(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return If(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?If(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function If(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Mf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Rf=function(n){return Mf(this,Sf),{}}.bind(undefined),Uf=function(n){return Mf(this,Sf),{}}.bind(undefined);function Pf(n){var t,r,i,e,o,c,a,f,s,l,h,v=n[2].content,d=(0,rf.Of3)(v,n,n[1],Uf);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),e=(0,rf.ND4)("i"),o=(0,rf.xem)(),c=(0,rf.ND4)("div"),d&&d.c(),a=(0,rf.xem)(),(f=(0,rf.ND4)("div")).innerHTML='<i class="icons-chat icons-chat_close-gray"></i>',(0,rf.CFu)(e,"class","icons-chat icons-chat_chat-big"),(0,rf.CFu)(c,"class","chat-error-window__text"),(0,rf.CFu)(i,"class","chat-error-window__content"),(0,rf.CFu)(r,"class","chat-error-window ui"),(0,rf.CFu)(f,"class","chat-error-window__close"),(0,rf.CFu)(f,"title",u("close")),(0,rf.CFu)(t,"class","chat-window"+(Zt?" chat-window_widget":""))},m:function(u,v){(0,rf.Yry)(u,t,v),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.BCw)(i,o),(0,rf.BCw)(i,c),d&&d.m(c,null),(0,rf.BCw)(t,a),(0,rf.BCw)(t,f),s=!0,l||(h=[(0,rf.KTR)(f,"keyup",Bf),(0,rf.KTR)(f,"click",n[0])],l=!0)},p:function(n,t){var r=Af(t,1)[0];d&&d.p&&(!s||2&r)&&(0,rf.nkG)(d,v,n,n[1],s?(0,rf.sWk)(v,n[1],r,Rf):(0,rf.i32)(n[1]),Uf)},i:function(n){s||((0,rf.c7F)(d,n),s=!0)},o:function(n){(0,rf.Tn8)(d,n),s=!1},d:function(n){n&&(0,rf.YoD)(t),d&&d.d(n),l=!1,(0,rf.oOW)(h)}}}var Bf=function(){Mf(this,Sf)}.bind(undefined);function Nf(n,t,r){var i=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=(0,cf.ur)();return n.$$set=function(n){Mf(this,i),"$$scope"in n&&r(1,u=n.$$scope)}.bind(this),[function(){Zo(),c("close")},u,o]}var Df=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Tf(this,t),(0,rf.TsN)(r,n,Nf,Pf,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xf(n,t)}(t,n),function(n,t,r){return t&&Of(n.prototype,t),r&&Of(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const $f=Df;function Gf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Lf(n){var t=this,r=n.chatId,i=n.isDelete;n.userId===$e&&(i?go(r):se(r).then(function(n){Gf(this,t),n&&(eu(n),To(n))}.bind(this))["catch"](function(n){Gf(this,t),y.error(e.S,n)}.bind(this)))}function zf(n){return zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},zf(n)}function Ff(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Wf(i.key),i)}}function Wf(n){var t=function(n,t){if("object"!=zf(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=zf(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==zf(t)?t:t+""}function qf(n,t,r){return t=Hf(t),function(n,t){if(t&&("object"==zf(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Xf()?Reflect.construct(t,r||[],Hf(n).constructor):t.apply(n,r))}function Xf(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Xf=function(){return!!n})()}function Hf(n){return Hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Hf(n)}function Jf(n,t){return Jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Jf(n,t)}function Qf(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Vf(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Yf(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yf(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yf(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Zf(n){var t,r,i=n[3]["default"],e=(0,rf.Of3)(i,n,n[2],null);return{c:function(){t=(0,rf.ND4)("div"),e&&e.c()},m:function(i,o){(0,rf.Yry)(i,t,o),e&&e.m(t,null),n[4](t),r=!0},p:function(n,t){var o=Vf(t,1)[0];e&&e.p&&(!r||4&o)&&(0,rf.nkG)(e,i,n,n[2],r?(0,rf.sWk)(i,n[2],o,null):(0,rf.i32)(n[2]),null)},i:function(n){r||((0,rf.c7F)(e,n),r=!0)},o:function(n){(0,rf.Tn8)(e,n),r=!1},d:function(r){r&&(0,rf.YoD)(t),e&&e.d(r),n[4](null)}}}var Kf=null;function ns(n,t,r){var i,e,o=this,u=t.$$slots,c=void 0===u?{}:u,a=t.$$scope,f=t.parent,s=void 0===f?Kf||(Kf=document.createElement("div"),document.body.appendChild(Kf),Kf):f;return(0,cf.Rc)(function(){Qf(this,o),(e=null==i?void 0:i.parentNode)&&i&&s.appendChild(i)}.bind(this)),(0,cf.sA)(function(){return Qf(this,o),null==e?void 0:e.appendChild(i)}.bind(this)),n.$$set=function(n){Qf(this,o),"parent"in n&&r(1,s=n.parent),"$$scope"in n&&r(2,a=n.$$scope)}.bind(this),[i,s,a,c,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){Qf(this,t),r(0,i=n)}.bind(this))}]}var ts=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=qf(this,t),(0,rf.TsN)(r,n,ns,Zf,rf.jXN,{parent:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Jf(n,t)}(t,n),function(n,t,r){return t&&Ff(n.prototype,t),r&&Ff(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const rs=ts;function is(n){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},is(n)}var es=undefined;function os(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,us(i.key),i)}}function us(n){var t=function(n,t){if("object"!=is(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=is(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==is(t)?t:t+""}function cs(n,t,r){return t=fs(t),function(n,t){if(t&&("object"==is(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,as()?Reflect.construct(t,r||[],fs(n).constructor):t.apply(n,r))}function as(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(as=function(){return!!n})()}function fs(n){return fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},fs(n)}function ss(n,t){return ss=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ss(n,t)}function ls(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return hs(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hs(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hs(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function vs(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var ds=function(n){return vs(this,es),{}}.bind(undefined),bs=function(n){return vs(this,es),{}}.bind(undefined),ys=function(n){return vs(this,es),{}}.bind(undefined),ps=function(n){return vs(this,es),{}}.bind(undefined),ms=function(n){return vs(this,es),{}}.bind(undefined),ws=function(n){return vs(this,es),{}}.bind(undefined);function gs(n){var t,r,i=n[11].title,e=(0,rf.Of3)(i,n,n[13],ws);return{c:function(){t=(0,rf.ND4)("div"),e&&e.c(),(0,rf.CFu)(t,"class","chat-dialog__title")},m:function(n,i){(0,rf.Yry)(n,t,i),e&&e.m(t,null),r=!0},p:function(n,t){e&&e.p&&(!r||8192&t)&&(0,rf.nkG)(e,i,n,n[13],r?(0,rf.sWk)(i,n[13],t,ms):(0,rf.i32)(n[13]),ws)},i:function(n){r||((0,rf.c7F)(e,n),r=!0)},o:function(n){(0,rf.Tn8)(e,n),r=!1},d:function(n){n&&(0,rf.YoD)(t),e&&e.d(n)}}}function js(n){var t,r,i=n[11].buttons,e=(0,rf.Of3)(i,n,n[13],bs);return{c:function(){t=(0,rf.ND4)("div"),e&&e.c(),(0,rf.CFu)(t,"class","chat-dialog__buttons")},m:function(n,i){(0,rf.Yry)(n,t,i),e&&e.m(t,null),r=!0},p:function(n,t){e&&e.p&&(!r||8192&t)&&(0,rf.nkG)(e,i,n,n[13],r?(0,rf.sWk)(i,n[13],t,ds):(0,rf.i32)(n[13]),bs)},i:function(n){r||((0,rf.c7F)(e,n),r=!0)},o:function(n){(0,rf.Tn8)(e,n),r=!1},d:function(n){n&&(0,rf.YoD)(t),e&&e.d(n)}}}function _s(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d=n[0]&&gs(n),b=n[11].content,y=(0,rf.Of3)(b,n,n[13],ps),p=n[1]&&js(n);return{c:function(){var f=this;t=(0,rf.ND4)("div"),r=(0,rf.xem)(),i=(0,rf.ND4)("div"),(e=(0,rf.ND4)("div")).innerHTML='<i class="icons-ux icons-ux_close-gray"></i>',o=(0,rf.xem)(),d&&d.c(),u=(0,rf.xem)(),c=(0,rf.ND4)("div"),y&&y.c(),a=(0,rf.xem)(),p&&p.c(),(0,rf.CFu)(t,"class","chat-dialog__shadow"),(0,rf.CFu)(e,"class","chat-dialog__close qa-dialog-close"),(0,rf.CFu)(c,"class","chat-dialog__content"),(0,rf.CFu)(i,"class","chat-dialog__container ui"),(0,rf.hgi)(i,"top",n[4]),(0,rf.hgi)(i,"left",n[5]),(0,rf.hgi)(i,"bottom",n[7]),(0,rf.hgi)(i,"right",n[6]),(0,rf.hgi)(i,"transform","translate3d("+n[8]+", "+n[9]+", 0)"),(0,rf.Dti)(function(){return vs(this,f),n[12].call(i)}.bind(this))},m:function(s,b){(0,rf.Yry)(s,t,b),(0,rf.Yry)(s,r,b),(0,rf.Yry)(s,i,b),(0,rf.BCw)(i,e),(0,rf.BCw)(i,o),d&&d.m(i,null),(0,rf.BCw)(i,u),(0,rf.BCw)(i,c),y&&y.m(c,null),(0,rf.BCw)(i,a),p&&p.m(i,null),f=(0,rf.zI)(i,n[12].bind(i)),l=!0,h||(v=[(0,rf.KTR)(t,"keyup",Os),(0,rf.KTR)(t,"click",n[10]),(0,rf.KTR)(e,"click",n[10]),(0,rf.KTR)(e,"keyup",Es)],h=!0)},p:function(n,t){var r=this;n[0]?d?(d.p(n,t),1&t&&(0,rf.c7F)(d,1)):((d=gs(n)).c(),(0,rf.c7F)(d,1),d.m(i,u)):d&&((0,rf.V44)(),(0,rf.Tn8)(d,1,1,function(){vs(this,r),d=null}.bind(this)),(0,rf.GYV)()),y&&y.p&&(!l||8192&t)&&(0,rf.nkG)(y,b,n,n[13],l?(0,rf.sWk)(b,n[13],t,ys):(0,rf.i32)(n[13]),ps),n[1]?p?(p.p(n,t),2&t&&(0,rf.c7F)(p,1)):((p=js(n)).c(),(0,rf.c7F)(p,1),p.m(i,null)):p&&((0,rf.V44)(),(0,rf.Tn8)(p,1,1,function(){vs(this,r),p=null}.bind(this)),(0,rf.GYV)()),(!l||16&t)&&(0,rf.hgi)(i,"top",n[4]),(!l||32&t)&&(0,rf.hgi)(i,"left",n[5]),(!l||128&t)&&(0,rf.hgi)(i,"bottom",n[7]),(!l||64&t)&&(0,rf.hgi)(i,"right",n[6]),(!l||768&t)&&(0,rf.hgi)(i,"transform","translate3d("+n[8]+", "+n[9]+", 0)")},i:function(n){var t=this;l||((0,rf.c7F)(d),(0,rf.c7F)(y,n),(0,rf.c7F)(p),n&&(0,rf.Dti)(function(){vs(this,t),l&&(s||(s=(0,rf.h86)(i,uf.Rv,{duration:150},!0)),s.run(1))}.bind(this)),l=!0)},o:function(n){(0,rf.Tn8)(d),(0,rf.Tn8)(y,n),(0,rf.Tn8)(p),n&&(s||(s=(0,rf.h86)(i,uf.Rv,{duration:150},!1)),s.run(0)),l=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i)),d&&d.d(),y&&y.d(n),p&&p.d(),f(),n&&s&&s.end(),h=!1,(0,rf.oOW)(v)}}}function Ss(n){var t,r;return t=new rs({props:{$$slots:{"default":[_s]},$$scope:{ctx:n}}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i=ls(r,1)[0],e={};9215&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}var Os=function(){vs(this,es)}.bind(undefined),Es=function(){vs(this,es)}.bind(undefined);function Ts(n,t,r){var i,e,o=this,u=t.$$slots,c=void 0===u?{}:u,a=t.$$scope,f=t.withTitle,s=void 0===f||f,l=t.withButtons,h=void 0===l||l,v=(0,cf.ur)(),d="50%",b="50%",y="auto",p="auto",m="0",w="0";var g=sa(function(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;n-16<=i?(r(5,b="".concat(8,"px")),r(6,y="".concat(8,"px")),r(8,m=0)):(r(5,b="50%"),r(6,y="auto"),r(8,m="".concat(Math.round(-1*(i/2+8)),"px"))),t-16<=e?(r(4,d="".concat(8,"px")),r(7,p="".concat(8,"px")),r(9,w=0)):(r(4,d="50%"),r(7,p="auto"),r(9,w="".concat(Math.round(-1*(e/2+8)),"px")))},300);(0,cf.Rc)(function(){var n=this;return vs(this,o),window.addEventListener("resize",g),function(){vs(this,n),window.removeEventListener("resize",g)}.bind(this)}.bind(this)),(0,cf.gt)(function(){vs(this,o),g()}.bind(this));var j=function(){vs(this,o),v("close")}.bind(this);return n.$$set=function(n){vs(this,o),"withTitle"in n&&r(0,s=n.withTitle),"withButtons"in n&&r(1,h=n.withButtons),"$$scope"in n&&r(13,a=n.$$scope)}.bind(this),[s,h,i,e,d,b,y,p,m,w,j,c,function(){i=this.offsetWidth,e=this.offsetHeight,r(2,i),r(3,e)},a]}var ks=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=cs(this,t),(0,rf.TsN)(r,n,Ts,Ss,rf.jXN,{withTitle:0,withButtons:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ss(n,t)}(t,n),function(n,t,r){return t&&os(n.prototype,t),r&&os(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Cs=ks;function xs(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function As(n){return As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},As(n)}function Is(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ms(i.key),i)}}function Ms(n){var t=function(n,t){if("object"!=As(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=As(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==As(t)?t:t+""}function Rs(n,t,r){return t=Ps(t),function(n,t){if(t&&("object"==As(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Us()?Reflect.construct(t,r||[],Ps(n).constructor):t.apply(n,r))}function Us(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Us=function(){return!!n})()}function Ps(n){return Ps=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ps(n)}function Bs(n,t){return Bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Bs(n,t)}function Ns(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ds(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return $s(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$s(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $s(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Gs(n){var t;return{c:function(){(t=(0,rf.ND4)("span")).textContent="".concat(u("deletion")),(0,rf.CFu)(t,"slot","title")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function Ls(n){var t,r;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),(0,rf.CFu)(r,"class","chat-alert-text"),(0,rf.CFu)(t,"slot","content")},m:function(i,e){(0,rf.Yry)(i,t,e),(0,rf.BCw)(t,r),r.innerHTML=n[0]},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function zs(n){var t,r,i,e,o,c;return{c:function(){t=(0,rf.ND4)("span"),(r=(0,rf.ND4)("button")).textContent="".concat(u("cancel")),i=(0,rf.xem)(),(e=(0,rf.ND4)("button")).textContent="".concat(u("deleteUpper")),(0,rf.CFu)(r,"class","button button_white qa-dialog-cancel"),(0,rf.CFu)(e,"class","button button_red qa-dialog-ok"),(0,rf.CFu)(t,"slot","buttons")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),o||(c=[(0,rf.KTR)(r,"click",n[1]),(0,rf.KTR)(e,"click",n[2])],o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,(0,rf.oOW)(c)}}}function Fs(n){var t,r;return(t=new Cs({props:{$$slots:{buttons:[zs],content:[Ls],title:[Gs]},$$scope:{ctx:n}}})).$on("close",n[1]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i=Ds(r,1)[0],e={};128&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Ws(n,t,r){var i,o,c=this;(0,rf.j0C)(n,Po,function(n){return Ns(this,c),r(4,i=n)}.bind(this)),(0,rf.j0C)(n,Ft,function(n){return Ns(this,c),r(5,o=n)}.bind(this));var a="deleteChatConfirm",f=i.type===Sn;switch(i.type){case On:a="deletionTextGroup";break;case En:a="deletionTextChannel"}function s(){(0,rf.vu6)(Ft,o["delete"]=!1,o)}return[u(a,'<b>"'.concat(dr(i.name),'"</b>')),s,function(){var n=this;Le?(!function(n){var t=this;new Promise(function(r,i){var e=this;if(xs(this,t),n){var o=yt(n);ir.send(K,[o]).then(function(){xs(this,e),r("Success")}.bind(this))["catch"](function(n){xs(this,e),i(n)}.bind(this))}else i(new Error("Chat id is empty"))}.bind(this))}(i.chatId),i.type===En?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+Delete",unit:"Type",value:i.isPublic?"public":"private"}):i.type===On?window.fz&&window.fz("event",{name:"MQL5+Chat+Group+Delete",unit:"Type",value:i.isPublic?"public":"private"}):window.fz&&window.fz("track","MQL5+Chat+Delete"),s(),(0,rf.vu6)(Ft,o.edit=!1,o)):f&&re(i.chatId,$e,0,!0).then(function(t){Ns(this,n),Lf(t),window.fz&&window.fz("track","MQL5+Chat+Delete"),(0,rf.vu6)(Po,i.isSubscribed=!1,i)}.bind(this))["catch"](function(t){Ns(this,n),y.error(e.USER,t)}.bind(this))}]}var qs=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Rs(this,t),(0,rf.TsN)(r,n,Ws,Fs,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Bs(n,t)}(t,n),function(n,t,r){return t&&Is(n.prototype,t),r&&Is(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Xs=qs;function Hs(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Js(n){var t=this;return vu[n]||(vu[n]=(0,Ot.T5)({userId:n}),qi([n]).then(function(n){var r=this;Hs(this,t);var i=(new Date).getTime();n.forEach(function(n){Hs(this,r),n.timestamp=i,vu[n.userId].set(n)}.bind(this)),la()}.bind(this))["catch"](function(n){Hs(this,t),y.error(e.S,n)}.bind(this))),vu[n]}function Qs(n){return m[n]?u(m[n]):"Unknown"}function Vs(n){return Vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vs(n)}function Ys(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Zs(i.key),i)}}function Zs(n){var t=function(n,t){if("object"!=Vs(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Vs(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Vs(t)?t:t+""}function Ks(n,t,r){return t=tl(t),function(n,t){if(t&&("object"==Vs(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,nl()?Reflect.construct(t,r||[],tl(n).constructor):t.apply(n,r))}function nl(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(nl=function(){return!!n})()}function tl(n){return tl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tl(n)}function rl(n,t){return rl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},rl(n,t)}function il(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function el(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return ol(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ol(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ol(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function ul(n,t,r){var i=n.slice();return i[3]=t[r],i}function cl(n){var t,r,i=n[3][0]+"";return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"href",n[3][1]),(0,rf.CFu)(t,"rel","noreferrer"),(0,rf.CFu)(t,"target","_blank"),(0,rf.CFu)(t,"title",n[3][0])},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function al(n){for(var t,r=(0,rf.rv_)(n[0]),i=[],e=0;e<r.length;e+=1)i[e]=cl(ul(n,r,e));return{c:function(){for(var n=0;n<i.length;n+=1)i[n].c();t=(0,rf.Iex)()},m:function(n,r){for(var e=0;e<i.length;e+=1)i[e]&&i[e].m(n,r);(0,rf.Yry)(n,t,r)},p:function(n,e){var o=el(e,1)[0];if(1&o){var u;for(r=(0,rf.rv_)(n[0]),u=0;u<r.length;u+=1){var c=ul(n,r,u);i[u]?i[u].p(c,o):(i[u]=cl(c),i[u].c(),i[u].m(t.parentNode,t))}for(;u<i.length;u+=1)i[u].d(1);i.length=r.length}},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(i,n)}}}function fl(n,t,r){var i=this,e=t.links,o=e.split(","),u=[];return n.$$set=function(n){il(this,i),"links"in n&&r(1,e=n.links)}.bind(this),o.forEach(function(n){il(this,i),n=n.trim();for(var t="https://www.mql5.com/go?link=".concat(encodeURIComponent(n)),r=0,e=Vt.length;r<e;r++)if(n.indexOf(Vt[r])>-1){t=n;break}u.push([n,t])}.bind(this)),[u,e]}var sl=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Ks(this,t),(0,rf.TsN)(r,n,fl,al,rf.jXN,{links:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&rl(n,t)}(t,n),function(n,t,r){return t&&Ys(n.prototype,t),r&&Ys(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ll=sl;function hl(n){return hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hl(n)}var vl=undefined;function dl(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,bl(i.key),i)}}function bl(n){var t=function(n,t){if("object"!=hl(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=hl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==hl(t)?t:t+""}function yl(n,t,r){return t=ml(t),function(n,t){if(t&&("object"==hl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,pl()?Reflect.construct(t,r||[],ml(n).constructor):t.apply(n,r))}function pl(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(pl=function(){return!!n})()}function ml(n){return ml=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ml(n)}function wl(n,t){return wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},wl(n,t)}function gl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return jl(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jl(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jl(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function _l(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Sl(n){var t;return{c:function(){t=(0,rf.ND4)("i"),(0,rf.CFu)(t,"class","icons-chat icons-chat_no-image")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function Ol(n){var t,r;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.mq_)(t.src,r=n[1].avatar)||(0,rf.CFu)(t,"src",r),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"loading","lazy")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){2&i&&!(0,rf.mq_)(t.src,r=n[1].avatar)&&(0,rf.CFu)(t,"src",r)},d:function(n){n&&(0,rf.YoD)(t)}}}function El(n){var t,r,i=n[1].description+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","chat-info__desc")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){2&t&&i!==(i=n[1].description+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function Tl(n){var t,r,i,e,o,c,a,f,s,l,h,v;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),(i=(0,rf.ND4)("div")).textContent="".concat(u("notifications")),e=(0,rf.xem)(),o=(0,rf.ND4)("div"),c=(0,rf.ND4)("input"),f=(0,rf.xem)(),s=(0,rf.ND4)("label"),(0,rf.CFu)(i,"class","chat-info__toggle-text"),(0,rf.Xrn)(c,"checkbox"),(0,rf.CFu)(c,"class","toggle-btn__checkbox"),(0,rf.CFu)(c,"name","isMuted"),(0,rf.CFu)(c,"id","chatIsMuted"),c.checked=a=!n[1].isMuted,(0,rf.CFu)(s,"for","chatIsMuted"),(0,rf.CFu)(s,"title",l=u(n[1].isMuted?"unmute":"mute")),(0,rf.CFu)(o,"class","toggle-btn"),(0,rf.CFu)(r,"class","chat-info__toggle"),(0,rf.CFu)(t,"class","chat-info__item")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),(0,rf.BCw)(r,o),(0,rf.BCw)(o,c),(0,rf.BCw)(o,f),(0,rf.BCw)(o,s),h||(v=(0,rf.KTR)(c,"change",n[13]),h=!0)},p:function(n,t){2&t&&a!==(a=!n[1].isMuted)&&(c.checked=a),2&t&&l!==(l=u(n[1].isMuted?"unmute":"mute"))&&(0,rf.CFu)(s,"title",l)},d:function(n){n&&(0,rf.YoD)(t),h=!1,v()}}}function kl(n){var t,r,i,e,o,c;return o=new ll({props:{links:n[1].links}}),{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("usefulLinks")),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),(0,rf.N0i)(o.$$.fragment),(0,rf.CFu)(r,"class","chat-info__label"),(0,rf.CFu)(e,"class","chat-info__links"),(0,rf.CFu)(t,"class","chat-info__item")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.wSR)(o,e,null),c=!0},p:function(n,t){var r={};2&t&&(r.links=n[1].links),o.$set(r)},i:function(n){c||((0,rf.c7F)(o.$$.fragment,n),c=!0)},o:function(n){(0,rf.Tn8)(o.$$.fragment,n),c=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(o)}}}function Cl(n){var t,r,i,e,o,c,a,f,s,l,h,v=n[0]&&xl(n);return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u(n[9]?"urlGroup":"urlChannel")),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),v&&v.c(),o=(0,rf.xem)(),c=(0,rf.ND4)("a"),a=(0,rf.Qq7)(n[2]),f=(0,rf.xem)(),(s=(0,rf.ND4)("span")).innerHTML='<i class="icons-chat icons-chat_copy"></i>',(0,rf.CFu)(r,"class","chat-info__label"),(0,rf.CFu)(c,"href",n[2]),(0,rf.CFu)(s,"class","chat-info__copy"),(0,rf.CFu)(e,"class","chat-info__invite-link"),(0,rf.CFu)(t,"class","chat-info__item")},m:function(u,d){(0,rf.Yry)(u,t,d),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),v&&v.m(e,null),(0,rf.BCw)(e,o),(0,rf.BCw)(e,c),(0,rf.BCw)(c,a),(0,rf.BCw)(e,f),(0,rf.BCw)(e,s),l||(h=[(0,rf.KTR)(s,"keyup",Pl),(0,rf.KTR)(s,"click",n[17])],l=!0)},p:function(n,t){var r=this;n[0]?v?1&t&&(0,rf.c7F)(v,1):((v=xl(n)).c(),(0,rf.c7F)(v,1),v.m(e,o)):v&&((0,rf.V44)(),(0,rf.Tn8)(v,1,1,function(){_l(this,r),v=null}.bind(this)),(0,rf.GYV)()),4&t&&(0,rf.iQh)(a,n[2]),4&t&&(0,rf.CFu)(c,"href",n[2])},d:function(n){n&&(0,rf.YoD)(t),v&&v.d(),l=!1,(0,rf.oOW)(h)}}}function xl(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("span")).textContent="".concat(u("copied")),(0,rf.CFu)(t,"class","chat-info__copied")},m:function(n,r){(0,rf.Yry)(n,t,r),i=!0},i:function(n){var e=this;i||(n&&(0,rf.Dti)(function(){_l(this,e),i&&(r||(r=(0,rf.h86)(t,uf.Rv,{},!0)),r.run(1))}.bind(this)),i=!0)},o:function(n){n&&(r||(r=(0,rf.h86)(t,uf.Rv,{},!1)),r.run(0)),i=!1},d:function(n){n&&(0,rf.YoD)(t),n&&r&&r.end()}}}function Al(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("a")).textContent="".concat(u("membersList")),(0,rf.CFu)(t,"href","/")},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[18])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function Il(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j,_,S,O,E,T,k=u("membersCount",gr(n[1].countMembers))+"";function C(n,t){return n[1].avatar?Ol:Sl}var x=C(n),A=x(n),I=n[1].description&&El(n),M=n[1].isSubscribed&&Tl(n),R=n[1].links&&kl(n),U=n[1].inviteLink&&Cl(n),P=(n[10]||n[1].isSubscribed&&(n[9]||n[8]&&n[1].perms&qn.I))&&Al(n),B=n[10]&&function(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p=n[1].authorName+"",m=Qr({date:n[1].created})+"",w=Qs(n[1].language)+"";return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("owner")),i=(0,rf.xem)(),e=(0,rf.ND4)("a"),o=(0,rf.Qq7)(p),c=(0,rf.xem)(),a=(0,rf.ND4)("div"),(f=(0,rf.ND4)("div")).textContent="".concat(u("created")),s=(0,rf.xem)(),l=(0,rf.Qq7)(m),h=(0,rf.xem)(),v=(0,rf.ND4)("div"),(d=(0,rf.ND4)("div")).textContent="".concat(u("chatLanguage")),b=(0,rf.xem)(),y=(0,rf.Qq7)(w),(0,rf.CFu)(r,"class","chat-info__label"),(0,rf.CFu)(e,"href",n[3]),(0,rf.CFu)(e,"target","_blank"),(0,rf.CFu)(t,"class","chat-info__item"),(0,rf.CFu)(f,"class","chat-info__label"),(0,rf.CFu)(a,"class","chat-info__item"),(0,rf.CFu)(d,"class","chat-info__label"),(0,rf.CFu)(v,"class","chat-info__item")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(e,o),(0,rf.Yry)(n,c,u),(0,rf.Yry)(n,a,u),(0,rf.BCw)(a,f),(0,rf.BCw)(a,s),(0,rf.BCw)(a,l),(0,rf.Yry)(n,h,u),(0,rf.Yry)(n,v,u),(0,rf.BCw)(v,d),(0,rf.BCw)(v,b),(0,rf.BCw)(v,y)},p:function(n,t){2&t&&p!==(p=n[1].authorName+"")&&(0,rf.iQh)(o,p),8&t&&(0,rf.CFu)(e,"href",n[3]),2&t&&m!==(m=Qr({date:n[1].created})+"")&&(0,rf.iQh)(l,m),2&t&&w!==(w=Qs(n[1].language)+"")&&(0,rf.iQh)(y,w)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(c),(0,rf.YoD)(a),(0,rf.YoD)(h),(0,rf.YoD)(v))}}}(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),A.c(),e=(0,rf.xem)(),o=(0,rf.ND4)("div"),c=(0,rf.ND4)("div"),a=(0,rf.Qq7)(n[11]),f=(0,rf.xem)(),I&&I.c(),s=(0,rf.xem)(),l=(0,rf.ND4)("div"),M&&M.c(),h=(0,rf.xem)(),v=(0,rf.ND4)("div"),d=(0,rf.ND4)("div"),b=(0,rf.Qq7)(n[4]),y=(0,rf.xem)(),p=(0,rf.Qq7)(n[5]),m=(0,rf.xem)(),R&&R.c(),w=(0,rf.xem)(),U&&U.c(),g=(0,rf.xem)(),j=(0,rf.ND4)("div"),_=(0,rf.ND4)("div"),S=(0,rf.Qq7)(k),O=(0,rf.xem)(),P&&P.c(),E=(0,rf.xem)(),B&&B.c(),(0,rf.CFu)(i,"class","chat-info__avatar"),(0,rf.CFu)(c,"class","chat-info__title"),(0,rf.CFu)(c,"title",n[11]),(0,rf.CFu)(o,"class","chat-info__content"),(0,rf.CFu)(r,"class","chat-info"),(0,rf.CFu)(d,"class","chat-info__label"),(0,rf.CFu)(v,"class","chat-info__item"),(0,rf.CFu)(_,"class","chat-info__label"),(0,rf.CFu)(j,"class","chat-info__item"),(0,rf.CFu)(l,"class","chat-info-list"),(0,rf.CFu)(t,"slot","content")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),A.m(i,null),(0,rf.BCw)(r,e),(0,rf.BCw)(r,o),(0,rf.BCw)(o,c),(0,rf.BCw)(c,a),(0,rf.BCw)(o,f),I&&I.m(o,null),(0,rf.BCw)(t,s),(0,rf.BCw)(t,l),M&&M.m(l,null),(0,rf.BCw)(l,h),(0,rf.BCw)(l,v),(0,rf.BCw)(v,d),(0,rf.BCw)(d,b),(0,rf.BCw)(v,y),(0,rf.BCw)(v,p),(0,rf.BCw)(l,m),R&&R.m(l,null),(0,rf.BCw)(l,w),U&&U.m(l,null),(0,rf.BCw)(l,g),(0,rf.BCw)(l,j),(0,rf.BCw)(j,_),(0,rf.BCw)(_,S),(0,rf.BCw)(j,O),P&&P.m(j,null),(0,rf.BCw)(l,E),B&&B.m(l,null),T=!0},p:function(n,t){var r=this;x===(x=C(n))&&A?A.p(n,t):(A.d(1),(A=x(n))&&(A.c(),A.m(i,null))),n[1].description?I?I.p(n,t):((I=El(n)).c(),I.m(o,null)):I&&(I.d(1),I=null),n[1].isSubscribed?M?M.p(n,t):((M=Tl(n)).c(),M.m(l,h)):M&&(M.d(1),M=null),(!T||16&t)&&(0,rf.iQh)(b,n[4]),(!T||32&t)&&(0,rf.iQh)(p,n[5]),n[1].links?R?(R.p(n,t),2&t&&(0,rf.c7F)(R,1)):((R=kl(n)).c(),(0,rf.c7F)(R,1),R.m(l,w)):R&&((0,rf.V44)(),(0,rf.Tn8)(R,1,1,function(){_l(this,r),R=null}.bind(this)),(0,rf.GYV)()),n[1].inviteLink?U?U.p(n,t):((U=Cl(n)).c(),U.m(l,g)):U&&(U.d(1),U=null),(!T||2&t)&&k!==(k=u("membersCount",gr(n[1].countMembers))+"")&&(0,rf.iQh)(S,k),n[10]||n[1].isSubscribed&&(n[9]||n[8]&&n[1].perms&qn.I)?P?P.p(n,t):((P=Al(n)).c(),P.m(j,null)):P&&(P.d(1),P=null),n[10]&&B.p(n,t)},i:function(n){T||((0,rf.c7F)(R),T=!0)},o:function(n){(0,rf.Tn8)(R),T=!1},d:function(n){n&&(0,rf.YoD)(t),A.d(),I&&I.d(),M&&M.d(),R&&R.d(),U&&U.d(),P&&P.d(),B&&B.d()}}}function Ml(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).textContent="".concat(u("chatEdit")),(0,rf.CFu)(t,"class","button button_white"),(0,rf.CFu)(t,"title",u("chatEdit"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[15])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function Rl(n){var t,r,i=(n[10]||n[1].perms&qn.M)&&Ml(n),e=n[10]&&function(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).textContent="".concat(u("deleteUpper")),(0,rf.CFu)(t,"class","button button_white-and-red"),(0,rf.CFu)(t,"title",u("deleteUpper"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[16])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}(n);return{c:function(){t=(0,rf.ND4)("div"),i&&i.c(),r=(0,rf.xem)(),e&&e.c(),(0,rf.CFu)(t,"slot","buttons"),(0,rf.CFu)(t,"class","chat-info__buttons")},m:function(n,o){(0,rf.Yry)(n,t,o),i&&i.m(t,null),(0,rf.BCw)(t,r),e&&e.m(t,null)},p:function(n,o){n[10]||n[1].perms&qn.M?i?i.p(n,o):((i=Ml(n)).c(),i.m(t,r)):i&&(i.d(1),i=null),n[10]&&e.p(n,o)},d:function(n){n&&(0,rf.YoD)(t),i&&i.d(),e&&e.d()}}}function Ul(n){var t,r;return(t=new Cs({props:{withButtons:n[10]||!!(n[1].perms&qn.M),withTitle:!1,$$slots:{buttons:[Rl],content:[Il]},$$scope:{ctx:n}}})).$on("close",n[19]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i=gl(r,1)[0],e={};2&i&&(e.withButtons=n[10]||!!(n[1].perms&qn.M)),2097343&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}var Pl=function(){_l(this,vl)}.bind(undefined);function Bl(n,t,r){var i,e,o,c=this,a=rf.lQ1,f=function(){var n=this;return _l(this,c),a(),a=(0,rf.B1Y)(s,function(t){return _l(this,n),r(14,e=t)}.bind(this)),s}.bind(this);(0,rf.j0C)(n,Po,function(n){return _l(this,c),r(1,i=n)}.bind(this)),(0,rf.j0C)(n,Ft,function(n){return _l(this,c),r(7,o=n)}.bind(this)),n.$$.on_destroy.push(function(){return _l(this,c),a()}.bind(this));var s,l=i.type===En,h=i.type===On,v=Le,d=i.name,b=(0,cf.ur)(),y=!1,p="",m="",w="",g="",j=function(){_l(this,c),b("close")}.bind(this);var _=function(){_l(this,c),tu(Po),j()}.bind(this),S=function(){_l(this,c),(0,rf.vu6)(Ft,o["delete"]=!0,o),j()}.bind(this),O=function(){_l(this,c),function(n){Pr(this,void 0,void 0,Rr().m(function t(){return Rr().w(function(t){for(;;)switch(t.n){case 0:if(!navigator.clipboard){t.n=2;break}return t.n=1,navigator.clipboard.writeText(n);case 1:return t.a(2);case 2:Br(n);case 3:return t.a(2)}},t)}))}(p),r(0,y=!0)}.bind(this),E=function(){_l(this,c),(0,rf.vu6)(Ft,o.listMembers=!0,o),j()}.bind(this);return n.$$.update=function(){var t=this;if(_l(this,c),2&n.$$.dirty){var o=i.isPublic;h?(r(4,w=u(o?"publicChat":"privateChat")),r(5,g=u(o?"publicChatDesc":"privateChatDesc"))):(r(4,w=u(o?"publicChannel":"privateChannel")),r(5,g=u(o?"publicChannelDesc":"privateChannelDesc")))}2&n.$$.dirty&&r(2,p="https://www.mql5.com/".concat(or,"/").concat(l?"channels":"groups","/").concat(i.inviteLink)),16386&n.$$.dirty&&v&&!e&&f(r(6,s=Js(i.authorId))),16384&n.$$.dirty&&e&&e.userLogin&&r(3,m="/".concat(or,"/users/").concat(e.userLogin)),1&n.$$.dirty&&y&&setTimeout(function(){_l(this,t),r(0,y=!1)}.bind(this),2e3)}.bind(this),[y,i,p,m,w,g,s,o,l,h,v,d,j,function(n){var t=this;if(n&&n.target){var r=!n.target.checked;je(i.chatId,r).then(function(n){_l(this,t),n===gn&&((0,rf.vu6)(Po,i.isMuted=r,i),Mo(i,r))}.bind(this))}},e,_,S,O,E,function(t){rf.Tq.call(this,n,t)}]}var Nl=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=yl(this,t),(0,rf.TsN)(r,n,Bl,Ul,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&wl(n,t)}(t,n),function(n,t,r){return t&&dl(n.prototype,t),r&&dl(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Dl=Nl;function $l(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Gl=0,Ll=(0,Ot.T5)([]);function zl(){var n=this;return(new Date).getTime()-Gl>3e5&&ee(nt,500).then(function(t){$l(this,n),Gl=(new Date).getTime(),Ll.set(t)}.bind(this))["catch"](function(t){$l(this,n),y.error(e.T,t)}.bind(this)),Ll}function Fl(n,t,r){for(var i=[],e=0,o=r.length;e<o&&!(i.length>t);e++){var u=r[e];("userName"in u&&u.userName&&~u.userName.toLowerCase().indexOf(n)||"userLogin"in u&&u.userLogin&&~u.userLogin.toLowerCase().indexOf(n))&&i.push(u)}return i}function Wl(n){return Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wl(n)}function ql(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Xl(i.key),i)}}function Xl(n){var t=function(n,t){if("object"!=Wl(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Wl(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Wl(t)?t:t+""}function Hl(n,t,r){return t=Ql(t),function(n,t){if(t&&("object"==Wl(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Jl()?Reflect.construct(t,r||[],Ql(n).constructor):t.apply(n,r))}function Jl(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Jl=function(){return!!n})()}function Ql(n){return Ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ql(n)}function Vl(n,t){return Vl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Vl(n,t)}function Yl(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Zl(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Kl(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kl(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kl(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function nh(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(n[3]),(0,rf.CFu)(t,"class",i="member-block__label"+n[4]),(0,rf.CFu)(t,"title",n[2])},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,e){8&e&&(0,rf.iQh)(r,n[3]),16&e&&i!==(i="member-block__label"+n[4])&&(0,rf.CFu)(t,"class",i),4&e&&(0,rf.CFu)(t,"title",n[2])},d:function(n){n&&(0,rf.YoD)(t)}}}function th(n){var t,r=(n[1]>0||n[0])&&nh(n);return{c:function(){r&&r.c(),t=(0,rf.Iex)()},m:function(n,i){r&&r.m(n,i),(0,rf.Yry)(n,t,i)},p:function(n,i){var e=Zl(i,1)[0];n[1]>0||n[0]?r?r.p(n,e):((r=nh(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r&&r.d(n)}}}function rh(n,t,r){var i=this,e=t.isAuthor,o=void 0!==e&&e,c=t.perms,a=void 0===c?0:c,f="",s="",l="";return n.$$set=function(n){Yl(this,i),"isAuthor"in n&&r(0,o=n.isAuthor),"perms"in n&&r(1,a=n.perms)}.bind(this),n.$$.update=function(){if(Yl(this,i),3&n.$$.dirty)if(o)r(3,s=u("owner")),r(4,l=" member-block__label_owner");else switch(a){case Xn:case qn.WRITE:r(2,f=u("canWriteMessages")),r(3,s=u("writer")),r(4,l=" member-block__label_writer");break;case Hn:case qn.I:r(3,s=u("moderator")),r(4,l=" member-block__label_moderator");break;case Jn:case qn.M:r(3,s=u("admin")),r(4,l=" member-block__label_admin")}}.bind(this),[o,a,f,s,l]}var ih=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Hl(this,t),(0,rf.TsN)(r,n,rh,th,rf.jXN,{isAuthor:0,perms:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Vl(n,t)}(t,n),function(n,t,r){return t&&ql(n.prototype,t),r&&ql(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const eh=ih;function oh(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:58,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:69;return"rgba(".concat(function(n,t,r){var i,e,o,u=n,c=t,a=r;isFinite(u)||(u=0),isFinite(c)||(c=0),isFinite(a)||(a=0),(u/=60)<0&&(u=6- -u%6),u%=6,c=Math.max(0,Math.min(1,c/100)),a=Math.max(0,Math.min(1,a/100));var f=(1-Math.abs(2*a-1))*c,s=f*(1-Math.abs(u%2-1));u<1?(i=f,e=s,o=0):u<2?(i=s,e=f,o=0):u<3?(i=0,e=f,o=s):u<4?(i=0,e=s,o=f):u<5?(i=s,e=0,o=f):(i=f,e=0,o=s);var l=a-f/2;return[i=Math.round(255*(i+l)),e=Math.round(255*(e+l)),o=Math.round(255*(o+l))]}(77*n%360,t+n%20,r+n%20).join(","),",1)")}function uh(n){return uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uh(n)}function ch(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,ah(i.key),i)}}function ah(n){var t=function(n,t){if("object"!=uh(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=uh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==uh(t)?t:t+""}function fh(n,t,r){return t=lh(t),function(n,t){if(t&&("object"==uh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,sh()?Reflect.construct(t,r||[],lh(n).constructor):t.apply(n,r))}function sh(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(sh=function(){return!!n})()}function lh(n){return lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lh(n)}function hh(n,t){return hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},hh(n,t)}function vh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function dh(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return bh(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bh(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bh(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function yh(n){var t,r,i=n[2][0]+"";return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","chat-avatar__text")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){4&t&&i!==(i=n[2][0]+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function ph(n){var t,r;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.mq_)(t.src,r=n[0].userAvatar)||(0,rf.CFu)(t,"src",r),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"title",n[2]),(0,rf.CFu)(t,"width",n[1]),(0,rf.CFu)(t,"height",n[1]),(0,rf.CFu)(t,"loading","lazy")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){1&i&&!(0,rf.mq_)(t.src,r=n[0].userAvatar)&&(0,rf.CFu)(t,"src",r),4&i&&(0,rf.CFu)(t,"title",n[2]),2&i&&(0,rf.CFu)(t,"width",n[1]),2&i&&(0,rf.CFu)(t,"height",n[1])},d:function(n){n&&(0,rf.YoD)(t)}}}function mh(n){var t;function r(n,t){return n[0].userAvatar?ph:yh}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("span"),e.c(),(0,rf.CFu)(t,"class","chat-avatar"),(0,rf.hgi)(t,"background",n[3])},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){var u=dh(o,1)[0];i===(i=r(n))&&e?e.p(n,u):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null))),8&u&&(0,rf.hgi)(t,"background",n[3])},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function wh(n,t,r){var i=this,e=t.data,o=t.size,c=void 0===o?40:o,a="",f="#4a76b8";return n.$$set=function(n){vh(this,i),"data"in n&&r(0,e=n.data),"size"in n&&r(1,c=n.size)}.bind(this),n.$$.update=function(){vh(this,i),1&n.$$.dirty&&(r(2,a=e.userName||"x"),e.isDeleted&&r(2,a=u("deletedAccount")),r(3,f=e.userAvatar?"transparent":oh(wt(e.userId),undefined,undefined)))}.bind(this),[e,c,a,f]}var gh=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=fh(this,t),(0,rf.TsN)(r,n,wh,mh,rf.jXN,{data:0,size:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&hh(n,t)}(t,n),function(n,t,r){return t&&ch(n.prototype,t),r&&ch(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const jh=gh;function _h(n){return _h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_h(n)}var Sh=undefined;function Oh(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Eh(i.key),i)}}function Eh(n){var t=function(n,t){if("object"!=_h(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=_h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==_h(t)?t:t+""}function Th(n,t,r){return t=Ch(t),function(n,t){if(t&&("object"==_h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,kh()?Reflect.construct(t,r||[],Ch(n).constructor):t.apply(n,r))}function kh(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(kh=function(){return!!n})()}function Ch(n){return Ch=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ch(n)}function xh(n,t){return xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},xh(n,t)}function Ah(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ih(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Mh(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mh(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mh(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Rh(n){var t,r;return t=new eh({props:{perms:n[2].perms,isAuthor:n[2].isAuthor}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};4&r&&(i.perms=n[2].perms),4&r&&(i.isAuthor=n[2].isAuthor),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Uh(n){var t,r,i=n[4]&&Ph(n),e=n[3]&&Bh(n);return{c:function(){t=(0,rf.ND4)("span"),i&&i.c(),r=(0,rf.xem)(),e&&e.c(),(0,rf.CFu)(t,"class","member-block__tools")},m:function(n,o){(0,rf.Yry)(n,t,o),i&&i.m(t,null),(0,rf.BCw)(t,r),e&&e.m(t,null)},p:function(n,o){n[4]?i?i.p(n,o):((i=Ph(n)).c(),i.m(t,r)):i&&(i.d(1),i=null),n[3]?e?e.p(n,o):((e=Bh(n)).c(),e.m(t,null)):e&&(e.d(1),e=null)},d:function(n){n&&(0,rf.YoD)(t),i&&i.d(),e&&e.d()}}}function Ph(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("i"),(0,rf.CFu)(t,"class","member-block__edit icons-chat icons-chat_edit"),(0,rf.CFu)(t,"title",u("edit"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=[(0,rf.KTR)(t,"keyup",$h),(0,rf.KTR)(t,"click",(0,rf.xZN)(n[9]))],r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,(0,rf.oOW)(i)}}}function Bh(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("i"),(0,rf.CFu)(t,"class","member-block__close icons-chat icons-chat_close"),(0,rf.CFu)(t,"title",u("delete"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=[(0,rf.KTR)(t,"keyup",Gh),(0,rf.KTR)(t,"click",(0,rf.xZN)(n[10]))],r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,(0,rf.oOW)(i)}}}function Nh(n){var t,r,i,e,o,c,a,f,s,l,h,v,d=(n[2].userName?n[2].userName:n[2].isDeleted?u("deletedAccount"):"")+"";i=new jh({props:{data:n[2],size:Dh}});var b="perms"in n[2]&&Rh(n),y=(n[3]||n[4])&&Uh(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("a"),(0,rf.N0i)(i.$$.fragment),e=(0,rf.xem)(),o=(0,rf.ND4)("a"),c=(0,rf.Qq7)(d),a=(0,rf.xem)(),b&&b.c(),f=(0,rf.xem)(),y&&y.c(),(0,rf.CFu)(r,"target","_blank"),(0,rf.CFu)(r,"href",n[6]),(0,rf.CFu)(r,"class","member-block__avatar"),(0,rf.CFu)(o,"target","_blank"),(0,rf.CFu)(o,"href",n[6]),(0,rf.CFu)(o,"class","member-block__name"),(0,rf.CFu)(t,"class",s="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":"")+(n[5]?" member-block_disabled":""))},m:function(u,s){(0,rf.Yry)(u,t,s),(0,rf.BCw)(t,r),(0,rf.wSR)(i,r,null),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(o,c),(0,rf.BCw)(o,a),b&&b.m(o,null),(0,rf.BCw)(o,f),y&&y.m(o,null),l=!0,h||(v=[(0,rf.KTR)(r,"click",n[7]),(0,rf.KTR)(o,"click",n[7])],h=!0)},p:function(n,r){var e=this,a=Ih(r,1)[0],h={};4&a&&(h.data=n[2]),i.$set(h),(!l||4&a)&&d!==(d=(n[2].userName?n[2].userName:n[2].isDeleted?u("deletedAccount"):"")+"")&&(0,rf.iQh)(c,d),"perms"in n[2]?b?(b.p(n,a),4&a&&(0,rf.c7F)(b,1)):((b=Rh(n)).c(),(0,rf.c7F)(b,1),b.m(o,f)):b&&((0,rf.V44)(),(0,rf.Tn8)(b,1,1,function(){Ah(this,e),b=null}.bind(this)),(0,rf.GYV)()),n[3]||n[4]?y?y.p(n,a):((y=Uh(n)).c(),y.m(o,null)):y&&(y.d(1),y=null),(!l||56&a&&s!==(s="member-block"+(n[3]?" member-block_width-delete":"")+(n[4]?" member-block_width-edit":"")+(n[5]?" member-block_disabled":"")))&&(0,rf.CFu)(t,"class",s)},i:function(n){l||((0,rf.c7F)(i.$$.fragment,n),(0,rf.c7F)(b),l=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),(0,rf.Tn8)(b),l=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(i),b&&b.d(),y&&y.d(),h=!1,(0,rf.oOW)(v)}}}var Dh=30,$h=function(){Ah(this,Sh)}.bind(undefined),Gh=function(){Ah(this,Sh)}.bind(undefined);function Lh(n,t,r){var i=this,e=t.member,o=t.canDelete,u=void 0!==o&&o,c=t.canEdit,a=void 0!==c&&c,f=t.toEdit,s=void 0===f?undefined:f,l=t.toDelete,h=void 0===l?undefined:l,v=t.linkPreventDefault,d=void 0!==v&&v,b=t.disabled,y=void 0!==b&&b,p=(0,cf.ur)(),m=e.userLogin?"/".concat(or,"/users/").concat((e.userLogin||"").toLowerCase()):undefined;var w=function(){Ah(this,i),r(0,s=e)}.bind(this),g=function(){Ah(this,i),r(1,h=e)}.bind(this);return n.$$set=function(n){Ah(this,i),"member"in n&&r(2,e=n.member),"canDelete"in n&&r(3,u=n.canDelete),"canEdit"in n&&r(4,a=n.canEdit),"toEdit"in n&&r(0,s=n.toEdit),"toDelete"in n&&r(1,h=n.toDelete),"linkPreventDefault"in n&&r(8,d=n.linkPreventDefault),"disabled"in n&&r(5,y=n.disabled)}.bind(this),[s,h,e,u,a,y,m,function(n){d&&n.preventDefault(),y||p("click")},d,w,g]}var zh=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Th(this,t),(0,rf.TsN)(r,n,Lh,Nh,rf.jXN,{member:2,canDelete:3,canEdit:4,toEdit:0,toDelete:1,linkPreventDefault:8,disabled:5}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xh(n,t)}(t,n),function(n,t,r){return t&&Oh(n.prototype,t),r&&Oh(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Fh=zh;function Wh(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var qh={};function Xh(n,t,r){var i=this,o=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined,u=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1,c=arguments.length>5&&arguments[5]!==undefined?arguments[5]:[];n&&(u>100?r&&r(c):ne(n,o,20).then(function(e){var o=this,a=e.data;if(Wh(this,i),a&&a.users&&a.users.length){a.users.forEach(function(n){Wh(this,o);var r=n.user,i=r.userId,e=r.userName,u=r.userLogin,a=r.userAvatar,f=r.isDeleted,s=t===i;c.push({isAuthor:s,perms:n.perms,userId:i,userName:e,userLogin:u,userAvatar:a,isDeleted:f})}.bind(this));var f=a.users[a.users.length-1].user.userId;Xh(n,t,r,f,++u,c)}else r&&r(c)}.bind(this))["catch"](function(n){Wh(this,i),y.error(e.T,n),r&&r(c)}.bind(this)))}function Hh(n,t){var r=this;return qh[n]||(qh[n]=(0,Ot.T5)([]),Xh(n,t,function(i){Wh(this,r),qh[n].set(function(n,t){var r=this;return n.sort(function(n,i){Wh(this,r);var e=n.userName||n.userLogin||"",o=i.userName||n.userLogin||"";return n.userId===t||n.perms>i.perms?-1:n.perms<i.perms?1:e.localeCompare(o)}.bind(this)),n}(i,t))}.bind(this))),qh[n]}function Jh(n){return Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Jh(n)}var Qh=undefined;function Vh(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Yh(i.key),i)}}function Yh(n){var t=function(n,t){if("object"!=Jh(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Jh(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Jh(t)?t:t+""}function Zh(n,t,r){return t=nv(t),function(n,t){if(t&&("object"==Jh(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Kh()?Reflect.construct(t,r||[],nv(n).constructor):t.apply(n,r))}function Kh(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Kh=function(){return!!n})()}function nv(n){return nv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},nv(n)}function tv(n,t){return tv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},tv(n,t)}function rv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function iv(n,t,r){var i=n.slice();return i[29]=t[r],i}function ev(n,t,r){var i=n.slice();return i[32]=t[r],i}function ov(n,t,r){var i=n.slice();return i[29]=t[r],i}var uv=function(n){return rv(this,Qh),{}}.bind(undefined),cv=function(n){return rv(this,Qh),{}}.bind(undefined);function av(n){var t;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("foundEmpty")),(0,rf.CFu)(t,"class","form-members-list__result-text")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function fv(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[3]),s=function(n){return rv(this,o),n[29].userId}.bind(this),l=0;l<f.length;l+=1){var h=ov(n,f,l),v=s(h);a.set(v,c[l]=lv(v,h))}return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("mql5Members")),r=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();i=(0,rf.Iex)(),(0,rf.CFu)(t,"class","form-members-list__title")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.Yry)(n,r,o);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(n,o);(0,rf.Yry)(n,i,o),e=!0},p:function(n,t){143&t[0]&&(f=(0,rf.rv_)(n[3]),(0,rf.V44)(),c=(0,rf.l7s)(c,t,s,1,n,f,a,i.parentNode,rf.XP4,lv,i,ov),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i));for(var e=0;e<c.length;e+=1)c[e].d(n)}}}function sv(n){var t;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("emptyAddMember")),(0,rf.CFu)(t,"class","form-members-list__result-text")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function lv(n,t){var r,i,e;return(i=new Fh({props:{linkPreventDefault:!0,disabled:t[7],member:t[29]}})).$on("click",function(){return t[21](t[29])}),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};128&r[0]&&(e.disabled=t[7]),8&r[0]&&(e.member=t[29]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function hv(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[5]),s=function(n){return rv(this,o),n[32].userId}.bind(this),l=0;l<f.length;l+=1){var h=ev(n,f,l),v=s(h);a.set(v,c[l]=vv(v,h))}return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("friends")),r=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();i=(0,rf.Iex)(),(0,rf.CFu)(t,"class","form-members-list__title")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.Yry)(n,r,o);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(n,o);(0,rf.Yry)(n,i,o),e=!0},p:function(n,t){162&t[0]&&(f=(0,rf.rv_)(n[5]),(0,rf.V44)(),c=(0,rf.l7s)(c,t,s,1,n,f,a,i.parentNode,rf.XP4,vv,i,ev),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i));for(var e=0;e<c.length;e+=1)c[e].d(n)}}}function vv(n,t){var r,i,e;return(i=new Fh({props:{linkPreventDefault:!0,disabled:t[7],member:t[32]}})).$on("click",function(){return t[22](t[32])}),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};128&r[0]&&(e.disabled=t[7]),32&r[0]&&(e.member=t[32]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function dv(n,t){var r,i,e,o,u=this;function c(n){t[23](n)}var a={linkPreventDefault:!0,member:t[29],canDelete:!0};return void 0!==t[4]&&(a.toDelete=t[4]),i=new Fh({props:a}),rf.Dnk.push(function(){return rv(this,u),(0,rf.oIE)(i,"toDelete",c)}.bind(this)),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),o=!0},p:function(n,r){var o=this;t=n;var u={};2&r[0]&&(u.member=t[29]),!e&&16&r[0]&&(e=!0,u.toDelete=t[4],(0,rf.Jk$)(function(){return rv(this,o),e=!1}.bind(this))),i.$set(u)},i:function(n){o||((0,rf.c7F)(i.$$.fragment,n),o=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),o=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function bv(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.Qq7)(n[6]),(0,rf.CFu)(r,"class","alert alert_danger"),(0,rf.CFu)(t,"class","form-members-add__errors")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i)},p:function(n,t){64&t[0]&&(0,rf.iQh)(i,n[6])},d:function(n){n&&(0,rf.YoD)(t)}}}function yv(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j,_,S,O,E=this,T=u("selectedMembers",n[1].length)+"",k=[],C=new Map,x=n[19].header,A=(0,rf.Of3)(x,n,n[25],cv),I=[sv,fv,av],M=[];function R(n,t){return n[0]?n[3].length?1:2:0}h=R(n),v=M[h]=I[h](n);for(var U=!n[0]&&n[5].length&&hv(n),P=(0,rf.rv_)(n[1]),B=function(n){return rv(this,E),n[29].userId}.bind(this),N=0;N<P.length;N+=1){var D=iv(n,P,N),$=B(D);C.set($,k[N]=dv($,D))}var G=n[6]&&bv(n);return{c:function(){t=(0,rf.ND4)("div"),A&&A.c(),r=(0,rf.xem)(),i=(0,rf.ND4)("div"),e=(0,rf.ND4)("div"),o=(0,rf.ND4)("div"),c=(0,rf.ND4)("i"),a=(0,rf.xem)(),f=(0,rf.ND4)("input"),s=(0,rf.xem)(),l=(0,rf.ND4)("div"),v.c(),d=(0,rf.xem)(),U&&U.c(),b=(0,rf.xem)(),y=(0,rf.ND4)("div"),p=(0,rf.ND4)("div"),m=(0,rf.Qq7)(T),w=(0,rf.xem)(),g=(0,rf.ND4)("div");for(var h=0;h<k.length;h+=1)k[h].c();j=(0,rf.xem)(),G&&G.c(),(0,rf.CFu)(c,"class","icons-chat icons-chat_search-gray"),(0,rf.Xrn)(f,"text"),(0,rf.CFu)(f,"class","input"),f.disabled=n[7],(0,rf.CFu)(f,"placeholder",u("searchMembers")),(0,rf.CFu)(o,"class","chat-members-search"),(0,rf.CFu)(l,"class","form-members-list"),(0,rf.CFu)(e,"class","form-members-add__left-part"),(0,rf.CFu)(p,"class","form-members-selected__title"),(0,rf.CFu)(g,"class","form-members-list"),(0,rf.CFu)(y,"class","form-members-add__right-part"),(0,rf.CFu)(i,"class","form-members-add__content"),(0,rf.CFu)(t,"slot","content"),(0,rf.CFu)(t,"class","form-members-add")},m:function(u,v){(0,rf.Yry)(u,t,v),A&&A.m(t,null),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(i,e),(0,rf.BCw)(e,o),(0,rf.BCw)(o,c),(0,rf.BCw)(o,a),(0,rf.BCw)(o,f),(0,rf.Gvd)(f,n[0]),(0,rf.BCw)(e,s),(0,rf.BCw)(e,l),M[h].m(l,null),(0,rf.BCw)(l,d),U&&U.m(l,null),(0,rf.BCw)(i,b),(0,rf.BCw)(i,y),(0,rf.BCw)(y,p),(0,rf.BCw)(p,m),(0,rf.BCw)(y,w),(0,rf.BCw)(y,g);for(var E=0;E<k.length;E+=1)k[E]&&k[E].m(g,null);(0,rf.BCw)(i,j),G&&G.m(i,null),_=!0,S||(O=(0,rf.KTR)(f,"input",n[20]),S=!0)},p:function(n,t){var r=this;A&&A.p&&(!_||33554432&t[0])&&(0,rf.nkG)(A,x,n,n[25],_?(0,rf.sWk)(x,n[25],t,uv):(0,rf.i32)(n[25]),cv),(!_||128&t[0])&&(f.disabled=n[7]),1&t[0]&&f.value!==n[0]&&(0,rf.Gvd)(f,n[0]);var e=h;(h=R(n))===e?M[h].p(n,t):((0,rf.V44)(),(0,rf.Tn8)(M[e],1,1,function(){rv(this,r),M[e]=null}.bind(this)),(0,rf.GYV)(),(v=M[h])?v.p(n,t):(v=M[h]=I[h](n)).c(),(0,rf.c7F)(v,1),v.m(l,d)),!n[0]&&n[5].length?U?(U.p(n,t),33&t[0]&&(0,rf.c7F)(U,1)):((U=hv(n)).c(),(0,rf.c7F)(U,1),U.m(l,null)):U&&((0,rf.V44)(),(0,rf.Tn8)(U,1,1,function(){rv(this,r),U=null}.bind(this)),(0,rf.GYV)()),(!_||2&t[0])&&T!==(T=u("selectedMembers",n[1].length)+"")&&(0,rf.iQh)(m,T),18&t[0]&&(P=(0,rf.rv_)(n[1]),(0,rf.V44)(),k=(0,rf.l7s)(k,t,B,1,n,P,C,g,rf.XP4,dv,null,iv),(0,rf.GYV)()),n[6]?G?G.p(n,t):((G=bv(n)).c(),G.m(i,null)):G&&(G.d(1),G=null)},i:function(n){if(!_){(0,rf.c7F)(A,n),(0,rf.c7F)(v),(0,rf.c7F)(U);for(var t=0;t<P.length;t+=1)(0,rf.c7F)(k[t]);_=!0}},o:function(n){(0,rf.Tn8)(A,n),(0,rf.Tn8)(v),(0,rf.Tn8)(U);for(var t=0;t<k.length;t+=1)(0,rf.Tn8)(k[t]);_=!1},d:function(n){n&&(0,rf.YoD)(t),A&&A.d(n),M[h].d(),U&&U.d();for(var r=0;r<k.length;r+=1)k[r].d();G&&G.d(),S=!1,O()}}}function pv(n){var t,r,i,e,o,c,a,f,s=u("append")+"";return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.ND4)("button"),i=(0,rf.Qq7)(s),o=(0,rf.xem)(),(c=(0,rf.ND4)("button")).textContent="".concat(u("close")),(0,rf.CFu)(r,"class","button button_green qa-dialog-ok"),r.disabled=e=!n[1].length,(0,rf.CFu)(c,"class","button button_white qa-dialog-cancel"),(0,rf.CFu)(t,"slot","buttons")},m:function(e,u){(0,rf.Yry)(e,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(t,o),(0,rf.BCw)(t,c),a||(f=[(0,rf.KTR)(r,"click",n[11]),(0,rf.KTR)(c,"click",n[10])],a=!0)},p:function(n,t){2&t[0]&&e!==(e=!n[1].length)&&(r.disabled=e)},d:function(n){n&&(0,rf.YoD)(t),a=!1,(0,rf.oOW)(f)}}}function mv(n){var t,r;return(t=new Cs({props:{withTitle:!1,$$slots:{buttons:[pv],content:[yv]},$$scope:{ctx:n}}})).$on("close",n[24]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};33554687&r[0]&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function wv(n,t,r){var i,o,c,a=this,f=t.$$slots,s=void 0===f?{}:f,l=t.$$scope,h=t.chat,v=(0,cf.ur)(),d={},b=Hh(h.chatId,h.authorId);(0,rf.j0C)(n,b,function(n){return rv(this,a),r(18,c=n)}.bind(this));var p=[],m="",w=[],g=zl();(0,rf.j0C)(n,g,function(n){return rv(this,a),r(17,o=n)}.bind(this));var j,_,S,O=[],E=[],T=[],k="";function C(){if(o&&c){var n=0;r(5,O=[]);for(var t=0,i=o.length;t<i;t++){var e=o[t];if(!~p.indexOf(e.userId)&&(O.push(e),++n>=3))break}}}var x=qe(function(n){var t=this;rv(this,a),ue(n,30).then(function(i){rv(this,t),r(13,d[n]=i,d),r(2,E=i)}.bind(this))["catch"](function(n){rv(this,t),y.error(e.USER,n)}.bind(this))}.bind(this),300),A=function(){rv(this,a),v("close")}.bind(this),I=function(){var n=this;rv(this,a);var t=h.type===On?qn.WRITE:qn.READ,i="";r(6,k="");var o=[];w.forEach(function(u){var c=this;rv(this,n),o.push(re(h.chatId,u.userId,t).then(function(n){rv(this,c),Lf(n);var i=n.chatId,e=u;e.perms=t,r(12,h.countMembers++,h),function(n,t){var r=this;qh[n]&&qh[n].update(function(n){Wh(this,r);for(var i=-1,e=0,o=n.length;e<o;e++)if(n[e].userId==t.userId){i=e;break}return~i?n.splice(i,1,t):n.push(t),n}.bind(this))}(i,e)}.bind(this))["catch"](function(n){rv(this,c),i&&(i+=" ,"),i+=u.userName,y.error(e.USER,n)}.bind(this)))}.bind(this)),Promise.allSettled(o).then(function(){var t=this;rv(this,n),i?r(6,k=u("notAllowedAdd",i)):A(),r(1,w=[]),Po.update(function(n){return rv(this,t),n?(h.chatId===(null==n?void 0:n.chatId)&&(n.countMembers=h.countMembers),n):n}.bind(this))}.bind(this))}.bind(this);var M=function(n){rv(this,a),r(1,w=w.concat([n])),r(0,m=""),r(2,E=[])}.bind(this),R=function(n){rv(this,a),r(1,w=w.concat([n]))}.bind(this);return n.$$set=function(n){rv(this,a),"chat"in n&&r(12,h=n.chat),"$$scope"in n&&r(25,l=n.$$scope)}.bind(this),n.$$.update=function(){var t=this;if(rv(this,a),18&n.$$.dirty[0]&&j){for(var e=w,u=0,f=e.length;u<f;u++)if(e[u].userId===j.userId){e.splice(u,1);break}r(1,w=e),r(4,j=undefined)}if(278530&n.$$.dirty[0]&&c&&(r(14,p=[]),c.forEach(function(n){rv(this,t),p.push(n.userId)}.bind(this)),w&&w.forEach(function(n){rv(this,t),p.push(n.userId)}.bind(this))),8193&n.$$.dirty[0]&&m&&(d[m]?r(2,E=d[m]):x(m)),16396&n.$$.dirty[0]&&E){r(3,T=[]);for(var s=0,l=E.length;s<l;s++){var h=E[s];~p.indexOf(h.userId)||T.push(h)}}294912&n.$$.dirty[0]&&!_&&c&&r(15,_=b.subscribe(C)),196608&n.$$.dirty[0]&&!S&&o&&r(16,S=g.subscribe(C)),16384&n.$$.dirty[0]&&p&&C(),2&n.$$.dirty[0]&&r(7,i=w.length>=50)}.bind(this),[m,w,E,T,j,O,k,i,b,g,A,I,h,d,p,_,S,o,c,s,function(){m=this.value,r(0,m)},M,R,function(n){r(4,j=n),r(1,w)},function(t){rf.Tq.call(this,n,t)},l]}var gv=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Zh(this,t),(0,rf.TsN)(r,n,wv,mv,rf.jXN,{chat:12},null,[-1,-1]),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&tv(n,t)}(t,n),function(n,t,r){return t&&Vh(n.prototype,t),r&&Vh(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const jv=gv;function _v(n){return _v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_v(n)}function Sv(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ov(i.key),i)}}function Ov(n){var t=function(n,t){if("object"!=_v(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=_v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==_v(t)?t:t+""}function Ev(n,t,r){return t=kv(t),function(n,t){if(t&&("object"==_v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Tv()?Reflect.construct(t,r||[],kv(n).constructor):t.apply(n,r))}function Tv(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Tv=function(){return!!n})()}function kv(n){return kv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kv(n)}function Cv(n,t){return Cv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Cv(n,t)}function xv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Av(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Iv(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Iv(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Iv(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Mv(n){var t,r,i,e=(null===(t=n[0])||void 0===t?void 0:t.userName)+"";return{c:function(){r=(0,rf.ND4)("span"),i=(0,rf.Qq7)(e),(0,rf.CFu)(r,"slot","title")},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.BCw)(r,i)},p:function(n,t){var r;1&t&&e!==(e=(null===(r=n[0])||void 0===r?void 0:r.userName)+"")&&(0,rf.iQh)(i,e)},d:function(n){n&&(0,rf.YoD)(r)}}}function Rv(n){var t,r;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(n[7]),(0,rf.CFu)(t,"class","alert alert_danger")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){128&t&&(0,rf.iQh)(r,n[7])},d:function(n){n&&(0,rf.YoD)(t)}}}function Uv(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j,_,S=u("moderatorDesc")+"",O=u("adminDesc")+"",E=n[7]&&Rv(n);return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("permissions"),":"),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),o=(0,rf.ND4)("input"),(c=(0,rf.ND4)("label")).textContent="".concat(u("postMessages")),a=(0,rf.xem)(),f=(0,rf.ND4)("div"),s=(0,rf.ND4)("input"),(l=(0,rf.ND4)("label")).textContent="".concat(u("moderator")),h=(0,rf.xem)(),v=(0,rf.ND4)("div"),d=(0,rf.xem)(),b=(0,rf.ND4)("div"),y=(0,rf.ND4)("input"),(p=(0,rf.ND4)("label")).textContent="".concat(u("admin")),m=(0,rf.xem)(),w=(0,rf.ND4)("div"),g=(0,rf.xem)(),E&&E.c(),(0,rf.CFu)(r,"class","member-edit-perms__title"),(0,rf.Xrn)(o,"checkbox"),(0,rf.CFu)(o,"class","toggle-btn__checkbox"),(0,rf.CFu)(o,"name","write"),(0,rf.CFu)(o,"id","checkboxWrite"),o.disabled=n[1],(0,rf.CFu)(c,"for","checkboxWrite"),(0,rf.CFu)(e,"class","toggle-btn"),(0,rf.Xrn)(s,"checkbox"),(0,rf.CFu)(s,"class","toggle-btn__checkbox"),(0,rf.CFu)(s,"name","moderate"),(0,rf.CFu)(s,"id","checkboxModerate"),s.disabled=n[3],(0,rf.CFu)(l,"for","checkboxModerate"),(0,rf.CFu)(f,"class","toggle-btn"),(0,rf.CFu)(v,"class","chat-prompt"),(0,rf.Xrn)(y,"checkbox"),(0,rf.CFu)(y,"class","toggle-btn__checkbox"),(0,rf.CFu)(y,"name","admin"),(0,rf.CFu)(y,"id","checkboxAdmin"),y.disabled=n[6],(0,rf.CFu)(p,"for","checkboxAdmin"),(0,rf.CFu)(b,"class","toggle-btn"),(0,rf.CFu)(w,"class","chat-prompt"),(0,rf.CFu)(t,"slot","content"),(0,rf.CFu)(t,"class","member-edit-perms")},m:function(u,T){(0,rf.Yry)(u,t,T),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(e,o),o.checked=n[2],(0,rf.BCw)(e,c),(0,rf.BCw)(t,a),(0,rf.BCw)(t,f),(0,rf.BCw)(f,s),s.checked=n[4],(0,rf.BCw)(f,l),(0,rf.BCw)(t,h),(0,rf.BCw)(t,v),v.innerHTML=S,(0,rf.BCw)(t,d),(0,rf.BCw)(t,b),(0,rf.BCw)(b,y),y.checked=n[5],(0,rf.BCw)(b,p),(0,rf.BCw)(t,m),(0,rf.BCw)(t,w),w.innerHTML=O,(0,rf.BCw)(t,g),E&&E.m(t,null),j||(_=[(0,rf.KTR)(o,"change",n[11]),(0,rf.KTR)(o,"change",n[12]),(0,rf.KTR)(s,"change",n[13]),(0,rf.KTR)(s,"change",n[14]),(0,rf.KTR)(y,"change",n[15]),(0,rf.KTR)(y,"change",n[16])],j=!0)},p:function(n,r){2&r&&(o.disabled=n[1]),4&r&&(o.checked=n[2]),8&r&&(s.disabled=n[3]),16&r&&(s.checked=n[4]),64&r&&(y.disabled=n[6]),32&r&&(y.checked=n[5]),n[7]?E?E.p(n,r):((E=Rv(n)).c(),E.m(t,null)):E&&(E.d(1),E=null)},d:function(n){n&&(0,rf.YoD)(t),E&&E.d(),j=!1,(0,rf.oOW)(_)}}}function Pv(n){var t,r,i,e,o,c,a,f,s=u("save")+"";return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.ND4)("button"),i=(0,rf.Qq7)(s),o=(0,rf.xem)(),(c=(0,rf.ND4)("button")).textContent="".concat(u("close")),(0,rf.CFu)(r,"class","button button_green qa-dialog-ok"),r.disabled=e=!!n[7],(0,rf.CFu)(c,"class","button button_white qa-dialog-cancel"),(0,rf.CFu)(t,"slot","buttons")},m:function(e,u){(0,rf.Yry)(e,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(t,o),(0,rf.BCw)(t,c),a||(f=[(0,rf.KTR)(r,"click",n[9]),(0,rf.KTR)(c,"click",n[8])],a=!0)},p:function(n,t){128&t&&e!==(e=!!n[7])&&(r.disabled=e)},d:function(n){n&&(0,rf.YoD)(t),a=!1,(0,rf.oOW)(f)}}}function Bv(n){var t,r;return(t=new Cs({props:{$$slots:{buttons:[Pv],content:[Uv],title:[Mv]},$$scope:{ctx:n}}})).$on("close",n[8]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i=Av(r,1)[0],e={};262399&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Nv(n,t,r){var i=this,o=t.chat,u=t.member,c=!1,a=!1,f=!1,s=!1,l=!1,h=!1,v="",d=o.perms&qn.M;for(var b in qn)if(Object.prototype.hasOwnProperty.call(qn,b)){if(!u)break;var p=qn[b],m=!!(p&u.perms),w=u.perms>=o.perms&&!d;switch(p){case qn.WRITE:c=w,a=m;break;case qn.I:f=!d,s=m;break;case qn.M:h=!d,l=m}}var g=function(){xv(this,i),r(0,u=undefined)}.bind(this),j=function(){var n=this;if(xv(this,i),u){var t=0;a&&(t|=qn.WRITE),s&&(t|=qn.I),l&&(t|=qn.M),re(o.chatId,u.userId,t).then(function(t){xv(this,n),Lf(t),function(n,t,r){var i=this;qh[n]&&qh[n].update(function(n){Wh(this,i);for(var e=0,o=n.length;e<o;e++)if(n[e].userId===t){n[e].perms=r;break}return n}.bind(this))}(t.chatId,t.userId,t.perm),g()}.bind(this))["catch"](function(t){xv(this,n),y.error(e.USER,t),r(7,v=t.message)}.bind(this))}}.bind(this);var _=function(){xv(this,i),a||(r(4,s=!1),r(5,l=!1))}.bind(this);var S=function(){xv(this,i),s?r(2,a=!0):r(5,l=!1)}.bind(this);var O=function(){xv(this,i),l&&(r(2,a=!0),r(4,s=!0))}.bind(this);return n.$$set=function(n){xv(this,i),"chat"in n&&r(10,o=n.chat),"member"in n&&r(0,u=n.member)}.bind(this),[u,c,a,f,s,l,h,v,g,j,o,function(){a=this.checked,r(2,a)},_,function(){s=this.checked,r(4,s)},S,function(){l=this.checked,r(5,l)},O]}var Dv=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Ev(this,t),(0,rf.TsN)(r,n,Nv,Bv,rf.jXN,{chat:10,member:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Cv(n,t)}(t,n),function(n,t,r){return t&&Sv(n.prototype,t),r&&Sv(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const $v=Dv;function Gv(n){return Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Gv(n)}function Lv(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,zv(i.key),i)}}function zv(n){var t=function(n,t){if("object"!=Gv(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Gv(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Gv(t)?t:t+""}function Fv(n,t,r){return t=qv(t),function(n,t){if(t&&("object"==Gv(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Wv()?Reflect.construct(t,r||[],qv(n).constructor):t.apply(n,r))}function Wv(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Wv=function(){return!!n})()}function qv(n){return qv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},qv(n)}function Xv(n,t){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Xv(n,t)}function Hv(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Jv(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jv(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jv(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Qv(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Vv(n){(0,rf.kZQ)(n,"c-98nz01",".chat-members-list.c-98nz01{height:400px;max-height:100%;margin-left:16px}.chat-members-list__content.c-98nz01{padding-top:16px}.alert.c-98nz01{margin-right:16px}.and-more-users.c-98nz01{height:33px;margin-bottom:12px;display:flex;align-items:center;justify-content:center;color:#767676}")}function Yv(n,t,r){var i=n.slice();return i[22]=t[r],i}function Zv(n){for(var t,r,i=this,e=[],o=new Map,u=(0,rf.rv_)(n[6]),c=function(n){return Qv(this,i),n[22].userId}.bind(this),a=0;a<u.length;a+=1){var f=Yv(n,u,a),s=c(f);o.set(s,e[a]=rd(s,f))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=(0,rf.Iex)()},m:function(n,i){for(var o=0;o<e.length;o+=1)e[o]&&e[o].m(n,i);(0,rf.Yry)(n,t,i),r=!0},p:function(n,r){966&r&&(u=(0,rf.rv_)(n[6]),(0,rf.V44)(),e=(0,rf.l7s)(e,r,c,1,n,u,o,t.parentNode,rf.XP4,rd,t,Yv),(0,rf.GYV)())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)(0,rf.c7F)(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)(0,rf.Tn8)(e[t]);r=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<e.length;r+=1)e[r].d(n)}}}function Kv(n){var t;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("errorUserNotFound")),(0,rf.CFu)(t,"class","alert alert_warning c-98nz01")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function nd(n){var t,r,i,e,o=this;function u(t){n[16](t)}function c(t){n[17](t)}var a={member:n[22],canEdit:n[25],canDelete:n[25]};return void 0!==n[7]&&(a.toEdit=n[7]),void 0!==n[1]&&(a.toDelete=n[1]),t=new Fh({props:a}),rf.Dnk.push(function(){return Qv(this,o),(0,rf.oIE)(t,"toEdit",u)}.bind(this)),rf.Dnk.push(function(){return Qv(this,o),(0,rf.oIE)(t,"toDelete",c)}.bind(this)),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,r){(0,rf.wSR)(t,n,r),e=!0},p:function(n,e){var o=this,u={};64&e&&(u.member=n[22]),836&e&&(u.canEdit=n[25]),836&e&&(u.canDelete=n[25]),!r&&128&e&&(r=!0,u.toEdit=n[7],(0,rf.Jk$)(function(){return Qv(this,o),r=!1}.bind(this))),!i&&2&e&&(i=!0,u.toDelete=n[1],(0,rf.Jk$)(function(){return Qv(this,o),i=!1}.bind(this))),t.$set(u)},i:function(n){e||((0,rf.c7F)(t.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),e=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function td(n){var t,r,i=n[22].text+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","and-more-users c-98nz01")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){64&t&&i!==(i=n[22].text+"")&&(0,rf.iQh)(r,i)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function rd(n,t){var r,i,e,o,u,c=[td,nd],a=[];function f(n,t){return-1===n[22].userId?0:1}function s(n,t){return 1===t?function(n){var t=n.slice(),r=!($e===t[22].userId||!t[9]||!(t[2].perms>t[22].perms||t[8]));return t[25]=r,t}(n):n}return i=f(t),e=a[i]=c[i](s(t,i)),{key:n,first:null,c:function(){r=(0,rf.Iex)(),e.c(),o=(0,rf.Iex)(),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),a[i].m(n,t),(0,rf.Yry)(n,o,t),u=!0},p:function(n,r){var u=this,l=i;(i=f(t=n))===l?a[i].p(s(t,i),r):((0,rf.V44)(),(0,rf.Tn8)(a[l],1,1,function(){Qv(this,u),a[l]=null}.bind(this)),(0,rf.GYV)(),(e=a[i])?e.p(s(t,i),r):(e=a[i]=c[i](s(t,i))).c(),(0,rf.c7F)(e,1),e.m(o.parentNode,o))},i:function(n){u||((0,rf.c7F)(e),u=!0)},o:function(n){(0,rf.Tn8)(e),u=!1},d:function(n){n&&((0,rf.YoD)(r),(0,rf.YoD)(o)),a[i].d(n)}}}function id(n){var t,r,i,e=this;function o(t){n[19](t)}var u={chat:n[2]};return void 0!==n[7]&&(u.member=n[7]),t=new $v({props:u}),rf.Dnk.push(function(){return Qv(this,e),(0,rf.oIE)(t,"member",o)}.bind(this)),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,r){(0,rf.wSR)(t,n,r),i=!0},p:function(n,i){var e=this,o={};4&i&&(o.chat=n[2]),!r&&128&i&&(r=!0,o.member=n[7],(0,rf.Jk$)(function(){return Qv(this,e),r=!1}.bind(this))),t.$set(o)},i:function(n){i||((0,rf.c7F)(t.$$.fragment,n),i=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),i=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function ed(n){var t,r,i,e,o,u,c,a,f,s,l,h=[Kv,Zv],v=[];function d(n,t){return n[0]&&!n[6].length?0:1}o=d(n),u=v[o]=h[o](n);var b=n[7]&&id(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),u.c(),c=(0,rf.xem)(),b&&b.c(),a=(0,rf.Iex)(),(0,rf.hgi)(r,"height",n[3]+"px"),(0,rf.CFu)(e,"class","chat-members-list__content c-98nz01"),(0,rf.hgi)(e,"transform","translate3d(0,"+n[5]+"px,0)"),(0,rf.CFu)(t,"class","chat-members-list c-98nz01")},m:function(u,h){(0,rf.Yry)(u,t,h),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),v[o].m(e,null),n[18](t),(0,rf.Yry)(u,c,h),b&&b.m(u,h),(0,rf.Yry)(u,a,h),f=!0,s||(l=(0,rf.KTR)(t,"scroll",sa(n[11],100)),s=!0)},p:function(n,t){var i=this,c=Hv(t,1)[0];(!f||8&c)&&(0,rf.hgi)(r,"height",n[3]+"px");var s=o;(o=d(n))===s?v[o].p(n,c):((0,rf.V44)(),(0,rf.Tn8)(v[s],1,1,function(){Qv(this,i),v[s]=null}.bind(this)),(0,rf.GYV)(),(u=v[o])?u.p(n,c):(u=v[o]=h[o](n)).c(),(0,rf.c7F)(u,1),u.m(e,null)),(!f||32&c)&&(0,rf.hgi)(e,"transform","translate3d(0,"+n[5]+"px,0)"),n[7]?b?(b.p(n,c),128&c&&(0,rf.c7F)(b,1)):((b=id(n)).c(),(0,rf.c7F)(b,1),b.m(a.parentNode,a)):b&&((0,rf.V44)(),(0,rf.Tn8)(b,1,1,function(){Qv(this,i),b=null}.bind(this)),(0,rf.GYV)())},i:function(n){f||((0,rf.c7F)(u),(0,rf.c7F)(b),f=!0)},o:function(n){(0,rf.Tn8)(u),(0,rf.Tn8)(b),f=!1},d:function(r){r&&((0,rf.YoD)(t),(0,rf.YoD)(c),(0,rf.YoD)(a)),v[o].d(),n[18](null),b&&b.d(r),s=!1,l()}}}function od(n,t,r){var i,o,c,a,f=this;(0,rf.j0C)(n,Po,function(n){return Qv(this,f),r(2,c=n)}.bind(this));var s=t.searchText,l=void 0===s?"":s,h=Hh(c.chatId,c.authorId);(0,rf.j0C)(n,h,function(n){return Qv(this,f),r(15,a=n)}.bind(this));var v,d,b,p=0,m=0,w=0,g=[],j=g.length,_=!1,S=[];function O(){var n=v.offsetHeight;m=Math.floor(n/45)}function E(){if(v){var n=v.scrollTop,t=Math.floor(n/45),i=t-m;i<0&&(i=0),r(5,w=Math.ceil(45*i));var e=t-m;e<0&&(e=0);var o=t+2*m;r(6,g=S.slice(e,o)),c.countMembers>2e3&&o>=j&&_&&g.length&&g.push({userId:-1,text:u("andMoreMembers",c.countMembers-j)})}}return(0,cf.Rc)(function(){var n=this;return Qv(this,f),window.addEventListener("resize",O),O(),E(),function(){Qv(this,n),window.removeEventListener("resize",O)}.bind(this)}.bind(this)),n.$$set=function(n){Qv(this,f),"searchText"in n&&r(0,l=n.searchText)}.bind(this),n.$$.update=function(){var t=this;if(Qv(this,f),6&n.$$.dirty&&b&&(re(c.chatId,b.userId,0,!0).then(function(n){Qv(this,t),Lf(n);var r=n.chatId,i=n.userId;n.isDelete&&(!function(n,t){var r=this;qh[n]&&qh[n].update(function(n){Wh(this,r);for(var i=0,e=n.length;i<e;i++)if(n[i].userId===t){n.splice(i,1);break}return n}.bind(this))}(r,i),(0,rf.vu6)(Po,c.countMembers--,c))}.bind(this))["catch"](function(n){Qv(this,t),y.error(e.USER,n)}.bind(this)),r(1,b=undefined)),4&n.$$.dirty&&r(9,i=c.perms&qn.I),4&n.$$.dirty&&r(8,o=c.perms&qn.M),32769&n.$$.dirty)if(l){var u=l.toLowerCase();r(14,S=a.filter(function(n){return Qv(this,t),!(!(null==n?void 0:n.userName)||!(null==n?void 0:n.userLogin))&&(~n.userName.toLowerCase().indexOf(u)||~n.userLogin.toLowerCase().indexOf(u))}.bind(this)))}else r(14,S=a);16384&n.$$.dirty&&S&&E(),28676&n.$$.dirty&&(r(12,j=S.length),r(13,_=c.countMembers>j),r(3,p=45*(j+(_?1:0))))}.bind(this),[l,b,c,p,v,w,g,d,o,i,h,E,j,_,S,a,function(n){r(7,d=n)},function(n){r(1,b=n),r(2,c)},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){Qv(this,t),r(4,v=n)}.bind(this))},function(n){r(7,d=n)}]}var ud=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Fv(this,t),(0,rf.TsN)(r,n,od,ed,rf.jXN,{searchText:0},Vv),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Xv(n,t)}(t,n),function(n,t,r){return t&&Lv(n.prototype,t),r&&Lv(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const cd=ud;function ad(n){return ad="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ad(n)}function fd(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,sd(i.key),i)}}function sd(n){var t=function(n,t){if("object"!=ad(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=ad(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==ad(t)?t:t+""}function ld(n,t,r){return t=vd(t),function(n,t){if(t&&("object"==ad(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,hd()?Reflect.construct(t,r||[],vd(n).constructor):t.apply(n,r))}function hd(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(hd=function(){return!!n})()}function vd(n){return vd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vd(n)}function dd(n,t){return dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},dd(n,t)}function bd(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return yd(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yd(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yd(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function pd(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function md(n){(0,rf.kZQ)(n,"c-x37lsg",".chat-members-window.c-x37lsg{width:600px;max-width:100%}.chat-members-window__add.c-x37lsg{float:left;margin-left:0}")}function wd(n){var t,r;return(t=new Cs({props:{withTitle:!1,$$slots:{buttons:[_d],content:[gd]},$$scope:{ctx:n}}})).$on("close",n[7]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};4110&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function gd(n){var t,r,i,e,o,c,a,f,s,l;return a=new cd({props:{searchText:n[1]}}),{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("i"),e=(0,rf.xem)(),o=(0,rf.ND4)("input"),c=(0,rf.xem)(),(0,rf.N0i)(a.$$.fragment),(0,rf.CFu)(i,"class","icons-chat icons-chat_search-gray"),(0,rf.Xrn)(o,"text"),(0,rf.CFu)(o,"class","input"),(0,rf.CFu)(o,"placeholder",u("searchMembers")),(0,rf.CFu)(r,"class","chat-members-search"),(0,rf.CFu)(t,"slot","content"),(0,rf.CFu)(t,"class","chat-members-window c-x37lsg")},m:function(u,h){(0,rf.Yry)(u,t,h),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),(0,rf.BCw)(r,o),(0,rf.Gvd)(o,n[1]),(0,rf.BCw)(t,c),(0,rf.wSR)(a,t,null),f=!0,s||(l=(0,rf.KTR)(o,"input",n[6]),s=!0)},p:function(n,t){2&t&&o.value!==n[1]&&(0,rf.Gvd)(o,n[1]);var r={};2&t&&(r.searchText=n[1]),a.$set(r)},i:function(n){f||((0,rf.c7F)(a.$$.fragment,n),f=!0)},o:function(n){(0,rf.Tn8)(a.$$.fragment,n),f=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(a),s=!1,l()}}}function jd(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).textContent="".concat(u("addMembers")),(0,rf.CFu)(t,"class","button button_blue-and-white chat-members-window__add qa-add-members c-x37lsg")},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",n[5]),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function _d(n){var t,r,i,e,o,c=n[3]&&jd(n);return{c:function(){t=(0,rf.ND4)("span"),c&&c.c(),r=(0,rf.xem)(),(i=(0,rf.ND4)("button")).textContent="".concat(u("close")),(0,rf.CFu)(i,"class","button button_white qa-dialog-cancel"),(0,rf.CFu)(t,"slot","buttons")},m:function(u,a){(0,rf.Yry)(u,t,a),c&&c.m(t,null),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),e||(o=(0,rf.KTR)(i,"click",n[4]),e=!0)},p:function(n,i){n[3]?c?c.p(n,i):((c=jd(n)).c(),c.m(t,r)):c&&(c.d(1),c=null)},d:function(n){n&&(0,rf.YoD)(t),c&&c.d(),e=!1,o()}}}function Sd(n){var t,r,i,e=this;function o(t){n[9](t)}var u={$$slots:{header:[Od]},$$scope:{ctx:n}};return void 0!==n[0]&&(u.chat=n[0]),t=new jv({props:u}),rf.Dnk.push(function(){return pd(this,e),(0,rf.oIE)(t,"chat",o)}.bind(this)),t.$on("close",n[10]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,r){(0,rf.wSR)(t,n,r),i=!0},p:function(n,i){var e=this,o={};4100&i&&(o.$$scope={dirty:i,ctx:n}),!r&&1&i&&(r=!0,o.chat=n[0],(0,rf.Jk$)(function(){return pd(this,e),r=!1}.bind(this))),t.$set(o)},i:function(n){i||((0,rf.c7F)(t.$$.fragment,n),i=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),i=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Od(n){var t,r,i,e,o,c,a=u("addMembers")+"";return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_back-gray"></i>',i=(0,rf.xem)(),e=(0,rf.Qq7)(a),(0,rf.CFu)(r,"title",u("back")),(0,rf.CFu)(r,"class","form-members-add__header-button"),(0,rf.CFu)(t,"slot","header"),(0,rf.CFu)(t,"class","form-members-add__header")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),o||(c=(0,rf.KTR)(r,"click",n[8]),o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,c()}}}function Ed(n){var t,r,i,e=!n[2]&&wd(n),o=n[2]&&Sd(n);return{c:function(){e&&e.c(),t=(0,rf.xem)(),o&&o.c(),r=(0,rf.Iex)()},m:function(n,u){e&&e.m(n,u),(0,rf.Yry)(n,t,u),o&&o.m(n,u),(0,rf.Yry)(n,r,u),i=!0},p:function(n,i){var u=this,c=bd(i,1)[0];n[2]?e&&((0,rf.V44)(),(0,rf.Tn8)(e,1,1,function(){pd(this,u),e=null}.bind(this)),(0,rf.GYV)()):e?(e.p(n,c),4&c&&(0,rf.c7F)(e,1)):((e=wd(n)).c(),(0,rf.c7F)(e,1),e.m(t.parentNode,t)),n[2]?o?(o.p(n,c),4&c&&(0,rf.c7F)(o,1)):((o=Sd(n)).c(),(0,rf.c7F)(o,1),o.m(r.parentNode,r)):o&&((0,rf.V44)(),(0,rf.Tn8)(o,1,1,function(){pd(this,u),o=null}.bind(this)),(0,rf.GYV)())},i:function(n){i||((0,rf.c7F)(e),(0,rf.c7F)(o),i=!0)},o:function(n){(0,rf.Tn8)(e),(0,rf.Tn8)(o),i=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r)),e&&e.d(n),o&&o.d(n)}}}function Td(n,t,r){var i,e,o=this;(0,rf.j0C)(n,Po,function(n){return pd(this,o),r(0,e=n)}.bind(this));var u=(0,cf.ur)(),c="",a=!1,f=function(){pd(this,o),u("close")}.bind(this),s=function(){pd(this,o),r(2,a=!0)}.bind(this);var l=function(){pd(this,o),r(2,a=!1)}.bind(this);var h=function(){pd(this,o),r(2,a=!1)}.bind(this);return n.$$.update=function(){var t;pd(this,o),1&n.$$.dirty&&r(3,i=(t=e).type===On&&t.isSubscribed&&!t.isLimited||!!(t.perms&qn.I))}.bind(this),[e,c,a,i,f,s,function(){c=this.value,r(1,c)},function(t){rf.Tq.call(this,n,t)},l,function(n){e=n,Po.set(e)},h]}var kd=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=ld(this,t),(0,rf.TsN)(r,n,Td,Ed,rf.jXN,{},md),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&dd(n,t)}(t,n),function(n,t,r){return t&&fd(n.prototype,t),r&&fd(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Cd=kd;function xd(n){return xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},xd(n)}function Ad(n){return function(n){if(Array.isArray(n))return Id(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return Id(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Id(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Id(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Md(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Rd(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ud(i.key),i)}}function Ud(n){var t=function(n,t){if("object"!=xd(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=xd(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==xd(t)?t:t+""}var Pd,Bd,Nd,Dd=undefined&&undefined.__classPrivateFieldSet||function(n,t,r,i,e){if("m"===i)throw new TypeError("Private method is not writable");if("a"===i&&!e)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?n!==t||!e:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===i?e.call(n,r):e?e.value=r:t.set(n,r),r},$d=undefined&&undefined.__classPrivateFieldGet||function(n,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(n):i?i.value:t.get(n)},Gd=0,Ld=1,zd=2,Fd=3,Wd=4,qd=6,Xd="color: inherit;",Hd={1:"#d19520",2:"#a83838",3:"#a89238"},Jd=function(){return function(n,t,r){return t&&Rd(n.prototype,t),r&&Rd(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(function n(t){var r=this,i=!(arguments.length>1&&arguments[1]!==undefined)||arguments[1];!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),Pd.set(this,!1),Bd.set(this,void 0),Nd.set(this,void 0),Dd(this,Pd,i,"f"),Dd(this,Bd,t,"f"),Dd(this,Nd,t.reduce(function(n,t){return Md(this,r),n.push(this.style(this.color(t))),n}.bind(this),[]),"f")},[{key:"color",value:function(n){var t=this;return oh(n.split("").reduce(function(n,r){return Md(this,t),n+r.charCodeAt(0)}.bind(this),0)+1,40,20)}},{key:"style",value:function(n){return"".concat("color:#fff;padding:2px 4px;font-size:11px;line-height:1;margin-right:8px;border-radius:2px;font-family: 'Lucida Console', Consolas, Courier, monospace;","background:").concat(n,";")}},{key:"enable",value:function(){Dd(this,Pd,!0,"f")}},{key:"message",value:function(n,t,r,i){var e;if($d(this,Pd,"f"))if((t instanceof Error||t instanceof Event)&&(t=a(t)),Ar)console.log("".concat($d(this,Bd,"f").join(". "),": ").concat(t));else{var o=[].concat(Ad($d(this,Nd,"f")),[Xd]),u=[].concat(Ad($d(this,Bd,"f")),[t]);n>Gd&&n<Wd?(o.shift(),o.unshift(this.style(Hd[n]))):n===qd&&r&&(u=[].concat(Ad($d(this,Bd,"f")),[r,t]),i&&(o=[].concat(Ad($d(this,Nd,"f")),[this.style(i),Xd]))),(e=console).log.apply(e,["%c".concat(u.join("%c"))].concat(Ad(o)))}}},{key:"info",value:function(n){this.message(Gd,n)}},{key:"warning",value:function(n){this.message(Ld,n)}},{key:"error",value:function(n){this.message(zd,n)}},{key:"attention",value:function(n){this.message(Fd,n)}},{key:"debug",value:function(n){this.message(Wd,n)}}])}();function Qd(n){return Qd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Qd(n)}function Vd(n,t){var r="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!r){if(Array.isArray(n)||(r=function(n,t){if(n){if("string"==typeof n)return Yd(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yd(n,t):void 0}}(n))||t&&n&&"number"==typeof n.length){r&&(n=r);var i=0,e=function(){};return{s:e,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:e}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,c=!1;return{s:function(){r=r.call(n)},n:function(){var n=r.next();return u=n.done,n},e:function(n){c=!0,o=n},f:function(){try{u||null==r["return"]||r["return"]()}finally{if(c)throw o}}}}function Yd(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Zd(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return Kd(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(Kd(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,Kd(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,Kd(l,"constructor",f),Kd(f,"constructor",a),a.displayName="GeneratorFunction",Kd(f,e,"GeneratorFunction"),Kd(l),Kd(l,e,"Generator"),Kd(l,i,function(){return this}),Kd(l,"toString",function(){return"[object Generator]"}),(Zd=function(){return{w:o,m:h}})()}function Kd(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}Kd=function(n,t,r,i){function o(t,r){Kd(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},Kd(n,t,r,i)}function nb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function tb(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,rb(i.key),i)}}function rb(n){var t=function(n,t){if("object"!=Qd(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Qd(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Qd(t)?t:t+""}Pd=new WeakMap,Bd=new WeakMap,Nd=new WeakMap;var ib,eb,ob,ub=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},cb=undefined&&undefined.__classPrivateFieldGet||function(n,t,r,i){if("a"===r&&!i)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?i:"a"===r?i.call(n):i?i.value:t.get(n)},ab=function(){return function(n,t,r){return t&&tb(n.prototype,t),r&&tb(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(function n(t,r){var i=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0,e=arguments.length>3&&arguments[3]!==undefined&&arguments[3];!function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ib.add(this),this.debug=!1,this.name=t,this.stores=r,this.logger=new Jd([" DB ",t]),this.version=i,this.debug=e},[{key:"outputDebug",value:function(n,t){this.debug&&this.logger&&this.logger.debug("".concat(t,": ").concat(n))}},{key:"addStore",value:function(n){this.stores.push(n)}},{key:"createStore",value:function(n,t){var r=this;if(!t.objectStoreNames.contains(n.name)){var i=t.createObjectStore(n.name,{keyPath:n.keyPath,autoIncrement:n.autoIncrement});n.indexes.forEach(function(n){nb(this,r),i.createIndex(n.name,n.keyPath,{unique:n.unique,multiEntry:n.multiEntry})}.bind(this))}}},{key:"deleteDatabase",value:function(){var n=this;return new Promise(function(t,r){var i=this;nb(this,n);var e=indexedDB.deleteDatabase(this.name);e.onerror=function(n){nb(this,i),this.logger&&this.logger.error(n),r(n)}.bind(this),e.onsuccess=function(){nb(this,i),t()}.bind(this),e.onblocked=function(){nb(this,i),r(new Error("Couldn't delete database due to the operation being blocked"))}.bind(this)}.bind(this))}},{key:"connect",value:function(){var n=this;return new Promise(function(t,r){var i=this;nb(this,n);var e=indexedDB.open(this.name,this.version);e.onerror=function(n){nb(this,i),this.logger&&this.logger.error(n),r(n)}.bind(this),e.onsuccess=function(){var n=this;nb(this,i);var o=e.result,u=!0;if(this.stores.forEach(function(t){nb(this,n),o.objectStoreNames.contains(t.name)||(u=!1)}.bind(this)),!u)return o.close(),void this.deleteDatabase().then(function(){nb(this,n),this.connect().then(t)["catch"](r)}.bind(this));t(o)}.bind(this),e.onupgradeneeded=function(){var n=this;nb(this,i);var t=e.result;this.stores.forEach(function(r){nb(this,n);try{t.objectStoreNames.contains(r.name)&&t.deleteObjectStore(r.name)}catch(i){this.logger&&this.logger.error(i)}this.createStore(r,t)}.bind(this))}.bind(this)}.bind(this))}},{key:"add",value:function(n,t){var r=this;return this.outputDebug("add",n),new Promise(function(i,e){var o=this;if(nb(this,r),Array.isArray(t)){var u=0,c=function(){var r=this;nb(this,o),cb(this,ib,"m",eb).call(this,n,t.slice(u,u+100)).then(function(){nb(this,r),u+=100,t.length>u?c():i()}.bind(this))["catch"](e)}.bind(this);c()}else cb(this,ib,"m",eb).call(this,n,t).then(i)["catch"](e)}.bind(this))}},{key:"delete",value:function(n,t){var r=this;return this.outputDebug("delete portions",n),new Promise(function(i,e){var o=this;if(nb(this,r),Array.isArray(t)){var u=0,c=function(){var r=this;nb(this,o),cb(this,ib,"m",ob).call(this,n,t.slice(u,u+100)).then(function(){nb(this,r),u+=100,t.length>u?c():i()}.bind(this))["catch"](e)}.bind(this);c()}else cb(this,ib,"m",ob).call(this,n,t).then(i)["catch"](e)}.bind(this))}},{key:"getByRange",value:function(n,t,r){return ub(this,arguments,void 0,function(n,t,r){var i=this,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:"next",o=arguments.length>4?arguments[4]:undefined,u=arguments.length>5?arguments[5]:undefined;return Zd().m(function c(){var a=this;return Zd().w(function(c){for(;;)if(0===c.n)return i.outputDebug("getByRange",n),c.a(2,new Promise(function(c,f){var s=this;nb(this,a),i.connect().then(function(i){var a=this;nb(this,s);var l=i.transaction(n,"readonly"),h=[];l.oncomplete=function(){nb(this,a),i.close(),c(h)}.bind(this),l.onerror=function(n){nb(this,a),i.close(),f(n.target)}.bind(this);var v=!u||0===u,d=0,b=l.objectStore(n);r&&b.indexNames.contains(r)&&(b=b.index(r)),b.openCursor(t,e).onsuccess=function(n){nb(this,a);var t=n.target.result;if(t){if(!v&&u)return v=!0,void t.advance(u);d++;var r=t.value;r&&(h.push(r),o&&d>=o||t["continue"]())}}.bind(this)}.bind(this))["catch"](f)}.bind(this)))},c,this)})()})}},{key:"getMultiple",value:function(n,t,r){var i=this;return this.outputDebug("getMultiple",n),new Promise(function(e,o){var u=this;nb(this,i),this.connect().then(function(i){var c=this;nb(this,u);var a=i.transaction(n,"readonly"),f=[];a.oncomplete=function(){nb(this,c),i.close(),e(f)}.bind(this),a.onerror=function(n){nb(this,c),i.close(),o(n.target)}.bind(this);var s=a.objectStore(n);r&&s.indexNames.contains(r)&&(s=s.index(r));var l,h=Vd(t);try{var v=function(){var n=this,t=l.value,r=s.get(t);r.onsuccess=function(){nb(this,n);var t=r.result;t&&f.push(t)}.bind(this)};for(h.s();!(l=h.n()).done;)v()}catch(d){h.e(d)}finally{h.f()}}.bind(this))["catch"](o)}.bind(this))}},{key:"getAll",value:function(n,t){var r=this;return this.outputDebug("getAll",n),new Promise(function(i,e){var o=this;nb(this,r),this.connect().then(function(r){var e=this;nb(this,o);var u=r.transaction(n,"readonly").objectStore(n);if(t&&u.indexNames.contains(t)&&(u=u.index(t)),"undefined"!=typeof IDBObjectStore.prototype.getAll){var c=u.getAll();c.onsuccess=function(){nb(this,e),r.close(),i(c.result)}.bind(this)}else{var a=[],f=u.openCursor();f.onsuccess=function(){nb(this,e);var n=f.result;n?(a.push(n.value),n["continue"]()):i(a)}.bind(this)}}.bind(this))["catch"](e)}.bind(this))}},{key:"count",value:function(n,t,r){var i=this;return this.outputDebug("count",n),new Promise(function(e,o){var u=this;nb(this,i),this.connect().then(function(i){var c=this;nb(this,u);var a=i.transaction(n,"readonly").objectStore(n);t&&a.indexNames.contains(t)&&(a=a.index(t));var f=a.count(r);f.onsuccess=function(){nb(this,c),i.close(),e(f.result)}.bind(this),f.onerror=function(n){nb(this,c),i.close(),this.logger&&this.logger.error(n),o(n)}.bind(this)}.bind(this))["catch"](o)}.bind(this))}},{key:"clear",value:function(n){var t=this;return this.outputDebug("clear",n),new Promise(function(r,i){var e=this;nb(this,t),this.connect().then(function(t){var o=this;nb(this,e);var u=t.transaction(n,"readwrite").objectStore(n).clear();u.onsuccess=function(){nb(this,o),t.close(),r()}.bind(this),u.onerror=function(n){nb(this,o),t.close(),this.logger&&this.logger.error(n),i(n)}.bind(this)}.bind(this))["catch"](i)}.bind(this))}}])}();ib=new WeakSet,eb=function(n,t){var r=this;return this.outputDebug("put",n),new Promise(function(i,e){var o=this;nb(this,r),this.connect().then(function(r){var u=this;nb(this,o);var c,a=r.transaction(n,"readwrite").objectStore(n);if(Array.isArray(t)?t.forEach(function(n){nb(this,u),c=a.put(n)}.bind(this)):c=a.put(t),!c)return r.close(),void i();c.onsuccess=function(){nb(this,u),r.close(),i()}.bind(this),c.onerror=function(n){nb(this,u),r.close(),this.logger&&this.logger.error(n),e(n)}.bind(this)}.bind(this))["catch"](e)}.bind(this))},ob=function(n,t){var r=this;return this.outputDebug("delete record",n),new Promise(function(i,e){var o=this;nb(this,r),this.connect().then(function(r){var u=this;nb(this,o);var c,a=r.transaction(n,"readwrite").objectStore(n);if(Array.isArray(t)?t.forEach(function(n){nb(this,u),c=a["delete"](n)}.bind(this)):c=a["delete"](t),!c)return r.close(),void i();c.onsuccess=function(){nb(this,u),r.close(),i()}.bind(this),c.onerror=function(n){nb(this,u),r.close(),this.logger&&this.logger.error(n),e(n)}.bind(this)}.bind(this))["catch"](e)}.bind(this))};var fb,sb=[];function lb(){var n=this;return new Promise(function(t){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),fb=new ab("chats",sb,7,!1),t()}.bind(this))}function hb(n){sb.push(n)}function vb(){return fb}function db(n){var t=this;return n.forEach(function(n){var r;!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,t);var i=n.topMessage;i&&i.recType===kn&&i.recType===kn&&(null===(r=null==i?void 0:i.preview)||void 0===r?void 0:r.blob)&&(i.preview.src=URL.createObjectURL(i.preview.blob))}.bind(this)),n}function bb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function yb(n,t){var r=this;return new Promise(function(i){var o=this;bb(this,r),n.getAll(t).then(function(n){if(bb(this,o),n&&n.length){var t=wa();(new Date).getTime()-n[0].timestamp>6e4||n[0].language!==t?i([]):i(db(n))}else i([])}.bind(this))["catch"](function(n){bb(this,o),y.error(e.S,n,"Get all"),i([])}.bind(this))}.bind(this))}function pb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var mb=(0,Ot.T5)([]),wb={name:"chats_popular",keyPath:"id",indexes:[{name:"id",keyPath:"id"}],autoIncrement:!0};function gb(){var n=this,t=vb();t!==undefined&&yb(t,wb.name).then(function(r){var i=this;pb(this,n),r&&r.length?mb.set(r):(mb.subscribe(qe(function(n){var r=this;pb(this,i),null==t||t.clear(wb.name).then(function(){pb(this,r),null==t||t.add(wb.name,n)}.bind(this))["catch"](function(n){pb(this,r),y.error(e.S,n,"Clear")}.bind(this))}.bind(this),1e3)),function(){var n=this,t=wa()||p.R;ae(Yn,t,!1,32).then(function(r){var i=this;pb(this,n),Xt!==Qn.DEV?r.length||t===p.R?(r.length<32&&t!==p.R&&ae(Yn,p.R,!1,32).then(function(n){var t=this;pb(this,i),mb.update(function(r){return pb(this,t),r.concat(n)}.bind(this))}.bind(this))["catch"](function(n){pb(this,i),y.error(e.S,n,"Popular list")}.bind(this)),mb.set(r)):ae(Yn,p.R,!1,32).then(function(n){pb(this,i),mb.set(n)}.bind(this))["catch"](function(n){pb(this,i),y.error(e.S,n,"Popular list")}.bind(this)):mb.set(r)}.bind(this))["catch"](function(t){pb(this,n),y.error(e.S,t,"Popular list")}.bind(this))}())}.bind(this))}hb(wb);var jb=undefined;function _b(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Sb={name:"chats_new",keyPath:"id",indexes:[{name:"id",keyPath:"id"}],autoIncrement:!0};hb(Sb);var Ob=(0,Ot.T5)([]),Eb=(0,Ot.T5)([]),Tb=!1,kb=!1;function Cb(n,t){for(var r=undefined,i=0,e=t.length;i<e;i++){var o=t[i];if(o.topMessage&&o.topMessage.messageId===n){r=o;break}}return r}function xb(){var n=this,t=vb();t!==undefined&&yb(t,Sb.name).then(function(r){var i=this;_b(this,n),kb=!0,r&&r.length?Ob.set(r):(Eb.subscribe(qe(function(n){var r=this;_b(this,i),null==t||t.clear(Sb.name).then(function(){_b(this,r),null==t||t.add(Sb.name,n)}.bind(this))["catch"](function(n){_b(this,r),y.error(e.S,n,"Clear")}.bind(this))}.bind(this),1e3)),function(){var n=this,t=wa()||p.R;ae(Zn,t,!0,200).then(function(r){var i=this;_b(this,n),Xt!==Qn.DEV?r.length||t===p.R?Ob.set(r):ae(Zn,p.R,!0,200).then(function(n){_b(this,i),Ob.set(n)}.bind(this))["catch"](function(n){_b(this,i),y.error(e.S,n,"New list")}.bind(this)):Ob.set(r)}.bind(this))["catch"](function(t){_b(this,n),y.error(e.S,t,"New list")}.bind(this))}())}.bind(this))}function Ab(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}Ob.subscribe(function(n){var t,r,i,o,u,c,a=this;if(_b(this,jb),kb){var f=wa()||p.R,s=[],l=0,h=[];if(Xt!==Qn.DEV){for(var v,d=function(){var t=this,r=n[b];if(!r.topMessage)return 0;if(~h.indexOf(r.topMessage.messageId))return 0;if(r.topMessage.recType===kn){if(r.topMessage.preview&&r.topMessage.preview.type!==Kn||!r.topMessage.preview)return h.push(r.topMessage.messageId),0}else if(r.topMessage.recType===Tn){var e=100;switch(r.language){case p.B:case p.D:case p.W:e=30}if(r.topMessage.text&&r.topMessage.text.length<e&&!(null===(o=null===(i=r.topMessage.tags)||void 0===i?void 0:i.files)||void 0===o?void 0:o.linkedIds))return h.push(r.topMessage.messageId),0;r.topMessage.recType===Tn&&(null===(c=null===(u=r.topMessage.tags)||void 0===u?void 0:u.files)||void 0===c?void 0:c.linkedIds)&&r.topMessage.tags.files.linkedIds.forEach(function(i){_b(this,t);var e=Cb(i,n);if(e&&e.topMessage&&r.topMessage){h.push(e.topMessage.messageId);var o=e.topMessage;if(o.recType===kn){var u=o;if(u)0===u.mime.toLowerCase().indexOf("image")&&r.topMessage.recType===Tn&&(r.topMessage.parsedTags||(r.topMessage.parsedTags={}),r.topMessage.parsedTags.media||(r.topMessage.parsedTags.media=[]),r.topMessage.parsedTags.media.push(u))}}}.bind(this))}return s.push(r),l++,h.push(r.topMessage.messageId),l>=32?1:void 0},b=0,m=n.length;b<m&&(0===(v=d())||1!==v);b++);s.length<32&&!Tb&&f!==p.R&&(Tb=!0,ae(Zn,p.R,!0,200).then(function(n){var t=this;_b(this,a),Ob.update(function(r){return _b(this,t),r.concat(n)}.bind(this))}.bind(this))["catch"](function(n){_b(this,a),y.error(e.S,n,"New list")}.bind(this))),Eb.set(s)}else{for(var w,g=function(){var i=this,e=n[j];return e.topMessage?~h.indexOf(e.topMessage.messageId)?0:(e.topMessage.recType===Tn&&(null===(r=null===(t=e.topMessage.tags)||void 0===t?void 0:t.files)||void 0===r?void 0:r.linkedIds)&&e.topMessage.tags.files.linkedIds.forEach(function(t){_b(this,i);var r=Cb(t,n);if(r&&r.topMessage&&e.topMessage){h.push(r.topMessage.messageId);var o=r.topMessage;if(o.recType===kn){var u=o;if(u)0===u.mime.toLowerCase().indexOf("image")&&e.topMessage.recType===Tn&&(e.topMessage.parsedTags||(e.topMessage.parsedTags={}),e.topMessage.parsedTags.media||(e.topMessage.parsedTags.media=[]),e.topMessage.parsedTags.media.push(u))}}}.bind(this)),s.push(e),l++,h.push(e.topMessage.messageId),l>=32?1:void 0):0},j=0,_=n.length;j<_&&(0===(w=g())||1!==w);j++);Eb.set(s)}}}.bind(undefined));var Ib={name:"chats_test",keyPath:"id",indexes:[{name:"id",keyPath:"id"}],autoIncrement:!0};hb(Ib);var Mb=(0,Ot.T5)([]);function Rb(){var n=this,t=vb();t!==undefined&&yb(t,Ib.name).then(function(r){var i=this;Ab(this,n),r&&r.length?Mb.set(r):(Mb.subscribe(qe(function(n){var r=this;Ab(this,i),null==t||t.clear(Ib.name).then(function(){Ab(this,r),null==t||t.add(Ib.name,n)}.bind(this))["catch"](function(n){Ab(this,r),y.error(e.S,n,"Clear")}.bind(this))}.bind(this),1e3)),function(){var n=this,t=wa()||p.R;ae(Vn,t,!1,32).then(function(r){var i=this;Ab(this,n),Xt!==Qn.DEV?r.length||t===p.R?(r.length<32&&t!==p.R&&ae(Vn,p.R,!1,32).then(function(n){var t=this;Ab(this,i),Mb.update(function(r){return Ab(this,t),r.concat(n)}.bind(this))}.bind(this))["catch"](function(n){Ab(this,i),y.error(e.S,n,"Test list")}.bind(this)),Mb.set(r)):ae(Vn,p.R,!1,32).then(function(n){Ab(this,i),Mb.set(n)}.bind(this))["catch"](function(n){Ab(this,i),y.error(e.S,n,"Test list")}.bind(this)):Mb.set(r)}.bind(this))["catch"](function(t){Ab(this,n),y.error(e.S,t,"Test list")}.bind(this))}())}.bind(this))}function Ub(n,t,r){var i=this;r.update(function(r){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i);for(var e=0,o=r.length;e<o;e++){var u=r[e];if(u.chatId===n){u.isVerified=t;break}}return r}.bind(this))}function Pb(n,t){Ub(n.chatId,t,ro),Ub(n.chatId,t,po(n.type)),Ub(n.chatId,t,mb),Ub(n.chatId,t,Eb),Ub(n.chatId,t,ze),Ub(n.chatId,t,Fe),Ub(n.chatId,t,Mb)}function Bb(n){return Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Bb(n)}function Nb(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Db(i.key),i)}}function Db(n){var t=function(n,t){if("object"!=Bb(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Bb(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Bb(t)?t:t+""}function $b(n,t,r){return t=Lb(t),function(n,t){if(t&&("object"==Bb(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Gb()?Reflect.construct(t,r||[],Lb(n).constructor):t.apply(n,r))}function Gb(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Gb=function(){return!!n})()}function Lb(n){return Lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Lb(n)}function zb(n,t){return zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},zb(n,t)}function Fb(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Wb(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return qb(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qb(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qb(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Xb(n){var t,r;return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(n[0]),(0,rf.CFu)(t,"slot","title")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){1&t&&(0,rf.iQh)(r,n[0])},d:function(n){n&&(0,rf.YoD)(t)}}}function Hb(n){var t,r,i=u("unsubscribeConfirmGroup","<b>".concat(dr(n[1].name),"</b>"))+"";return{c:function(){t=new rf.OKD(!1),r=(0,rf.Iex)(),t.a=r},m:function(n,e){t.m(i,n,e),(0,rf.Yry)(n,r,e)},p:function(n,r){2&r&&i!==(i=u("unsubscribeConfirmGroup","<b>".concat(dr(n[1].name),"</b>"))+"")&&t.p(i)},d:function(n){n&&((0,rf.YoD)(r),t.d())}}}function Jb(n){var t,r,i=u("unsubscribeConfirmChannel","<b>".concat(dr(n[1].name),"</b>"))+"";return{c:function(){t=new rf.OKD(!1),r=(0,rf.Iex)(),t.a=r},m:function(n,e){t.m(i,n,e),(0,rf.Yry)(n,r,e)},p:function(n,r){2&r&&i!==(i=u("unsubscribeConfirmChannel","<b>".concat(dr(n[1].name),"</b>"))+"")&&t.p(i)},d:function(n){n&&((0,rf.YoD)(r),t.d())}}}function Qb(n){var t,r;function i(n,t){return n[2]?Jb:Hb}var e=i(n),o=e(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),o.c(),(0,rf.CFu)(r,"class","chat-alert-text"),(0,rf.CFu)(t,"slot","content")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r),o.m(r,null)},p:function(n,t){e===(e=i(n))&&o?o.p(n,t):(o.d(1),(o=e(n))&&(o.c(),o.m(r,null)))},d:function(n){n&&(0,rf.YoD)(t),o.d()}}}function Vb(n){var t,r,i,e,o,c;return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("button")).textContent="".concat(u("close")),i=(0,rf.xem)(),(e=(0,rf.ND4)("button")).textContent="".concat(u("unsubscribe")),(0,rf.CFu)(r,"class","button button_white qa-dialog-cancel"),(0,rf.CFu)(e,"class","button button_green"),(0,rf.CFu)(t,"slot","buttons")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),o||(c=[(0,rf.KTR)(r,"click",(0,rf.xZN)(n[3])),(0,rf.KTR)(e,"click",(0,rf.xZN)(n[4]))],o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,(0,rf.oOW)(c)}}}function Yb(n){var t,r;return(t=new Cs({props:{$$slots:{buttons:[Vb],content:[Qb],title:[Xb]},$$scope:{ctx:n}}})).$on("close",n[3]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i=Wb(r,1)[0],e={};135&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Zb(n,t,r){var i,o,c=this;(0,rf.j0C)(n,Po,function(n){return Fb(this,c),r(1,o=n)}.bind(this));var a=t.title,f=void 0===a?u("unsubscribe"):a,s=t.withTrack,l=void 0===s||s,h=(0,cf.ur)();function v(){h("close")}return n.$$set=function(n){Fb(this,c),"title"in n&&r(0,f=n.title),"withTrack"in n&&r(5,l=n.withTrack)}.bind(this),n.$$.update=function(){Fb(this,c),2&n.$$.dirty&&r(2,i=o.type===En)}.bind(this),[f,o,i,v,function(){var n=this;re(o.chatId,$e,0,!0).then(function(t){Fb(this,n),o.type===En?l&&window.fz&&window.fz("track","MQL5+Chat+Channel+Leave"):o.type===On&&l&&window.fz&&window.fz("track","MQL5+Chat+Group+Leave"),Lf(t),(0,rf.vu6)(Po,o.isSubscribed=!1,o),v()}.bind(this))["catch"](function(t){Fb(this,n),v(),of.set(t.message),y.error(e.USER,t)}.bind(this))},l]}var Kb=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=$b(this,t),(0,rf.TsN)(r,n,Zb,Yb,rf.jXN,{title:0,withTrack:5}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&zb(n,t)}(t,n),function(n,t,r){return t&&Nb(n.prototype,t),r&&Nb(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ny=Kb;function ty(n){return ty="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ty(n)}function ry(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,iy(i.key),i)}}function iy(n){var t=function(n,t){if("object"!=ty(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=ty(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==ty(t)?t:t+""}function ey(n,t,r){return t=uy(t),function(n,t){if(t&&("object"==ty(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,oy()?Reflect.construct(t,r||[],uy(n).constructor):t.apply(n,r))}function oy(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(oy=function(){return!!n})()}function uy(n){return uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},uy(n)}function cy(n,t){return cy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},cy(n,t)}function ay(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"class","avatar-editor__draggable")},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=[(0,rf.KTR)(t,"mousedown",n[0]),(0,rf.KTR)(t,"mousemove",n[1]),(0,rf.KTR)(t,"mouseup",n[2]),(0,rf.KTR)(t,"mouseout",n[2]),(0,rf.KTR)(t,"blur",n[2]),(0,rf.KTR)(t,"dragstart",(0,rf.xZN)(n[5]))],r=!0)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,(0,rf.oOW)(i)}}}function fy(n,t,r){var i=this,e=t.positionX,o=t.positionY,u=!1,c={x:0,y:0};return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"positionX"in n&&r(3,e=n.positionX),"positionY"in n&&r(4,o=n.positionY)}.bind(this),[function(n){u=!0,c.x=n.clientX,c.y=n.clientY},function(n){if(u){var t=n.clientX,i=n.clientY,a=t-c.x,f=i-c.y;c.x=t,c.y=i,r(3,e+=a),r(4,o+=f)}},function(){u=!1},e,o,function(t){rf.Tq.call(this,n,t)}]}var sy=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=ey(this,t),(0,rf.TsN)(r,n,fy,ay,rf.jXN,{positionX:3,positionY:4}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&cy(n,t)}(t,n),function(n,t,r){return t&&ry(n.prototype,t),r&&ry(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ly=sy;function hy(n){return hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hy(n)}function vy(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,dy(i.key),i)}}function dy(n){var t=function(n,t){if("object"!=hy(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=hy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==hy(t)?t:t+""}function by(n,t,r){return t=py(t),function(n,t){if(t&&("object"==hy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,yy()?Reflect.construct(t,r||[],py(n).constructor):t.apply(n,r))}function yy(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(yy=function(){return!!n})()}function py(n){return py=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},py(n)}function my(n,t){return my=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},my(n,t)}function wy(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gy(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return jy(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jy(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jy(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function _y(n){var t,r,i,e,o,u;return{c:function(){t=(0,rf.ND4)("button"),r=(0,rf.ND4)("i"),(0,rf.CFu)(r,"class",i="icons-ux icons-ux_arrow-"+n[0]),(0,rf.CFu)(t,"aria-label","avatar"),(0,rf.CFu)(t,"class",e="avatar-editor__control avatar-editor__control_"+n[0]),t.disabled=n[1]},m:function(i,e){(0,rf.Yry)(i,t,e),(0,rf.BCw)(t,r),o||(u=[(0,rf.KTR)(t,"mousedown",(0,rf.Kiq)((0,rf.xZN)(n[6]))),(0,rf.KTR)(t,"touchstart",(0,rf.Kiq)((0,rf.xZN)(n[7]))),(0,rf.KTR)(t,"mouseup",Oy),(0,rf.KTR)(t,"mouseout",Oy),(0,rf.KTR)(t,"blur",Oy),(0,rf.KTR)(t,"touchend",Oy),(0,rf.KTR)(t,"click",(0,rf.xZN)(n[5]))],o=!0)},p:function(n,o){var u=gy(o,1)[0];1&u&&i!==(i="icons-ux icons-ux_arrow-"+n[0])&&(0,rf.CFu)(r,"class",i),1&u&&e!==(e="avatar-editor__control avatar-editor__control_"+n[0])&&(0,rf.CFu)(t,"class",e),2&u&&(t.disabled=n[1])},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,(0,rf.oOW)(u)}}}var Sy;function Oy(){clearInterval(Sy)}function Ey(n,t,r){var i=this,e=t.direction,o=t.positionX,u=t.positionY,c=t.disabled;function a(){if(!c)switch(e){case"up":r(4,u-=10);break;case"right":r(3,o+=10);break;case"down":r(4,u+=10);break;case"left":r(3,o-=10)}}var f=function(){wy(this,i),Oy(),Sy=setInterval(a,50)}.bind(this),s=function(){wy(this,i),Oy(),Sy=setInterval(a,50)}.bind(this);return n.$$set=function(n){wy(this,i),"direction"in n&&r(0,e=n.direction),"positionX"in n&&r(3,o=n.positionX),"positionY"in n&&r(4,u=n.positionY),"disabled"in n&&r(1,c=n.disabled)}.bind(this),[e,c,a,o,u,function(t){rf.Tq.call(this,n,t)},f,s]}var Ty=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=by(this,t),(0,rf.TsN)(r,n,Ey,_y,rf.jXN,{direction:0,positionX:3,positionY:4,disabled:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&my(n,t)}(t,n),function(n,t,r){return t&&vy(n.prototype,t),r&&vy(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ky=Ty;function Cy(n){return Cy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Cy(n)}var xy=undefined;function Ay(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Iy(i.key),i)}}function Iy(n){var t=function(n,t){if("object"!=Cy(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Cy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Cy(t)?t:t+""}function My(n,t,r){return t=Uy(t),function(n,t){if(t&&("object"==Cy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Ry()?Reflect.construct(t,r||[],Uy(n).constructor):t.apply(n,r))}function Ry(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Ry=function(){return!!n})()}function Uy(n){return Uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uy(n)}function Py(n,t){return Py=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Py(n,t)}function By(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Ny(n){var t;return{c:function(){t=(0,rf.Qq7)(n[2])},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,r){4&r[0]&&(0,rf.iQh)(t,n[2])},d:function(n){n&&(0,rf.YoD)(t)}}}function Dy(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j,_,S,O,E,T,k,C,x,A,I,M,R,U,P,B,N,D,$,G,L=this,z=mr("zoomIn")+"",F=mr("zoomOut")+"";function W(t){n[10](t)}function q(t){n[11](t)}function X(t){n[12](t)}var H={direction:"up"};function J(t){n[13](t)}function Q(t){n[14](t)}function V(t){n[15](t)}void 0!==n[3]&&(H.disabled=n[3]),void 0!==n[0]&&(H.positionX=n[0]),void 0!==n[1]&&(H.positionY=n[1]),r=new ky({props:H}),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(r,"disabled",W)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(r,"positionX",q)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(r,"positionY",X)}.bind(this));var Y={direction:"right"};function Z(t){n[16](t)}function K(t){n[17](t)}function nn(t){n[18](t)}void 0!==n[4]&&(Y.disabled=n[4]),void 0!==n[0]&&(Y.positionX=n[0]),void 0!==n[1]&&(Y.positionY=n[1]),c=new ky({props:Y}),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(c,"disabled",J)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(c,"positionX",Q)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(c,"positionY",V)}.bind(this));var tn={direction:"down"};function rn(t){n[19](t)}function en(t){n[20](t)}function on(t){n[21](t)}void 0!==n[5]&&(tn.disabled=n[5]),void 0!==n[0]&&(tn.positionX=n[0]),void 0!==n[1]&&(tn.positionY=n[1]),h=new ky({props:tn}),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(h,"disabled",Z)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(h,"positionX",K)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(h,"positionY",nn)}.bind(this));var un={direction:"left"};function cn(t){n[22](t)}function an(t){n[23](t)}void 0!==n[6]&&(un.disabled=n[6]),void 0!==n[0]&&(un.positionX=n[0]),void 0!==n[1]&&(un.positionY=n[1]),p=new ky({props:un}),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(p,"disabled",rn)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(p,"positionX",en)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(p,"positionY",on)}.bind(this));var fn={};void 0!==n[0]&&(fn.positionX=n[0]),void 0!==n[1]&&(fn.positionY=n[1]),_=new ly({props:fn}),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(_,"positionX",cn)}.bind(this)),rf.Dnk.push(function(){return By(this,L),(0,rf.oIE)(_,"positionY",an)}.bind(this));var sn=n[2]&&Ny(n);return{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),u=(0,rf.xem)(),(0,rf.N0i)(c.$$.fragment),l=(0,rf.xem)(),(0,rf.N0i)(h.$$.fragment),y=(0,rf.xem)(),(0,rf.N0i)(p.$$.fragment),j=(0,rf.xem)(),(0,rf.N0i)(_.$$.fragment),E=(0,rf.xem)(),T=(0,rf.ND4)("canvas"),k=(0,rf.xem)(),C=(0,rf.ND4)("div"),x=(0,rf.ND4)("div"),(A=(0,rf.ND4)("span")).textContent="+",I=(0,rf.Qq7)(z),M=(0,rf.xem)(),R=(0,rf.ND4)("div"),(U=(0,rf.ND4)("span")).textContent="-",P=(0,rf.Qq7)(F),B=(0,rf.xem)(),sn&&sn.c(),N=(0,rf.Iex)(),(0,rf.CFu)(T,"class","avatar-editor__canvas"),(0,rf.CFu)(T,"width",Gy),(0,rf.CFu)(T,"height",Gy),(0,rf.CFu)(t,"class","avatar-editor"),(0,rf.CFu)(A,"class","avatar-editor__zoom-icon"),(0,rf.CFu)(x,"class","avatar-editor__zoom-btn"),(0,rf.CFu)(U,"class","avatar-editor__zoom-icon"),(0,rf.CFu)(R,"class","avatar-editor__zoom-btn"),(0,rf.CFu)(C,"class","avatar-editor__zoom")},m:function(i,e){(0,rf.Yry)(i,t,e),(0,rf.wSR)(r,t,null),(0,rf.BCw)(t,u),(0,rf.wSR)(c,t,null),(0,rf.BCw)(t,l),(0,rf.wSR)(h,t,null),(0,rf.BCw)(t,y),(0,rf.wSR)(p,t,null),(0,rf.BCw)(t,j),(0,rf.wSR)(_,t,null),(0,rf.BCw)(t,E),(0,rf.BCw)(t,T),n[24](T),(0,rf.Yry)(i,k,e),(0,rf.Yry)(i,C,e),(0,rf.BCw)(C,x),(0,rf.BCw)(x,A),(0,rf.BCw)(x,I),(0,rf.BCw)(C,M),(0,rf.BCw)(C,R),(0,rf.BCw)(R,U),(0,rf.BCw)(R,P),(0,rf.Yry)(i,B,e),sn&&sn.m(i,e),(0,rf.Yry)(i,N,e),D=!0,$||(G=[(0,rf.KTR)(x,"keyup",Ly),(0,rf.KTR)(x,"click",n[25]),(0,rf.KTR)(R,"keyup",zy),(0,rf.KTR)(R,"click",n[26])],$=!0)},p:function(n,t){var u=this,l={};!i&&8&t[0]&&(i=!0,l.disabled=n[3],(0,rf.Jk$)(function(){return By(this,u),i=!1}.bind(this))),!e&&1&t[0]&&(e=!0,l.positionX=n[0],(0,rf.Jk$)(function(){return By(this,u),e=!1}.bind(this))),!o&&2&t[0]&&(o=!0,l.positionY=n[1],(0,rf.Jk$)(function(){return By(this,u),o=!1}.bind(this))),r.$set(l);var y={};!a&&16&t[0]&&(a=!0,y.disabled=n[4],(0,rf.Jk$)(function(){return By(this,u),a=!1}.bind(this))),!f&&1&t[0]&&(f=!0,y.positionX=n[0],(0,rf.Jk$)(function(){return By(this,u),f=!1}.bind(this))),!s&&2&t[0]&&(s=!0,y.positionY=n[1],(0,rf.Jk$)(function(){return By(this,u),s=!1}.bind(this))),c.$set(y);var j={};!v&&32&t[0]&&(v=!0,j.disabled=n[5],(0,rf.Jk$)(function(){return By(this,u),v=!1}.bind(this))),!d&&1&t[0]&&(d=!0,j.positionX=n[0],(0,rf.Jk$)(function(){return By(this,u),d=!1}.bind(this))),!b&&2&t[0]&&(b=!0,j.positionY=n[1],(0,rf.Jk$)(function(){return By(this,u),b=!1}.bind(this))),h.$set(j);var E={};!m&&64&t[0]&&(m=!0,E.disabled=n[6],(0,rf.Jk$)(function(){return By(this,u),m=!1}.bind(this))),!w&&1&t[0]&&(w=!0,E.positionX=n[0],(0,rf.Jk$)(function(){return By(this,u),w=!1}.bind(this))),!g&&2&t[0]&&(g=!0,E.positionY=n[1],(0,rf.Jk$)(function(){return By(this,u),g=!1}.bind(this))),p.$set(E);var T={};!S&&1&t[0]&&(S=!0,T.positionX=n[0],(0,rf.Jk$)(function(){return By(this,u),S=!1}.bind(this))),!O&&2&t[0]&&(O=!0,T.positionY=n[1],(0,rf.Jk$)(function(){return By(this,u),O=!1}.bind(this))),_.$set(T),n[2]?sn?sn.p(n,t):((sn=Ny(n)).c(),sn.m(N.parentNode,N)):sn&&(sn.d(1),sn=null)},i:function(n){D||((0,rf.c7F)(r.$$.fragment,n),(0,rf.c7F)(c.$$.fragment,n),(0,rf.c7F)(h.$$.fragment,n),(0,rf.c7F)(p.$$.fragment,n),(0,rf.c7F)(_.$$.fragment,n),D=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),(0,rf.Tn8)(c.$$.fragment,n),(0,rf.Tn8)(h.$$.fragment,n),(0,rf.Tn8)(p.$$.fragment,n),(0,rf.Tn8)(_.$$.fragment,n),D=!1},d:function(i){i&&((0,rf.YoD)(t),(0,rf.YoD)(k),(0,rf.YoD)(C),(0,rf.YoD)(B),(0,rf.YoD)(N)),(0,rf.Hbl)(r),(0,rf.Hbl)(c),(0,rf.Hbl)(h),(0,rf.Hbl)(p),(0,rf.Hbl)(_),n[24](null),sn&&sn.d(i),$=!1,(0,rf.oOW)(G)}}}var $y,Gy=200;var Ly=function(){By(this,xy)}.bind(undefined),zy=function(){By(this,xy)}.bind(undefined);function Fy(n,t,r){var i,e,o=this,u=t.file,c="",a=0,f=0,s=0,l=0,h=!1,v=!1,d=!1,b=!1;function y(){i.clearRect(0,0,Gy,Gy),i.drawImage(e,s,l,a,f)}function p(){var n=arguments.length>0&&arguments[0]!==undefined&&arguments[0],t=a/f;(a+=60*(n?1:-1))<Gy&&(a=Gy),(f=Math.round(a/t))<Gy&&(f=Gy,a=Math.round(f*t)),m(),y()}function m(){r(5,d=0===l),r(4,v=0===s),r(3,h=Math.abs(l-Gy)===f),r(6,b=Math.abs(s-Gy)===a)}(0,cf.Rc)(function(){var n=this;if(By(this,o),u.type.match(/image.*/)){var t=$y.getContext("2d");if(t){r(9,i=t),e=new Image;var s=URL.createObjectURL(u);return e.addEventListener("error",function(t){By(this,n),URL.revokeObjectURL(s),r(2,c=t.message)}.bind(this)),e.addEventListener("load",function(){By(this,n),URL.revokeObjectURL(s),a=e.width,f=e.height;var t=a/f;a>f?a=(f=Gy)*t:f=(a=Gy)/t,i.drawImage(e,0,0,a,f),m()}.bind(this)),e.src=s,function(){By(this,n),Oy()}.bind(this)}r(2,c="Canvas context is null")}else r(2,c="File must be an image")}.bind(this));var w=function(){By(this,o),p(!0)}.bind(this),g=function(){By(this,o),p()}.bind(this);return n.$$set=function(n){By(this,o),"file"in n&&r(8,u=n.file)}.bind(this),n.$$.update=function(){var t,e;By(this,o),515&n.$$.dirty[0]&&i&&((t=s)>=0?t=0:t<-a+Gy&&(t=-a+Gy),(e=l)>=0?e=0:e<-f+Gy&&(e=-f+Gy),r(0,s=t),r(1,l=e),m(),y())}.bind(this),[s,l,c,h,v,d,b,p,u,i,function(n){r(3,h=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(4,v=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(5,d=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(6,b=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){r(0,s=n)},function(n){r(1,l=n)},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){By(this,t),$y=n}.bind(this))},w,g]}var Wy=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=My(this,t),(0,rf.TsN)(r,n,Fy,Dy,rf.jXN,{file:8},null,[-1,-1]),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Py(n,t)}(t,n),function(n,t,r){return t&&Ay(n.prototype,t),r&&Ay(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const qy=Wy;function Xy(n){return Xy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xy(n)}var Hy=undefined;function Jy(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Qy(i.key),i)}}function Qy(n){var t=function(n,t){if("object"!=Xy(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Xy(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Xy(t)?t:t+""}function Vy(n,t,r){return t=Zy(t),function(n,t){if(t&&("object"==Xy(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Yy()?Reflect.construct(t,r||[],Zy(n).constructor):t.apply(n,r))}function Yy(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Yy=function(){return!!n})()}function Zy(n){return Zy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zy(n)}function Ky(n,t){return Ky=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Ky(n,t)}function np(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var tp=function(n){return np(this,Hy),{}}.bind(undefined),rp=function(n){return np(this,Hy),{}}.bind(undefined),ip=function(n){return np(this,Hy),{}}.bind(undefined),ep=function(n){return np(this,Hy),{}}.bind(undefined),op=function(n){return np(this,Hy),{}}.bind(undefined),up=function(n){return np(this,Hy),{}}.bind(undefined),cp=function(n){return np(this,Hy),{}}.bind(undefined),ap=function(n){return np(this,Hy),{}}.bind(undefined);function fp(n,t,r){var i=n.slice();return i[31]=t[r][0],i[32]=t[r][1],i}function sp(n){var t,r,i,e=n[0].errorCommon+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.Qq7)(e),(0,rf.CFu)(r,"class","alert alert_danger"),(0,rf.CFu)(t,"class","chat-form__error")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i)},p:function(n,t){1&t[0]&&e!==(e=n[0].errorCommon+"")&&(0,rf.iQh)(i,e)},d:function(n){n&&(0,rf.YoD)(t)}}}function lp(n){var t,r,i,e,o,c,a,f=u("upload")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),o=(0,rf.Qq7)(f),c=(0,rf.ND4)("br"),a=(0,rf.Qq7)("\n                JPG GIF PNG"),(0,rf.CFu)(r,"class","icons-chat icons-chat_upload"),(0,rf.CFu)(t,"class","chat-form__avatar-empty")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(e,o),(0,rf.BCw)(e,c),(0,rf.BCw)(e,a)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function hp(n){var t,r;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.mq_)(t.src,r=n[0].avatar)||(0,rf.CFu)(t,"src",r),(0,rf.CFu)(t,"alt","")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){1&i[0]&&!(0,rf.mq_)(t.src,r=n[0].avatar)&&(0,rf.CFu)(t,"src",r)},d:function(n){n&&(0,rf.YoD)(t)}}}function vp(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_close-active"></i>',(0,rf.CFu)(t,"class","chat-form__delete-avatar"),(0,rf.CFu)(t,"title",u("delete"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[12])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function dp(n){var t,r,i=n[0].avatarError+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","chat-form__avatar-error")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){1&t[0]&&i!==(i=n[0].avatarError+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function bp(n){var t,r,i,e,o,c,a=u("privateChannel")+"",f=u("publicChannel")+"";return{c:function(){t=(0,rf.ND4)("option"),r=(0,rf.Qq7)(a),e=(0,rf.ND4)("option"),o=(0,rf.Qq7)(f),t.__value="0",(0,rf.Gvd)(t,t.__value),t.selected=i=!n[0].isPublic,e.__value="1",(0,rf.Gvd)(e,e.__value),e.selected=c=n[0].isPublic},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r),(0,rf.Yry)(n,e,i),(0,rf.BCw)(e,o)},p:function(n,r){1&r[0]&&i!==(i=!n[0].isPublic)&&(t.selected=i),1&r[0]&&c!==(c=n[0].isPublic)&&(e.selected=c)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(e))}}}function yp(n){var t,r,i,e,o,c,a=u("privateChat")+"",f=u("publicChat")+"";return{c:function(){t=(0,rf.ND4)("option"),r=(0,rf.Qq7)(a),e=(0,rf.ND4)("option"),o=(0,rf.Qq7)(f),t.__value="0",(0,rf.Gvd)(t,t.__value),t.selected=i=!n[0].isPublic,e.__value="1",(0,rf.Gvd)(e,e.__value),e.selected=c=n[0].isPublic},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r),(0,rf.Yry)(n,e,i),(0,rf.BCw)(e,o)},p:function(n,r){1&r[0]&&i!==(i=!n[0].isPublic)&&(t.selected=i),1&r[0]&&c!==(c=n[0].isPublic)&&(e.selected=c)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(e))}}}function pp(n){var t;function r(n,t){return n[3]?wp:mp}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("div"),e.c(),(0,rf.CFu)(t,"class","chat-form__option")},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){i!==(i=r(n))&&(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function mp(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("privateChannel")),r=(0,rf.xem)(),(i=(0,rf.ND4)("span")).textContent="".concat(u("privateChannelDesc")),(0,rf.CFu)(t,"class","chat-form__option-name"),(0,rf.CFu)(i,"class","chat-form__desc-label")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.Yry)(n,r,e),(0,rf.Yry)(n,i,e)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i))}}}function wp(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("privateChat")),r=(0,rf.xem)(),(i=(0,rf.ND4)("span")).textContent="".concat(u("privateChatDesc")),(0,rf.CFu)(t,"class","chat-form__option-name"),(0,rf.CFu)(i,"class","chat-form__desc-label")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.Yry)(n,r,e),(0,rf.Yry)(n,i,e)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i))}}}function gp(n){var t;function r(n,t){return n[3]?_p:jp}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("div"),e.c(),(0,rf.CFu)(t,"class","chat-form__option")},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){i!==(i=r(n))&&(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function jp(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("publicChannel")),r=(0,rf.xem)(),(i=(0,rf.ND4)("span")).textContent="".concat(u("publicChannelDesc")),(0,rf.CFu)(t,"class","chat-form__option-name"),(0,rf.CFu)(i,"class","chat-form__desc-label")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.Yry)(n,r,e),(0,rf.Yry)(n,i,e)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i))}}}function _p(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("publicChat")),r=(0,rf.xem)(),(i=(0,rf.ND4)("span")).textContent="".concat(u("publicChatDesc")),(0,rf.CFu)(t,"class","chat-form__option-name"),(0,rf.CFu)(i,"class","chat-form__desc-label")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.Yry)(n,r,e),(0,rf.Yry)(n,i,e)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i))}}}function Sp(n){var t,r,i,e,o,c,a,f,s,l,h,v=n[0].errorInviteLink&&Op(n);return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("urlChannel"),":"),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),(o=(0,rf.ND4)("span")).textContent="".concat(n[6]),c=(0,rf.xem)(),a=(0,rf.ND4)("input"),s=(0,rf.xem)(),v&&v.c(),(0,rf.CFu)(r,"class","chat-form__label"),(0,rf.CFu)(o,"class","chat-form__invite-link-label"),(0,rf.CFu)(a,"class",f="input-no-border"+(n[0].errorInviteLink?" input-no-border_error":"")),(0,rf.Xrn)(a,"text"),a.disabled=n[1],(0,rf.CFu)(a,"name","invite_link"),(0,rf.CFu)(a,"placeholder","link"),(0,rf.CFu)(e,"class","chat-form__invite-link"+(ur?" chat-form__invite-link_mobile":"")),(0,rf.CFu)(t,"class","chat-form__item chat-form__item_input")},m:function(u,f){(0,rf.Yry)(u,t,f),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(e,o),(0,rf.BCw)(e,c),(0,rf.BCw)(e,a),(0,rf.Gvd)(a,n[0].inviteLink),(0,rf.BCw)(t,s),v&&v.m(t,null),l||(h=[(0,rf.KTR)(a,"input",n[23]),(0,rf.KTR)(a,"input",n[24])],l=!0)},p:function(n,r){1&r[0]&&f!==(f="input-no-border"+(n[0].errorInviteLink?" input-no-border_error":""))&&(0,rf.CFu)(a,"class",f),2&r[0]&&(a.disabled=n[1]),1&r[0]&&a.value!==n[0].inviteLink&&(0,rf.Gvd)(a,n[0].inviteLink),n[0].errorInviteLink?v?v.p(n,r):((v=Op(n)).c(),v.m(t,null)):v&&(v.d(1),v=null)},d:function(n){n&&(0,rf.YoD)(t),v&&v.d(),l=!1,(0,rf.oOW)(h)}}}function Op(n){var t,r,i=n[0].errorInviteLink+"";return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","field-validation-error")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){1&t[0]&&i!==(i=n[0].errorInviteLink+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function Ep(n){var t,r="number"==typeof n[32]&&function(n){var t,r,i=u("none"!==n[31]?n[31]:"other")+"";return{c:function(){t=(0,rf.ND4)("option"),r=(0,rf.Qq7)(i),t.__value=n[32],(0,rf.Gvd)(t,t.__value)},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}(n);return{c:function(){r&&r.c(),t=(0,rf.Iex)()},m:function(n,i){r&&r.m(n,i),(0,rf.Yry)(n,t,i)},p:function(n,t){"number"==typeof n[32]&&r.p(n,t)},d:function(n){n&&(0,rf.YoD)(t),r&&r.d(n)}}}function Tp(n){var t,r,i,e,o=n[16].users,u=(0,rf.Of3)(o,n,n[26],ap),c=n[3]&&kp(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),u&&u.c(),i=(0,rf.xem)(),c&&c.c(),(0,rf.CFu)(r,"class","chat-form__users"),(0,rf.CFu)(t,"class","chat-form__item")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),u&&u.m(r,null),(0,rf.BCw)(r,i),c&&c.m(r,null),e=!0},p:function(n,t){u&&u.p&&(!e||67108864&t[0])&&(0,rf.nkG)(u,o,n,n[26],e?(0,rf.sWk)(o,n[26],t,cp):(0,rf.i32)(n[26]),ap),n[3]?c?c.p(n,t):((c=kp(n)).c(),c.m(r,null)):c&&(c.d(1),c=null)},i:function(n){e||((0,rf.c7F)(u,n),e=!0)},o:function(n){(0,rf.Tn8)(u,n),e=!1},d:function(n){n&&(0,rf.YoD)(t),u&&u.d(n),c&&c.d()}}}function kp(n){var t,r,i,e,o,c;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("input"),(e=(0,rf.ND4)("label")).textContent="".concat(u("isLimitedShort")),(0,rf.Xrn)(r,"checkbox"),(0,rf.CFu)(r,"name","isLimited"),(0,rf.CFu)(r,"class","checkbox"),(0,rf.CFu)(r,"id","chatIsLimited"),r.checked=i=!n[0].isLimited,(0,rf.CFu)(e,"for","chatIsLimited"),(0,rf.CFu)(e,"title",u("isLimited")),(0,rf.CFu)(t,"class","chat-form__is-limited")},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,e),o||(c=(0,rf.KTR)(r,"change",n[13]),o=!0)},p:function(n,t){1&t[0]&&i!==(i=!n[0].isLimited)&&(r.checked=i)},d:function(n){n&&(0,rf.YoD)(t),o=!1,c()}}}function Cp(n){var t,r;return(t=new Cs({props:{withTitle:!1,$$slots:{buttons:[Ap],content:[xp]},$$scope:{ctx:n}}})).$on("close",n[7]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};67108896&r[0]&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function xp(n){var t,r;return t=new qy({props:{file:n[5],slot:"content"}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};32&r[0]&&(i.file=n[5]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Ap(n){var t,r,i,e,o,c;return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("button")).textContent="".concat(u("close")),i=(0,rf.xem)(),(e=(0,rf.ND4)("button")).textContent="".concat(u("save")),(0,rf.CFu)(r,"class","button button_white"),(0,rf.CFu)(e,"class","button button_green"),(0,rf.CFu)(t,"slot","buttons")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),o||(c=[(0,rf.KTR)(r,"click",(0,rf.xZN)(n[7])),(0,rf.KTR)(e,"click",(0,rf.xZN)(n[14]))],o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,(0,rf.oOW)(c)}}}function Ip(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,w,g,j,_,S,O,E,T,k,C,x,A,I,M,R,U,P,B,N,D,$,G,L,z,F,W,q,X,H,J,Q,V,Y,Z,K,nn,tn,rn,en,on,un,cn,an=u(n[3]?"chatLanguage":"channelLanguage")+"",fn=u(m[n[0].language])+"",sn=n[0].errorCommon&&sp(n);function ln(n,t){return n[0].avatar?hp:lp}var hn=ln(n),vn=hn(n),dn=n[0].avatar&&vp(n),bn=n[0].avatarError&&dp(n);function yn(n,t){return n[3]?yp:bp}for(var pn=yn(n),mn=pn(n),wn=!n[0].isPublic&&pp(n),gn=n[0].isPublic&&gp(n),jn=!n[3]&&n[0].isPublic&&Sp(n),_n=(0,rf.rv_)(Object.entries(m)),Sn=[],On=0;On<_n.length;On+=1)Sn[On]=Ep(fp(n,_n,On));var En=(n[3]||n[2])&&Tp(n),Tn=n[16].content,kn=(0,rf.Of3)(Tn,n,n[26],up),Cn=n[16]["button-name"],xn=(0,rf.Of3)(Cn,n,n[26],ep),An=xn||function(n){var t,r=u(n[3]?"createGroup":"createChannel")+"";return{c:function(){t=(0,rf.Qq7)(r)},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){8&i[0]&&r!==(r=u(n[3]?"createGroup":"createChannel")+"")&&(0,rf.iQh)(t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}(n),In=n[16].buttons,Mn=(0,rf.Of3)(In,n,n[26],rp),Rn=n[5]&&Cp(n);return{c:function(){var m=this;t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),sn&&sn.c(),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),o=(0,rf.ND4)("div"),c=(0,rf.ND4)("div"),a=(0,rf.ND4)("input"),f=(0,rf.xem)(),vn.c(),s=(0,rf.xem)(),dn&&dn.c(),l=(0,rf.xem)(),h=(0,rf.ND4)("div"),v=(0,rf.ND4)("input"),b=(0,rf.xem)(),y=(0,rf.ND4)("input"),w=(0,rf.xem)(),bn&&bn.c(),j=(0,rf.xem)(),_=(0,rf.ND4)("div"),S=(0,rf.ND4)("i"),O=(0,rf.xem)(),E=(0,rf.ND4)("select"),mn.c(),T=(0,rf.xem)(),wn&&wn.c(),k=(0,rf.xem)(),gn&&gn.c(),x=(0,rf.xem)(),A=(0,rf.ND4)("div"),(I=(0,rf.ND4)("div")).textContent="".concat(u("links"),":"),M=(0,rf.xem)(),R=(0,rf.ND4)("input"),U=(0,rf.xem)(),jn&&jn.c(),P=(0,rf.xem)(),B=(0,rf.ND4)("div"),N=(0,rf.ND4)("i"),D=(0,rf.xem)(),$=(0,rf.ND4)("select");for(var on=0;on<Sn.length;on+=1)Sn[on].c();G=(0,rf.xem)(),L=(0,rf.ND4)("div"),z=(0,rf.ND4)("div"),F=(0,rf.Qq7)(an),W=(0,rf.xem)(),q=(0,rf.ND4)("span"),X=(0,rf.Qq7)(fn),J=(0,rf.xem)(),En&&En.c(),Q=(0,rf.xem)(),kn&&kn.c(),V=(0,rf.xem)(),Y=(0,rf.ND4)("div"),(Z=(0,rf.ND4)("button")).textContent="".concat(u("cancel")),K=(0,rf.xem)(),nn=(0,rf.ND4)("button"),An&&An.c(),tn=(0,rf.xem)(),Mn&&Mn.c(),rn=(0,rf.xem)(),Rn&&Rn.c(),en=(0,rf.Iex)(),a.disabled=n[1],(0,rf.Xrn)(a,"file"),(0,rf.CFu)(a,"title",u("fileDesc")),(0,rf.CFu)(a,"accept",Mp),(0,rf.CFu)(a,"name","avatar"),(0,rf.CFu)(c,"class","chat-form__avatar box-file"),v.disabled=n[1],(0,rf.Xrn)(v,"text"),(0,rf.CFu)(v,"class",d="input-no-border chat-form__name"+(n[0].errorName?" input-no-border_error":"")),(0,rf.CFu)(v,"placeholder",u("nameNSymbols",60)),(0,rf.CFu)(v,"maxlength","60"),y.disabled=n[1],(0,rf.Xrn)(y,"text"),(0,rf.CFu)(y,"class",p="input-no-border"+(n[0].errorDescription?" input-no-border_error":"")),(0,rf.CFu)(y,"placeholder",u("descNSymbols",90)),(0,rf.CFu)(y,"maxlength","90"),(0,rf.CFu)(h,"class","chat-form__avatar-form"),(0,rf.CFu)(o,"class",g="chat-form__avatar-block"+(n[0].avatarError?" chat-form__avatar-block_error":"")),(0,rf.CFu)(e,"class","chat-form__item"),(0,rf.CFu)(S,"class","icons-ux icons-ux_arrow-down-gray"),(0,rf.CFu)(E,"name","ispublic"),E.disabled=n[1],(0,rf.CFu)(_,"class",C="chat-form__options"+(n[1]?" chat-form__options_disabled":"")),(0,rf.CFu)(I,"class","chat-form__label"),(0,rf.CFu)(R,"autocomplete","off"),(0,rf.CFu)(R,"class","input-no-border"),(0,rf.CFu)(R,"placeholder",u("linksPlaceholder")),(0,rf.Xrn)(R,"text"),R.disabled=n[1],(0,rf.CFu)(A,"class","chat-form__item chat-form__item_input"),(0,rf.CFu)(N,"class","icons-ux icons-ux_arrow-down-gray"),(0,rf.CFu)($,"name","language"),$.disabled=n[1],void 0===n[0].language&&(0,rf.Dti)(function(){return np(this,m),n[25].call($)}.bind(this)),(0,rf.CFu)(z,"class","chat-form__option-name"),(0,rf.CFu)(q,"class","chat-form__desc-label"),(0,rf.CFu)(L,"class","chat-form__option"),(0,rf.CFu)(B,"class",H="chat-form__options"+(n[1]?" chat-form__options_disabled":"")),(0,rf.CFu)(Z,"class","button button_white"),(0,rf.CFu)(nn,"class","button button_green"),nn.disabled=n[1],(0,rf.CFu)(Y,"class","chat-form__buttons"),(0,rf.CFu)(r,"class","chat-form__content"),(0,rf.CFu)(t,"class","chat-form")},m:function(u,d){(0,rf.Yry)(u,t,d),(0,rf.BCw)(t,r),sn&&sn.m(r,null),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),(0,rf.BCw)(e,o),(0,rf.BCw)(o,c),(0,rf.BCw)(c,a),n[17](a),(0,rf.BCw)(c,f),vn.m(c,null),(0,rf.BCw)(c,s),dn&&dn.m(c,null),(0,rf.BCw)(o,l),(0,rf.BCw)(o,h),(0,rf.BCw)(h,v),(0,rf.Gvd)(v,n[0].name),(0,rf.BCw)(h,b),(0,rf.BCw)(h,y),(0,rf.Gvd)(y,n[0].description),(0,rf.BCw)(h,w),bn&&bn.m(h,null),(0,rf.BCw)(r,j),(0,rf.BCw)(r,_),(0,rf.BCw)(_,S),(0,rf.BCw)(_,O),(0,rf.BCw)(_,E),mn.m(E,null),(0,rf.BCw)(_,T),wn&&wn.m(_,null),(0,rf.BCw)(_,k),gn&&gn.m(_,null),(0,rf.BCw)(r,x),(0,rf.BCw)(r,A),(0,rf.BCw)(A,I),(0,rf.BCw)(A,M),(0,rf.BCw)(A,R),(0,rf.Gvd)(R,n[0].links),(0,rf.BCw)(r,U),jn&&jn.m(r,null),(0,rf.BCw)(r,P),(0,rf.BCw)(r,B),(0,rf.BCw)(B,N),(0,rf.BCw)(B,D),(0,rf.BCw)(B,$);for(var p=0;p<Sn.length;p+=1)Sn[p]&&Sn[p].m($,null);(0,rf.fs8)($,n[0].language,!0),(0,rf.BCw)(B,G),(0,rf.BCw)(B,L),(0,rf.BCw)(L,z),(0,rf.BCw)(z,F),(0,rf.BCw)(L,W),(0,rf.BCw)(L,q),(0,rf.BCw)(q,X),(0,rf.BCw)(r,J),En&&En.m(r,null),(0,rf.BCw)(r,Q),kn&&kn.m(r,null),(0,rf.BCw)(r,V),(0,rf.BCw)(r,Y),(0,rf.BCw)(Y,Z),(0,rf.BCw)(Y,K),(0,rf.BCw)(Y,nn),An&&An.m(nn,null),(0,rf.BCw)(Y,tn),Mn&&Mn.m(Y,null),(0,rf.Yry)(u,rn,d),Rn&&Rn.m(u,d),(0,rf.Yry)(u,en,d),on=!0,un||(cn=[(0,rf.KTR)(a,"input",n[11]),(0,rf.KTR)(v,"input",n[18]),(0,rf.KTR)(v,"input",n[19]),(0,rf.KTR)(y,"input",n[20]),(0,rf.KTR)(y,"input",n[21]),(0,rf.KTR)(E,"change",n[9]),(0,rf.KTR)(R,"input",n[22]),(0,rf.KTR)($,"change",n[25]),(0,rf.KTR)(Z,"click",(0,rf.xZN)(n[8])),(0,rf.KTR)(nn,"click",(0,rf.xZN)(n[10]))],un=!0)},p:function(n,t){var e=this;if(n[0].errorCommon?sn?sn.p(n,t):((sn=sp(n)).c(),sn.m(r,i)):sn&&(sn.d(1),sn=null),(!on||2&t[0])&&(a.disabled=n[1]),hn===(hn=ln(n))&&vn?vn.p(n,t):(vn.d(1),(vn=hn(n))&&(vn.c(),vn.m(c,s))),n[0].avatar?dn?dn.p(n,t):((dn=vp(n)).c(),dn.m(c,null)):dn&&(dn.d(1),dn=null),(!on||2&t[0])&&(v.disabled=n[1]),(!on||1&t[0]&&d!==(d="input-no-border chat-form__name"+(n[0].errorName?" input-no-border_error":"")))&&(0,rf.CFu)(v,"class",d),1&t[0]&&v.value!==n[0].name&&(0,rf.Gvd)(v,n[0].name),(!on||2&t[0])&&(y.disabled=n[1]),(!on||1&t[0]&&p!==(p="input-no-border"+(n[0].errorDescription?" input-no-border_error":"")))&&(0,rf.CFu)(y,"class",p),1&t[0]&&y.value!==n[0].description&&(0,rf.Gvd)(y,n[0].description),n[0].avatarError?bn?bn.p(n,t):((bn=dp(n)).c(),bn.m(h,null)):bn&&(bn.d(1),bn=null),(!on||1&t[0]&&g!==(g="chat-form__avatar-block"+(n[0].avatarError?" chat-form__avatar-block_error":"")))&&(0,rf.CFu)(o,"class",g),pn===(pn=yn(n))&&mn?mn.p(n,t):(mn.d(1),(mn=pn(n))&&(mn.c(),mn.m(E,null))),(!on||2&t[0])&&(E.disabled=n[1]),n[0].isPublic?wn&&(wn.d(1),wn=null):wn?wn.p(n,t):((wn=pp(n)).c(),wn.m(_,k)),n[0].isPublic?gn?gn.p(n,t):((gn=gp(n)).c(),gn.m(_,null)):gn&&(gn.d(1),gn=null),(!on||2&t[0]&&C!==(C="chat-form__options"+(n[1]?" chat-form__options_disabled":"")))&&(0,rf.CFu)(_,"class",C),(!on||2&t[0])&&(R.disabled=n[1]),1&t[0]&&R.value!==n[0].links&&(0,rf.Gvd)(R,n[0].links),!n[3]&&n[0].isPublic?jn?jn.p(n,t):((jn=Sp(n)).c(),jn.m(r,P)):jn&&(jn.d(1),jn=null),0&t){var f;for(_n=(0,rf.rv_)(Object.entries(m)),f=0;f<_n.length;f+=1){var l=fp(n,_n,f);Sn[f]?Sn[f].p(l,t):(Sn[f]=Ep(l),Sn[f].c(),Sn[f].m($,null))}for(;f<Sn.length;f+=1)Sn[f].d(1);Sn.length=_n.length}(!on||2&t[0])&&($.disabled=n[1]),1&t[0]&&(0,rf.fs8)($,n[0].language),(!on||8&t[0])&&an!==(an=u(n[3]?"chatLanguage":"channelLanguage")+"")&&(0,rf.iQh)(F,an),(!on||1&t[0])&&fn!==(fn=u(m[n[0].language])+"")&&(0,rf.iQh)(X,fn),(!on||2&t[0]&&H!==(H="chat-form__options"+(n[1]?" chat-form__options_disabled":"")))&&(0,rf.CFu)(B,"class",H),n[3]||n[2]?En?(En.p(n,t),12&t[0]&&(0,rf.c7F)(En,1)):((En=Tp(n)).c(),(0,rf.c7F)(En,1),En.m(r,Q)):En&&((0,rf.V44)(),(0,rf.Tn8)(En,1,1,function(){np(this,e),En=null}.bind(this)),(0,rf.GYV)()),kn&&kn.p&&(!on||67108864&t[0])&&(0,rf.nkG)(kn,Tn,n,n[26],on?(0,rf.sWk)(Tn,n[26],t,op):(0,rf.i32)(n[26]),up),xn?xn.p&&(!on||67108864&t[0])&&(0,rf.nkG)(xn,Cn,n,n[26],on?(0,rf.sWk)(Cn,n[26],t,ip):(0,rf.i32)(n[26]),ep):An&&An.p&&(!on||8&t[0])&&An.p(n,on?t:[-1,-1]),(!on||2&t[0])&&(nn.disabled=n[1]),Mn&&Mn.p&&(!on||67108864&t[0])&&(0,rf.nkG)(Mn,In,n,n[26],on?(0,rf.sWk)(In,n[26],t,tp):(0,rf.i32)(n[26]),rp),n[5]?Rn?(Rn.p(n,t),32&t[0]&&(0,rf.c7F)(Rn,1)):((Rn=Cp(n)).c(),(0,rf.c7F)(Rn,1),Rn.m(en.parentNode,en)):Rn&&((0,rf.V44)(),(0,rf.Tn8)(Rn,1,1,function(){np(this,e),Rn=null}.bind(this)),(0,rf.GYV)())},i:function(n){on||((0,rf.c7F)(En),(0,rf.c7F)(kn,n),(0,rf.c7F)(An,n),(0,rf.c7F)(Mn,n),(0,rf.c7F)(Rn),on=!0)},o:function(n){(0,rf.Tn8)(En),(0,rf.Tn8)(kn,n),(0,rf.Tn8)(An,n),(0,rf.Tn8)(Mn,n),(0,rf.Tn8)(Rn),on=!1},d:function(r){r&&((0,rf.YoD)(t),(0,rf.YoD)(rn),(0,rf.YoD)(en)),sn&&sn.d(),n[17](null),vn.d(),dn&&dn.d(),bn&&bn.d(),mn.d(),wn&&wn.d(),gn&&gn.d(),jn&&jn.d(),(0,rf.ppq)(Sn,r),En&&En.d(),kn&&kn.d(r),An&&An.d(r),Mn&&Mn.d(r),Rn&&Rn.d(r),un=!1,(0,rf.oOW)(cn)}}}var Mp=".png, .jpg, .jpeg, .gif",Rp=200;function Up(n,t,r){var i,e,o=this,c=t.$$slots,a=void 0===c?{}:c,f=t.$$scope,s=(0,cf.ur)(),l=t.chat,h=t.disabled,v=void 0!==h&&h,d=t.withUsers,b=void 0!==d&&d,y=undefined,p=undefined,m="".concat(ur?"":"https://www.mql5.com","/").concat(or,"/channels/");function w(){e&&(r(4,e.type="",e),r(4,e.value="",e),r(4,e.type="file",e))}var g=function(){np(this,o),r(5,p=undefined),w()}.bind(this),j=function(){np(this,o),s("close")}.bind(this);var _=function(){np(this,o);var n=!1;if(l.inviteLink.length&&(l.inviteLink.length<5||!/^[a-zA-Z][a-zA-Z0-9_\-]{4,63}$/.test(l.inviteLink))&&r(0,l.errorInviteLink=u("urlChannelDesc",5),l),l.name.length<3&&(r(0,l.errorName=!0,l),n=!0),l.isPublic&&l.description.length<3&&(r(0,l.errorDescription=!0,l),n=!0),l.isPublic&&!l.avatar){var t=i?"pleaseUploadAvatar":"pleaseUploadAvatarChannel";r(0,l.avatarError=u(t),l),n=!0}l.isPublic&&l.errorInviteLink&&(n=!0),n||s("submit")}.bind(this);var S=function(){np(this,o),r(0,l.errorName=l.name.length<3,l)}.bind(this);var O=function(){np(this,o),r(0,l.errorDescription=l.description.length<3,l)}.bind(this);var E=function(){var n=this;np(this,o),setTimeout(function(){np(this,n),l.errorInviteLink&&r(0,l.errorInviteLink=undefined,l)}.bind(this),0)}.bind(this);return n.$$set=function(n){np(this,o),"chat"in n&&r(0,l=n.chat),"disabled"in n&&r(1,v=n.disabled),"withUsers"in n&&r(2,b=n.withUsers),"$$scope"in n&&r(26,f=n.$$scope)}.bind(this),n.$$.update=function(){np(this,o),32769&n.$$.dirty[0]&&(y===l.isPublic||l.isPublic||(l.avatarError&&r(0,l.avatarError=undefined,l),l.errorDescription&&r(0,l.errorDescription=!1,l)),r(15,y=l.isPublic)),1&n.$$.dirty[0]&&r(3,i=l.type===On)}.bind(this),[l,v,b,i,e,p,m,g,j,function(n){var t=n.target;r(0,l.isPublic=Boolean(parseInt(t.value,10)),l)},_,function(n){var t=n.target;if(t.files){var i=t.files[0];if(i){var e=new FileReader;e.onload=function(n){var t,e=new Image;e.onload=function(){var n=e.width,t=e.height;n>=Rp&&t>=Rp?function(n){r(5,p=n)}(i):r(0,l.avatarError=u("avatarErrorSize",Rp,Rp),l)},e.src=null===(t=n.target)||void 0===t?void 0:t.result},e.readAsDataURL(i)}else r(0,l.avatar=undefined,l)}},function(){r(0,l.avatar=undefined,l),r(0,l.avatarIsPresent=!1,l),r(0,l.avatarToUpload=undefined,l)},function(n){n&&n.target&&r(0,l.isLimited=!n.target.checked,l)},function(){var n=this;(function(){var n=this;return new Promise(function(t,r){var i=this;By(this,n),$y?$y.toBlob?$y.toBlob(function(n){By(this,i),n?t(Object.assign(n,{lastModified:(new Date).getTime(),name:"avatar",webkitRelativePath:""})):r(new Error("Blob is null"))}.bind(this)):r(new Error("toBlob is undefined")):r(new Error("Canvas is undefined"))}.bind(this))})().then(function(t){var i,e;np(this,n),i=t,e=URL.createObjectURL(i),r(0,l.avatarToUpload=i,l),r(0,l.avatar=e,l),r(0,l.avatarError=undefined,l),r(0,l.avatarIsPresent=!0,l),w(),r(5,p=undefined)}.bind(this))},y,a,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){np(this,t),r(4,e=n)}.bind(this))},function(){l.name=this.value,r(0,l),r(15,y)},S,function(){l.description=this.value,r(0,l),r(15,y)},O,function(){l.links=this.value,r(0,l),r(15,y)},E,function(){l.inviteLink=this.value,r(0,l),r(15,y)},function(){l.language=(0,rf.Hw5)(this),r(0,l),r(15,y)},f]}var Pp=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Vy(this,t),(0,rf.TsN)(r,n,Up,Ip,rf.jXN,{chat:0,disabled:1,withUsers:2},null,[-1,-1]),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Ky(n,t)}(t,n),function(n,t,r){return t&&Jy(n.prototype,t),r&&Jy(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Bp=Pp;function Np(n){return Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Np(n)}function Dp(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,$p(i.key),i)}}function $p(n){var t=function(n,t){if("object"!=Np(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Np(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Np(t)?t:t+""}function Gp(n,t,r){return t=zp(t),function(n,t){if(t&&("object"==Np(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Lp()?Reflect.construct(t,r||[],zp(n).constructor):t.apply(n,r))}function Lp(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Lp=function(){return!!n})()}function zp(n){return zp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zp(n)}function Fp(n,t){return Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Fp(n,t)}function Wp(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return qp(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(qp(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,qp(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,qp(l,"constructor",f),qp(f,"constructor",a),a.displayName="GeneratorFunction",qp(f,e,"GeneratorFunction"),qp(l),qp(l,e,"Generator"),qp(l,i,function(){return this}),qp(l,"toString",function(){return"[object Generator]"}),(Wp=function(){return{w:o,m:h}})()}function qp(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}qp=function(n,t,r,i){function o(t,r){qp(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},qp(n,t,r,i)}function Xp(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Hp(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Jp(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jp(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jp(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Qp(n){var t,r,i,e,o,c=u("membersCount",gr(n[1].countMembers))+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("a"),i=(0,rf.Qq7)(c),(0,rf.CFu)(r,"href","/#"),(0,rf.CFu)(r,"class","chat-form__users-button qa-edit-members"),(0,rf.CFu)(t,"class","chat-info__label")},m:function(u,c){(0,rf.Yry)(u,t,c),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),e||(o=(0,rf.KTR)(r,"click",(0,rf.xZN)(n[18])),e=!0)},p:function(n,t){2&t&&c!==(c=u("membersCount",gr(n[1].countMembers))+"")&&(0,rf.iQh)(i,c)},d:function(n){n&&(0,rf.YoD)(t),e=!1,o()}}}function Vp(n){var t,r,i,e,o,c,a=u("membersCount",gr(n[1].countMembers))+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(a),i=(0,rf.xem)(),(e=(0,rf.ND4)("a")).textContent="".concat(u("editMembers")),(0,rf.CFu)(t,"class","chat-info__label"),(0,rf.CFu)(e,"href","/#"),(0,rf.CFu)(e,"class","chat-form__users-button qa-edit-members")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.Yry)(u,i,a),(0,rf.Yry)(u,e,a),o||(c=(0,rf.KTR)(e,"click",(0,rf.xZN)(n[17])),o=!0)},p:function(n,t){2&t&&a!==(a=u("membersCount",gr(n[1].countMembers))+"")&&(0,rf.iQh)(r,a)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(i),(0,rf.YoD)(e)),o=!1,c()}}}function Yp(n){var t;function r(n,t){return n[6]&&n[1].isSubscribed&&!n[1].isLimited||n[1].perms&qn.I?Vp:Qp}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("div"),e.c(),(0,rf.CFu)(t,"slot","users")},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function Zp(n){var t,r=(n[2].userName||n[2].userLogin)+"";return{c:function(){t=(0,rf.Qq7)(r)},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){4&i&&r!==(r=(n[2].userName||n[2].userLogin)+"")&&(0,rf.iQh)(t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function Kp(n){var t,r=u("deletedAccount")+"";return{c:function(){t=(0,rf.Qq7)(r)},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function nm(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).textContent="".concat(u("unsubscribe")),(0,rf.CFu)(t,"class","button button_yellow")},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",n[15]),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function tm(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b=Le&&function(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j=Qr({date:n[1].created})+"",_=mt(yt(n[1].chatId))+"",S=dt(yt(n[1].chatId))+"";function O(n,t){return n[2].isDeleted?Kp:Zp}var E=O(n),T=E(n);return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("owner")),i=(0,rf.xem)(),e=(0,rf.ND4)("a"),T.c(),o=(0,rf.xem)(),c=(0,rf.ND4)("div"),(a=(0,rf.ND4)("div")).textContent="".concat(u("created")),f=(0,rf.xem)(),s=(0,rf.Qq7)(j),l=(0,rf.xem)(),h=(0,rf.ND4)("div"),(v=(0,rf.ND4)("div")).textContent="Chat id hex",d=(0,rf.xem)(),b=(0,rf.Qq7)(_),y=(0,rf.xem)(),p=(0,rf.ND4)("div"),(m=(0,rf.ND4)("div")).textContent="Chat id",w=(0,rf.xem)(),g=(0,rf.Qq7)(S),(0,rf.CFu)(r,"class","chat-info__label"),(0,rf.CFu)(e,"href",n[3]),(0,rf.CFu)(e,"target","_blank"),(0,rf.CFu)(t,"class","chat-form__item"),(0,rf.CFu)(a,"class","chat-info__label"),(0,rf.CFu)(c,"class","chat-form__item"),(0,rf.CFu)(v,"class","chat-info__label"),(0,rf.CFu)(h,"class","chat-form__item"),(0,rf.CFu)(m,"class","chat-info__label"),(0,rf.CFu)(p,"class","chat-form__item")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),T.m(e,null),(0,rf.Yry)(n,o,u),(0,rf.Yry)(n,c,u),(0,rf.BCw)(c,a),(0,rf.BCw)(c,f),(0,rf.BCw)(c,s),(0,rf.Yry)(n,l,u),(0,rf.Yry)(n,h,u),(0,rf.BCw)(h,v),(0,rf.BCw)(h,d),(0,rf.BCw)(h,b),(0,rf.Yry)(n,y,u),(0,rf.Yry)(n,p,u),(0,rf.BCw)(p,m),(0,rf.BCw)(p,w),(0,rf.BCw)(p,g)},p:function(n,t){E===(E=O(n))&&T?T.p(n,t):(T.d(1),(T=E(n))&&(T.c(),T.m(e,null))),8&t&&(0,rf.CFu)(e,"href",n[3]),2&t&&j!==(j=Qr({date:n[1].created})+"")&&(0,rf.iQh)(s,j),2&t&&_!==(_=mt(yt(n[1].chatId))+"")&&(0,rf.iQh)(b,_),2&t&&S!==(S=dt(yt(n[1].chatId))+"")&&(0,rf.iQh)(g,S)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(o),(0,rf.YoD)(c),(0,rf.YoD)(l),(0,rf.YoD)(h),(0,rf.YoD)(y),(0,rf.YoD)(p)),T.d()}}}(n),y=Le&&function(n){var t,r,i,e,o,c,a,f,s,l,h;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),(i=(0,rf.ND4)("div")).textContent="".concat(u("verified")),e=(0,rf.xem)(),o=(0,rf.ND4)("div"),c=(0,rf.ND4)("input"),f=(0,rf.xem)(),s=(0,rf.ND4)("label"),(0,rf.CFu)(i,"class","chat-info__toggle-text"),(0,rf.Xrn)(c,"checkbox"),(0,rf.CFu)(c,"class","toggle-btn__checkbox"),(0,rf.CFu)(c,"name","isVerified"),(0,rf.CFu)(c,"id","chatIsVerified"),c.checked=a=n[9].isVerified,(0,rf.CFu)(s,"for","chatIsVerified"),(0,rf.CFu)(o,"class","toggle-btn"),(0,rf.CFu)(r,"class","chat-info__toggle"),(0,rf.CFu)(t,"class","chat-form__item")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),(0,rf.BCw)(r,o),(0,rf.BCw)(o,c),(0,rf.BCw)(o,f),(0,rf.BCw)(o,s),l||(h=(0,rf.KTR)(c,"change",n[14]),l=!0)},p:function(n,t){512&t&&a!==(a=n[9].isVerified)&&(c.checked=a)},d:function(n){n&&(0,rf.YoD)(t),l=!1,h()}}}(n),p=n[8]&&(!n[6]||1===n[1].countMembers)&&nm(n),m=Le&&function(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).textContent="".concat(u("deleteUpper")),(0,rf.CFu)(t,"class","button button_red")},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",n[16]),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}(n);return{c:function(){t=(0,rf.ND4)("div"),b&&b.c(),r=(0,rf.xem)(),y&&y.c(),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),(o=(0,rf.ND4)("div")).textContent="".concat(u("management")),c=(0,rf.xem)(),a=(0,rf.ND4)("div"),f=(0,rf.ND4)("button"),s=(0,rf.Qq7)(n[7]),l=(0,rf.xem)(),p&&p.c(),h=(0,rf.xem)(),m&&m.c(),(0,rf.CFu)(o,"class","chat-form__label"),(0,rf.CFu)(f,"class","button button_white"),(0,rf.CFu)(a,"class","chat-form__buttons chat-form__buttons_without-margin"),(0,rf.CFu)(e,"class","chat-form__item"),(0,rf.CFu)(t,"slot","content")},m:function(u,w){(0,rf.Yry)(u,t,w),b&&b.m(t,null),(0,rf.BCw)(t,r),y&&y.m(t,null),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(e,o),(0,rf.BCw)(e,c),(0,rf.BCw)(e,a),(0,rf.BCw)(a,f),(0,rf.BCw)(f,s),(0,rf.BCw)(a,l),p&&p.m(a,null),(0,rf.BCw)(a,h),m&&m.m(a,null),v||(d=(0,rf.KTR)(f,"click",n[13]),v=!0)},p:function(n,t){Le&&b.p(n,t),Le&&y.p(n,t),128&t&&(0,rf.iQh)(s,n[7]),!n[8]||n[6]&&1!==n[1].countMembers?p&&(p.d(1),p=null):p?p.p(n,t):((p=nm(n)).c(),p.m(a,h)),Le&&m.p(n,t)},d:function(n){n&&(0,rf.YoD)(t),b&&b.d(),y&&y.d(),p&&p.d(),m&&m.d(),v=!1,d()}}}function rm(n){var t;return{c:function(){(t=(0,rf.ND4)("span")).textContent="".concat(u("save")),(0,rf.CFu)(t,"slot","button-name")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function im(n){var t,r,i;return(r=new Bp({props:{chat:n[1],withUsers:!0,disabled:n[1].isClosed,$$slots:{"button-name":[rm],content:[tm],users:[Yp]},$$scope:{ctx:n}}})).$on("close",n[12]),r.$on("submit",n[11]),{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"slot","content")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.wSR)(r,t,null),i=!0},p:function(n,t){var i={};2&t&&(i.chat=n[1]),2&t&&(i.disabled=n[1].isClosed),16779246&t&&(i.$$scope={dirty:t,ctx:n}),r.$set(i)},i:function(n){i||((0,rf.c7F)(r.$$.fragment,n),i=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),i=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r)}}}function em(n){var t,r;return(t=new ny({})).$on("close",n[19]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function om(n){var t,r,i,e;(t=new Cs({props:{withTitle:!1,withButtons:!1,$$slots:{content:[im]},$$scope:{ctx:n}}})).$on("close",n[12]);var o=n[5]&&em(n);return{c:function(){(0,rf.N0i)(t.$$.fragment),r=(0,rf.xem)(),o&&o.c(),i=(0,rf.Iex)()},m:function(n,u){(0,rf.wSR)(t,n,u),(0,rf.Yry)(n,r,u),o&&o.m(n,u),(0,rf.Yry)(n,i,u),e=!0},p:function(n,r){var e=this,u=Hp(r,1)[0],c={};16779246&u&&(c.$$scope={dirty:u,ctx:n}),t.$set(c),n[5]?o?(o.p(n,u),32&u&&(0,rf.c7F)(o,1)):((o=em(n)).c(),(0,rf.c7F)(o,1),o.m(i.parentNode,i)):o&&((0,rf.V44)(),(0,rf.Tn8)(o,1,1,function(){Xp(this,e),o=null}.bind(this)),(0,rf.GYV)())},i:function(n){e||((0,rf.c7F)(t.$$.fragment,n),(0,rf.c7F)(o),e=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),(0,rf.Tn8)(o),e=!1},d:function(n){n&&((0,rf.YoD)(r),(0,rf.YoD)(i)),(0,rf.Hbl)(t,n),o&&o.d(n)}}}function um(n,t,r){var i,o,c,a,f,s,l,h=this,v=rf.lQ1,d=function(){var n=this;return Xp(this,h),v(),v=(0,rf.B1Y)(w,function(t){return Xp(this,n),r(1,a=t)}.bind(this)),w}.bind(this),b=rf.lQ1,p=function(){var n=this;return Xp(this,h),b(),b=(0,rf.B1Y)(g,function(t){return Xp(this,n),r(2,s=t)}.bind(this)),g}.bind(this);(0,rf.j0C)(n,Po,function(n){return Xp(this,h),r(9,f=n)}.bind(this)),(0,rf.j0C)(n,Ft,function(n){return Xp(this,h),r(10,l=n)}.bind(this)),n.$$.on_destroy.push(function(){return Xp(this,h),v()}.bind(this)),n.$$.on_destroy.push(function(){return Xp(this,h),b()}.bind(this));var m=this&&this.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},w=t.chat;d();var g,j=(0,cf.ur)(),_="",S=!1;function O(){var n=this;Le&&!a.isSubscribed&&se(a.chatId).then(function(t){Xp(this,n),t&&eu(t)}.bind(this))["catch"](function(t){Xp(this,n),y.error(e.S,t,"Main")}.bind(this)),E()}function E(){ru(),j("close")}var T=function(){Xp(this,h),r(5,S=!0)}.bind(this),k=function(){Xp(this,h),(0,rf.vu6)(Ft,l["delete"]=!0,l)}.bind(this),C=function(){Xp(this,h),(0,rf.vu6)(Ft,l.listMembers=!0,l)}.bind(this),x=function(){Xp(this,h),(0,rf.vu6)(Ft,l.listMembers=!0,l)}.bind(this),A=function(){Xp(this,h),r(5,S=!1)}.bind(this);return n.$$set=function(n){Xp(this,h),"chat"in n&&d(r(0,w=n.chat))}.bind(this),n.$$.update=function(){Xp(this,h),2&n.$$.dirty&&r(8,i=a.authorId===$e),2&n.$$.dirty&&r(6,o=a.type===On),2&n.$$.dirty&&r(7,c=a.isClosed?u(o?"openGroup":"openChannel"):u(o?"closeGroup":"closeChannel")),6&n.$$.dirty&&Le&&!s&&p(r(4,g=Js(a.authorId))),4&n.$$.dirty&&s&&s.userLogin&&r(3,_="/".concat(or,"/users/").concat(s.userLogin))}.bind(this),[w,a,s,_,g,S,o,c,i,f,l,function(){var n=this;(0,rf.vu6)(w,a.errorCommon="",a),Zi(a).then(function(){var t=this;Xp(this,n),a.avatarIsPresent&&a.avatarToUpload?Qi(a.avatarToUpload,a.chatId).then(O)["catch"](function(n){Xp(this,t),(0,rf.vu6)(w,a.avatarError=n.message,a),y.error(e.USER,n,"Upload avatar")}.bind(this)):a.avatarIsPresent?O():function(n){var t=this;return new Promise(function(r,i){var e=this;if(Vi(this,t),n)if(0!==parseInt(n,16)){var o=[yt(n),{Uint8:0}];ir.send(X,o).then(function(){Vi(this,e),r()}.bind(this))["catch"](function(n){Vi(this,e),i(n)}.bind(this))}else i(new Error("Chat id is zero"));else i(new Error("Chat id is empty"))}.bind(this))}(a.chatId).then(O)["catch"](function(n){Xp(this,t),(0,rf.vu6)(w,a.errorCommon=n.message,a),y.error(e.USER,n,"Delete avatar")}.bind(this))}.bind(this))["catch"](function(t){Xp(this,n),y.error(e.USER,t,"Edit chat");var r=t;parseInt(r.name,10)===bn?(0,rf.vu6)(w,a.errorInviteLink=u("inviteLinkExists"),a):(0,rf.vu6)(w,a.errorCommon=r.message,a)}.bind(this))},E,function(){var n=this,t=iu(f);t.isClosed=!t.isClosed,(0,rf.vu6)(w,a=t,a),Zi(a).then(function(){Xp(this,n)}.bind(this))["catch"](function(t){Xp(this,n),y.error(e.USER,t,"Close chat")}.bind(this))},function(n){return m(this,void 0,void 0,Wp().m(function t(){var r,i,o;return Wp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!n||!n.target){t.n=4;break}return(0,rf.vu6)(w,a.errorCommon="",a),r=n.target.checked,t.p=1,t.n=2,Oe(f.chatId,r);case 2:i=t.v,i.result===gn?((0,rf.vu6)(Po,f.isVerified=r,f),Pb(f,r)):(0,rf.vu6)(w,a.errorCommon="Error setting the verification value",a),t.n=4;break;case 3:t.p=3,o=t.v,y.error(e.USER,o,"Change the verification");case 4:return t.a(2)}},t,null,[[1,3]])}))},T,k,C,x,A]}var cm=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Gp(this,t),(0,rf.TsN)(r,n,um,om,rf.jXN,{chat:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Fp(n,t)}(t,n),function(n,t,r){return t&&Dp(n.prototype,t),r&&Dp(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const am=cm;var fm=undefined;function sm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var lm,hm=(0,Ot.T5)(undefined),vm=(0,Ot.T5)([]),dm=(0,Ot.T5)(""),bm={};function ym(n){bm[n]||(bm[n]={text:"",files:[],reply:undefined})}function pm(){var n=No();n&&bm[n.chatId]?(hm.set(bm[n.chatId].reply),vm.set(bm[n.chatId].files),dm.set(bm[n.chatId].text)):(hm.set(undefined),vm.set([]),dm.set(""))}function mm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function wm(n){return function(n){if(Array.isArray(n))return gm(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return gm(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gm(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gm(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function jm(n,t,r){var i=this,e=arguments.length>3&&arguments[3]!==undefined?arguments[3]:w;n&&n.addEventListener("paste",function(n){if(mm(this,i),n){var o=n.clipboardData;if(o&&o.files&&o.files.length){var u=o.files;t&&t(function(n){var t=this,i=[];return(n=wm(n))&&n.length?(n.forEach(function(n){mm(this,t);var o=Nr(n.name);~e.indexOf(o)?i.push(n):r&&r("".concat(mr("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),i):i}(u))}}}.bind(this))}function _m(n){return _m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_m(n)}function Sm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Om(n){var t=this,r=n.tag,i=void 0===r?"div":r,e=n.attributes,o=void 0===e?undefined:e,u=n.classList,c=void 0===u?undefined:u,a=n.listeners,f=void 0===a?undefined:a,s=n.properties,l=void 0===s?undefined:s,h=n.children,v=void 0===h?undefined:h,d=n.fzEvent,b=void 0===d?undefined:d,y=n.fzEventAction,p=void 0===y?"click":y,m=i instanceof Node?i:document.createElement(i);(c&&c.forEach(function(n){Sm(this,t),n&&m.classList.add(n)}.bind(this)),o)&&Object.keys(o).forEach(function(n){Sm(this,t),m.setAttribute(n,o[n])}.bind(this));l&&Object.keys(l).forEach(function(n){Sm(this,t),m[n]=l[n]}.bind(this));f&&Object.keys(f).forEach(function(n){Sm(this,t),m.addEventListener(n,f[n])}.bind(this));if(b&&m.addEventListener(p,function(){Sm(this,t),"object"===_m(b)?window.fz&&window.fz("event",b):window.fz&&window.fz("track",b)}.bind(this)),!v)return m;if("string"==typeof v)m.innerHTML=v;else if(v instanceof Node)m.appendChild(v);else for(var w=0,g=v.length;w<g;w++){var j=v[w];j&&("string"!=typeof j?(j instanceof Node||(j=Om(j)),m.appendChild(j)):m.insertAdjacentHTML("beforeend",j))}return m}function Em(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Tm(n){return function(n){if(Array.isArray(n))return km(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||function(n,t){if(n){if("string"==typeof n)return km(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?km(n,t):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function km(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Cm(n,t,r){var i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:w;if(n){var e,o=Om({classList:["drag-and-drop","hidden"],listeners:{dragover:c,dragenter:c,dragleave:a,drop:function(n){if(!n)return;n.stopPropagation(),n.preventDefault();var e=n.dataTransfer;if(!e||!e.files||!e.files.length)return void a();var o=e.files;t&&t(function(n){var t=this,e=[];if(n=Tm(n),!n||!n.length)return e;return n.forEach(function(n){Em(this,t);var o=Nr(n.name);~i.indexOf(o)?e.push(n):r&&r("".concat(mr("errorInvalidExtension"),": ").concat(n.name))}.bind(this)),e}(o));a()}},children:[Om({classList:["drag-and-drop__title"],children:mr("dragAndDrop")})]}),u=Om({classList:["drag-and-drop__errors"]});n.appendChild(o),n.appendChild(u),n.addEventListener("dragover",c),n.addEventListener("dragenter",c)}function c(n){n&&(n.stopPropagation(),n.preventDefault(),n.dataTransfer&&n.dataTransfer.items&&n.dataTransfer.items.length?(clearTimeout(e),n.dataTransfer.dropEffect="copy",o.classList.remove("hidden")):a())}function a(){var n=this;clearTimeout(e),e=setTimeout(function(){Em(this,n),o.classList.add("hidden")}.bind(this),100)}}function xm(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Am(n,t){var r=this;return new Promise(function(i,e){var o=this;if(xm(this,r),n)if(n.type.match(/image.*/)){var u=new Image,c=URL.createObjectURL(n),a=setTimeout(function(){return xm(this,o),URL.revokeObjectURL(c),u.removeEventListener("error",f),u.removeEventListener("load",s),e(new Error("Loading error"))}.bind(this),1e4);u.addEventListener("error",f),u.addEventListener("load",s),u.src=c}else e(new Error("File must be an image"));else e(new Error("File is undefined"));function f(n){return URL.revokeObjectURL(c),clearTimeout(a),e(n)}function s(){URL.revokeObjectURL(c),clearTimeout(a);var r=document.createElement("canvas"),o=!1,f=u.width,s=u.height,l=f/s,h=Math.max(f/s,s/f);if(t.maxRatio!==undefined&&h>t.maxRatio)return e(new Error("Max aspect ratio is ".concat(t.maxRatio)));t.maxWidth!==undefined&&f>t.maxWidth&&(f=t.maxWidth,s=t.maxWidth/l,o=!0),t.maxHeight!==undefined&&s>t.maxHeight&&(s=t.maxHeight,f=t.maxHeight*l,o=!0),r.width=f,r.height=s;var v=r.getContext("2d");if(!v)return e(new Error("Canvas context is null"));v.drawImage(u,0,0,f,s);var d=n.type,b=t.type;b&&function(n){for(var t=Object.entries(lm),r=0,i=t.length;r<i;r++)if(t[r][1]===n)return!0;return!1}(b)||(b=lm.JPEG);var y=function(n,t){for(var r=n.split(","),i=function(n){var t=n.split(",")[0].match(/:(.*?);/);if(t)return t[1]}(n),e=atob(r[1]),o=e.length,u=new Uint8Array(o);o--;)u[o]=e.charCodeAt(o);if(t!==undefined&&(i=t),!i)throw new Error("Mime type is undefined");return new Blob([u],{type:i})}(r.toDataURL(b,t.quality),d);return y.size>n.size&&!o?i(n):i(Object.assign(y,{lastModified:n.lastModified,name:n.name,webkitRelativePath:n.webkitRelativePath}))}}.bind(this))}function Im(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Mm(n,t,r){var i=this,e=arguments.length>3&&arguments[3]!==undefined&&arguments[3];return new Promise(function(o,c){if(Im(this,i),n&&n.length){var a=[],f=[];l()}else c(new Error("File list is empty"));function s(n){var i=this;(function(n,t){var r=this,i=arguments.length>2&&arguments[2]!==undefined&&arguments[2];return new Promise(function(e,o){var u=this;if($i(this,r),0!==parseInt(n,16))if(n)if(t){var c=yt(n);Di(t).then(function(n){var t=this;$i(this,u);var r=n.cipherKey,a=n.hash,f=n.fileSize,s=n.mime,l=n.fileName,h=n.file,v=[c,{Uint8:kn},r,a,{Uint32:f},{String16:s},{String16:l},{Uint8:i?1:0}];ir.send(A,v).then(function(n){var r=this,i=n.result,u=n.reader;$i(this,t);var c=oi(u,i),a=c.messageId;i!==jn||0!==parseInt(a,16)?e(c):Ri(h).then(function(n){var t=n.reader,i=n.result;$i(this,r);var o=oi(t,i);e(o)}.bind(this))["catch"](function(n){$i(this,r),o(n)}.bind(this))}.bind(this))["catch"](function(n){$i(this,t),o(n)}.bind(this))}.bind(this))["catch"](function(n){$i(this,u),o(n)}.bind(this))}else o(new Error("File is empty"));else o(new Error("Chat id is empty"));else o(new Error("Chat id is zero"))}.bind(this))})(t,n,e).then(function(n){Im(this,i),r&&r(n.messageId),a.push(n.messageId),l()}.bind(this))["catch"](function(t){Im(this,i),f.push("".concat(t.message,": ").concat(n.name)),l()}.bind(this))}function l(){var r=this;if(n&&n.length&&t){var i=n[0];if(i){n.shift();var e=Nr(i.name);if(e&&~w.indexOf(e)){if(i.type.match(/image.*/)&&!i.type.includes("/gif"))return void Am(i,{quality:.7,type:i.type,maxWidth:4032,maxHeight:4032,maxRatio:20}).then(s)["catch"](function(n){Im(this,r),f.push("".concat(n.message,": ").concat(i.name)),l()}.bind(this));s(i)}else f.push("".concat(u("invalidType"),": ").concat(i.name)),l()}else o({uploaded:a,errors:f})}else o({uploaded:a,errors:f})}}.bind(this))}function Rm(n){var t="other";switch(n){case"txt":case"log":t="txt";break;case"mq4":case"mq5":case"set":case"tpl":case"mqh":case"ex4":case"ex5":t="mql";break;case"gif":case"jpg":case"png":case"jpeg":case"webp":t="media";break;case"zip":case"7z":case"rar":t="archive";break;case"onnx":t="onnx";break;default:t="other"}return t}function Um(n){return Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Um(n)}function Pm(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Bm(i.key),i)}}function Bm(n){var t=function(n,t){if("object"!=Um(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Um(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Um(t)?t:t+""}function Nm(n,t,r){return t=$m(t),function(n,t){if(t&&("object"==Um(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Dm()?Reflect.construct(t,r||[],$m(n).constructor):t.apply(n,r))}function Dm(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Dm=function(){return!!n})()}function $m(n){return $m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$m(n)}function Gm(n,t){return Gm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Gm(n,t)}function Lm(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return zm(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zm(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zm(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Fm(n){var t,r,i,e,o,u,c,a,f=n[0].fileName+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("a"),i=(0,rf.ND4)("i"),e=(0,rf.xem)(),o=(0,rf.ND4)("span"),u=(0,rf.Qq7)(f),(0,rf.CFu)(i,"class","icons-chat icons-chat_"+n[1]),(0,rf.CFu)(o,"class","chat-attach__name"),(0,rf.CFu)(r,"href",c=n[0].url),(0,rf.CFu)(r,"target","_blank"),(0,rf.CFu)(r,"title",a=n[0].fileName+" ("+n[0].fileSizeString+")"),(0,rf.CFu)(t,"class","chat-attach")},m:function(n,c){(0,rf.Yry)(n,t,c),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),(0,rf.BCw)(r,o),(0,rf.BCw)(o,u)},p:function(n,t){var i=Lm(t,1)[0];1&i&&f!==(f=n[0].fileName+"")&&(0,rf.iQh)(u,f),1&i&&c!==(c=n[0].url)&&(0,rf.CFu)(r,"href",c),1&i&&a!==(a=n[0].fileName+" ("+n[0].fileSizeString+")")&&(0,rf.CFu)(r,"title",a)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function Wm(n,t,r){var i=this,e=t.data,o=Rm(Nr(e.fileName)||"");return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e,o]}hm.subscribe(function(n){sm(this,fm);var t=No();t&&(ym(t.chatId),bm[t.chatId].reply=n)}.bind(undefined)),vm.subscribe(function(n){sm(this,fm);var t=No();t&&(ym(t.chatId),bm[t.chatId].files=n)}.bind(undefined)),dm.subscribe(function(n){sm(this,fm);var t=No();t&&(ym(t.chatId),bm[t.chatId].text=n)}.bind(undefined)),function(n){n.PNG="image/png",n.JPEG="image/jpeg",n.GIF="image/gif"}(lm||(lm={}));var qm=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Nm(this,t),(0,rf.TsN)(r,n,Wm,Fm,rf.jXN,{data:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Gm(n,t)}(t,n),function(n,t,r){return t&&Pm(n.prototype,t),r&&Pm(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Xm=qm;function Hm(n){return Hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Hm(n)}function Jm(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Qm(i.key),i)}}function Qm(n){var t=function(n,t){if("object"!=Hm(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Hm(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Hm(t)?t:t+""}function Vm(n,t,r){return t=Zm(t),function(n,t){if(t&&("object"==Hm(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Ym()?Reflect.construct(t,r||[],Zm(n).constructor):t.apply(n,r))}function Ym(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Ym=function(){return!!n})()}function Zm(n){return Zm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zm(n)}function Km(n,t){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Km(n,t)}function nw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return tw(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?tw(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tw(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function rw(n){var t,r,i,e,o=n[0].fileSizeString+"";return{c:function(){(t=(0,rf.ND4)("span")).innerHTML='<i class="icons-chat icons-chat_play"></i>',r=(0,rf.xem)(),i=(0,rf.ND4)("span"),e=(0,rf.Qq7)(o),(0,rf.CFu)(t,"class","chat-media__play"),(0,rf.CFu)(i,"class","chat-media__size")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.Yry)(n,r,o),(0,rf.Yry)(n,i,o),(0,rf.BCw)(i,e)},p:function(n,t){1&nw(t,1)[0]&&o!==(o=n[0].fileSizeString+"")&&(0,rf.iQh)(e,o)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i))}}}function iw(n,t,r){var i=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e]}var ew=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Vm(this,t),(0,rf.TsN)(r,n,iw,rw,rf.jXN,{data:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Km(n,t)}(t,n),function(n,t,r){return t&&Jm(n.prototype,t),r&&Jm(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ow=ew;function uw(n){return uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},uw(n)}function cw(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,aw(i.key),i)}}function aw(n){var t=function(n,t){if("object"!=uw(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=uw(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==uw(t)?t:t+""}function fw(n,t,r){return t=lw(t),function(n,t){if(t&&("object"==uw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,sw()?Reflect.construct(t,r||[],lw(n).constructor):t.apply(n,r))}function sw(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(sw=function(){return!!n})()}function lw(n){return lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},lw(n)}function hw(n,t){return hw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},hw(n,t)}function vw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return dw(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dw(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dw(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function bw(n){var t,r,i,e;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.mq_)(t.src,r=n[0])||(0,rf.CFu)(t,"src",r),(0,rf.CFu)(t,"width",n[2]),(0,rf.CFu)(t,"height",n[3]),(0,rf.CFu)(t,"loading","lazy"),(0,rf.CFu)(t,"alt",n[1]),(0,rf.CFu)(t,"title",n[4])},m:function(n,r){(0,rf.Yry)(n,t,r),i||(e=[(0,rf.KTR)(t,"load",yw),(0,rf.KTR)(t,"error",pw)],i=!0)},p:function(n,i){var e=vw(i,1)[0];1&e&&!(0,rf.mq_)(t.src,r=n[0])&&(0,rf.CFu)(t,"src",r),4&e&&(0,rf.CFu)(t,"width",n[2]),8&e&&(0,rf.CFu)(t,"height",n[3]),2&e&&(0,rf.CFu)(t,"alt",n[1]),16&e&&(0,rf.CFu)(t,"title",n[4])},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),i=!1,(0,rf.oOW)(e)}}}function yw(n){var t=n.target.parentNode;t&&(t.classList.add("hidden-preview"),t.style.backgroundImage="none")}function pw(n){var t=n.target,r=t.parentNode;r&&r.removeChild(t)}function mw(n,t,r){var i=this,e=t.src,o=t.alt,u=void 0===o?"":o,c=t.width,a=void 0===c?undefined:c,f=t.height,s=void 0===f?undefined:f,l=t.title,h=void 0===l?undefined:l;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"src"in n&&r(0,e=n.src),"alt"in n&&r(1,u=n.alt),"width"in n&&r(2,a=n.width),"height"in n&&r(3,s=n.height),"title"in n&&r(4,h=n.title)}.bind(this),[e,u,a,s,h]}var ww=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=fw(this,t),(0,rf.TsN)(r,n,mw,bw,rf.jXN,{src:0,alt:1,width:2,height:3,title:4}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&hw(n,t)}(t,n),function(n,t,r){return t&&cw(n.prototype,t),r&&cw(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const gw=ww;function jw(n){return jw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jw(n)}function _w(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Sw(i.key),i)}}function Sw(n){var t=function(n,t){if("object"!=jw(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=jw(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==jw(t)?t:t+""}function Ow(n,t,r){return t=Tw(t),function(n,t){if(t&&("object"==jw(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Ew()?Reflect.construct(t,r||[],Tw(n).constructor):t.apply(n,r))}function Ew(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Ew=function(){return!!n})()}function Tw(n){return Tw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Tw(n)}function kw(n,t){return kw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},kw(n,t)}function Cw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function xw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Aw(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Aw(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Aw(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Iw(n){var t,r;return t=new Xm({props:{data:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Mw(n){var t,r,i,e,o,u,c,a,f,s=[Uw,Rw],l=[];return i=function(n){return n[3]?0:1}(n),e=l[i]=s[i](n),{c:function(){t=(0,rf.ND4)("figure"),r=(0,rf.ND4)("a"),e.c(),(0,rf.CFu)(r,"href",o=n[0].url),(0,rf.CFu)(r,"title",n[2]),(0,rf.CFu)(r,"target","_blank"),(0,rf.CFu)(r,"class","chat-media__preview"),(0,rf.CFu)(r,"style",u=n[7]),(0,rf.CFu)(t,"class","chat-media")},m:function(e,o){(0,rf.Yry)(e,t,o),(0,rf.BCw)(t,r),l[i].m(r,null),c=!0,a||(f=(0,rf.KTR)(r,"click",(0,rf.xZN)(n[4])),a=!0)},p:function(n,t){e.p(n,t),(!c||1&t&&o!==(o=n[0].url))&&(0,rf.CFu)(r,"href",o),(!c||1&t&&u!==(u=n[7]))&&(0,rf.CFu)(r,"style",u)},i:function(n){c||((0,rf.c7F)(e),c=!0)},o:function(n){(0,rf.Tn8)(e),c=!1},d:function(n){n&&(0,rf.YoD)(t),l[i].d(),a=!1,f()}}}function Rw(n){var t,r;return t=new ow({props:{data:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Uw(n){var t,r;return t=new gw({props:{src:n[0].url,alt:n[0].fileName,width:n[1].width,height:n[1].height}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.src=n[0].url),1&r&&(i.alt=n[0].fileName),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Pw(n){var t,r,i,e,o=[Mw,Iw],u=[];function c(n,t){return n[0].preview&&n[0].fileSize<ft?0:1}function a(n,t){return 0===t?function(n){var t=n.slice(),r=t[1].width?"".concat(t[1].width,"px"):"auto";t[5]=r;var i=t[1].height?"".concat(t[1].height,"px"):"auto";t[6]=i;var e="width: ".concat(t[5],"; height: ").concat(t[6],"; background-image: url(").concat(t[0].preview.src,"); background-size: ").concat(t[5]," auto;");return t[7]=e,t}(n):n}return t=c(n),r=u[t]=o[t](a(n,t)),{c:function(){r.c(),i=(0,rf.Iex)()},m:function(n,r){u[t].m(n,r),(0,rf.Yry)(n,i,r),e=!0},p:function(n,e){var f=this,s=xw(e,1)[0],l=t;(t=c(n))===l?u[t].p(a(n,t),s):((0,rf.V44)(),(0,rf.Tn8)(u[l],1,1,function(){Cw(this,f),u[l]=null}.bind(this)),(0,rf.GYV)(),(r=u[t])?r.p(a(n,t),s):(r=u[t]=o[t](a(n,t))).c(),(0,rf.c7F)(r,1),r.m(i.parentNode,i))},i:function(n){e||((0,rf.c7F)(r),e=!0)},o:function(n){(0,rf.Tn8)(r),e=!1},d:function(n){n&&(0,rf.YoD)(i),u[t].d(n)}}}function Bw(n,t,r){var i=this,e=t.data,o=function(n){if(!n.preview)return{width:0,height:0};var t=window.innerWidth,r=fr,i=t-32-cr-8,e=n.preview.width,o=n.preview.height;return i<r&&(r=i),e>r?o>n.preview.width?(o=r,e/=n.preview.height/r):(e=r,o/=n.preview.width/r):o>r&&(o=r,e/=n.preview.height/r),{width:e,height:o}}(e),u=e.fileName+" ("+e.fileSizeString+")",c=0===e.mime.toLowerCase().indexOf("image");return n.$$set=function(n){Cw(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e,o,u,c,function(){var n;c?function(n){var t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined,r=arguments.length>2&&arguments[2]!==undefined?arguments[2]:undefined,i=arguments.length>3&&arguments[3]!==undefined?arguments[3]:undefined;Rc=!0,(Oc=(Ac=t)&&Ac.length||1)<=1?Ac=null:Cc=Ac.indexOf(n),Bc(),Lc(n,r),i?Vc():(Dc(Mc,!1),Dc(Tc,!1))}(e.url):aa({src:e.url,type:e.mime,preview:null===(n=e.preview)||void 0===n?void 0:n.src})}]}var Nw=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Ow(this,t),(0,rf.TsN)(r,n,Bw,Pw,rf.jXN,{data:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&kw(n,t)}(t,n),function(n,t,r){return t&&_w(n.prototype,t),r&&_w(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Dw=Nw;function $w(n){return $w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},$w(n)}function Gw(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Lw(i.key),i)}}function Lw(n){var t=function(n,t){if("object"!=$w(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=$w(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==$w(t)?t:t+""}function zw(n,t,r){return t=Ww(t),function(n,t){if(t&&("object"==$w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Fw()?Reflect.construct(t,r||[],Ww(n).constructor):t.apply(n,r))}function Fw(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Fw=function(){return!!n})()}function Ww(n){return Ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ww(n)}function qw(n,t){return qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},qw(n,t)}function Xw(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Hw(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hw(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hw(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Jw(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Qw(n){var t,r,i,e,o,u;function c(n,t){return n[1].type===En?Yw:Vw}var a=c(n),f=a(n),s=[ng,Kw,Zw],l=[];function h(n,t){return n[0].recType===Cn?0:n[0].recType===Tn?1:n[0].recType===kn?2:-1}return~(e=h(n))&&(o=l[e]=s[e](n)),{c:function(){t=(0,rf.ND4)("div"),f.c(),r=(0,rf.xem)(),i=(0,rf.ND4)("div"),o&&o.c(),(0,rf.CFu)(i,"class","chat-quote__content"),(0,rf.CFu)(t,"class","chat-quote")},m:function(n,o){(0,rf.Yry)(n,t,o),f.m(t,null),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),~e&&l[e].m(i,null),u=!0},p:function(n,u){var v=this;a===(a=c(n))&&f?f.p(n,u):(f.d(1),(f=a(n))&&(f.c(),f.m(t,r)));var d=e;(e=h(n))===d?~e&&l[e].p(n,u):(o&&((0,rf.V44)(),(0,rf.Tn8)(l[d],1,1,function(){Jw(this,v),l[d]=null}.bind(this)),(0,rf.GYV)()),~e?((o=l[e])?o.p(n,u):(o=l[e]=s[e](n)).c(),(0,rf.c7F)(o,1),o.m(i,null)):o=null)},i:function(n){u||((0,rf.c7F)(o),u=!0)},o:function(n){(0,rf.Tn8)(o),u=!1},d:function(n){n&&(0,rf.YoD)(t),f.d(),~e&&l[e].d()}}}function Vw(n){var t,r,i=n[0].authorName+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","chat-quote__author")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){1&t&&i!==(i=n[0].authorName+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function Yw(n){var t,r,i,e=n[1].name+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(e),(0,rf.CFu)(t,"class","chat-quote__author"),(0,rf.CFu)(t,"title",i=Le?n[0].authorName:"")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,o){2&o&&e!==(e=n[1].name+"")&&(0,rf.iQh)(r,e),1&o&&i!==(i=Le?n[0].authorName:"")&&(0,rf.CFu)(t,"title",i)},d:function(n){n&&(0,rf.YoD)(t)}}}function Zw(n){var t,r,i,e,o=[rg,tg],u=[];function c(n,t){return n[0].preview?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=(0,rf.Iex)()},m:function(n,r){u[t].m(n,r),(0,rf.Yry)(n,i,r),e=!0},p:function(n,e){var a=this,f=t;(t=c(n))===f?u[t].p(n,e):((0,rf.V44)(),(0,rf.Tn8)(u[f],1,1,function(){Jw(this,a),u[f]=null}.bind(this)),(0,rf.GYV)(),(r=u[t])?r.p(n,e):(r=u[t]=o[t](n)).c(),(0,rf.c7F)(r,1),r.m(i.parentNode,i))},i:function(n){e||((0,rf.c7F)(r),e=!0)},o:function(n){(0,rf.Tn8)(r),e=!1},d:function(n){n&&(0,rf.YoD)(i),u[t].d(n)}}}function Kw(n){var t,r,i=n[0].text+"";return{c:function(){t=new rf.OKD(!1),r=(0,rf.Iex)(),t.a=r},m:function(n,e){t.m(i,n,e),(0,rf.Yry)(n,r,e)},p:function(n,r){1&r&&i!==(i=n[0].text+"")&&t.p(i)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&((0,rf.YoD)(r),t.d())}}}function ng(n){var t;return{c:function(){(t=(0,rf.ND4)("span")).textContent="".concat(u("deleted")),(0,rf.CFu)(t,"class","chat-quote__deleted")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function tg(n){var t,r;return t=new Xm({props:{data:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function rg(n){var t,r;return t=new Dw({props:{data:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function ig(n){var t,r,i=n[0]&&Qw(n);return{c:function(){i&&i.c(),t=(0,rf.Iex)()},m:function(n,e){i&&i.m(n,e),(0,rf.Yry)(n,t,e),r=!0},p:function(n,r){var e=this,o=Xw(r,1)[0];n[0]?i?(i.p(n,o),1&o&&(0,rf.c7F)(i,1)):((i=Qw(n)).c(),(0,rf.c7F)(i,1),i.m(t.parentNode,t)):i&&((0,rf.V44)(),(0,rf.Tn8)(i,1,1,function(){Jw(this,e),i=null}.bind(this)),(0,rf.GYV)())},i:function(n){r||((0,rf.c7F)(i),r=!0)},o:function(n){(0,rf.Tn8)(i),r=!1},d:function(n){n&&(0,rf.YoD)(t),i&&i.d(n)}}}function eg(n,t,r){var i=this,e=t.message,o=t.chat;return n.$$set=function(n){Jw(this,i),"message"in n&&r(0,e=n.message),"chat"in n&&r(1,o=n.chat)}.bind(this),[e,o]}var og=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=zw(this,t),(0,rf.TsN)(r,n,eg,ig,rf.jXN,{message:0,chat:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&qw(n,t)}(t,n),function(n,t,r){return t&&Gw(n.prototype,t),r&&Gw(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ug=og;function cg(n){return cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},cg(n)}var ag=undefined;function fg(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,sg(i.key),i)}}function sg(n){var t=function(n,t){if("object"!=cg(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=cg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==cg(t)?t:t+""}function lg(n,t,r){return t=vg(t),function(n,t){if(t&&("object"==cg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,hg()?Reflect.construct(t,r||[],vg(n).constructor):t.apply(n,r))}function hg(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(hg=function(){return!!n})()}function vg(n){return vg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},vg(n)}function dg(n,t){return dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},dg(n,t)}function bg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function yg(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return pg(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pg(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pg(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function mg(n,t,r){var i=n.slice();return i[14]=t[r],i}function wg(n,t,r){var i=n.slice();return i[14]=t[r],i}function gg(n){var t,r,i,e,o,c,a;return e=new ug({props:{message:n[7],chat:n[3]}}),{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=(0,rf.xem)(),(0,rf.N0i)(e.$$.fragment),(0,rf.CFu)(r,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),(0,rf.CFu)(r,"title",u("delete")),(0,rf.CFu)(t,"class","chat-quote-preview")},m:function(u,f){(0,rf.Yry)(u,t,f),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.wSR)(e,t,null),o=!0,c||(a=[(0,rf.KTR)(r,"keyup",kg),(0,rf.KTR)(r,"click",n[9])],c=!0)},p:function(n,t){var r={};128&t&&(r.message=n[7]),8&t&&(r.chat=n[3]),e.$set(r)},i:function(n){o||((0,rf.c7F)(e.$$.fragment,n),o=!0)},o:function(n){(0,rf.Tn8)(e.$$.fragment,n),o=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(e),c=!1,(0,rf.oOW)(a)}}}function jg(n){var t,r,i,e,o,c,a,f=n[4].length&&_g(n),s=n[5].length&&Og(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),f&&f.c(),o=(0,rf.xem)(),s&&s.c(),(0,rf.CFu)(r,"class","chat-attach-container__close icons-chat icons-chat_close-dark"),(0,rf.CFu)(r,"title",u("delete")),(0,rf.CFu)(e,"class","chat-preview-list"),(0,rf.CFu)(t,"class","chat-attach-container")},m:function(u,l){(0,rf.Yry)(u,t,l),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),f&&f.m(e,null),(0,rf.BCw)(e,o),s&&s.m(e,null),c||(a=[(0,rf.KTR)(r,"keyup",Cg),(0,rf.KTR)(r,"click",n[10])],c=!0)},p:function(n,t){n[4].length?f?f.p(n,t):((f=_g(n)).c(),f.m(e,o)):f&&(f.d(1),f=null),n[5].length?s?s.p(n,t):((s=Og(n)).c(),s.m(e,null)):s&&(s.d(1),s=null)},d:function(n){n&&(0,rf.YoD)(t),f&&f.d(),s&&s.d(),c=!1,(0,rf.oOW)(a)}}}function _g(n){for(var t,r=(0,rf.rv_)(n[4]),i=[],e=0;e<r.length;e+=1)i[e]=Sg(wg(n,r,e));return{c:function(){t=(0,rf.ND4)("ul");for(var n=0;n<i.length;n+=1)i[n].c();(0,rf.CFu)(t,"class","chat-preview-list__block")},m:function(n,r){(0,rf.Yry)(n,t,r);for(var e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p:function(n,e){if(272&e){var o;for(r=(0,rf.rv_)(n[4]),o=0;o<r.length;o+=1){var u=wg(n,r,o);i[o]?i[o].p(u,e):(i[o]=Sg(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(i,n)}}}function Sg(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y=n[14].name+"";function p(){return n[11](n[14])}return{c:function(){t=(0,rf.ND4)("li"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("img"),o=(0,rf.xem)(),c=(0,rf.ND4)("div"),a=(0,rf.ND4)("div"),f=(0,rf.Qq7)(y),s=(0,rf.xem)(),(l=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_close-dark"></i>',h=(0,rf.xem)(),(0,rf.mq_)(i.src,e=URL.createObjectURL(n[14]))||(0,rf.CFu)(i,"src",e),(0,rf.CFu)(i,"alt",""),(0,rf.CFu)(i,"loading","lazy"),(0,rf.CFu)(r,"class","chat-preview-list__img"),(0,rf.CFu)(a,"class","chat-preview-list__name"),(0,rf.CFu)(l,"class","chat-preview-list__button"),(0,rf.CFu)(l,"title",u("delete")),(0,rf.CFu)(c,"class","chat-preview-list__content"),(0,rf.CFu)(t,"class","chat-preview-list__item chat-preview-list__item_image"),(0,rf.CFu)(t,"title",v=n[14].name)},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(t,o),(0,rf.BCw)(t,c),(0,rf.BCw)(c,a),(0,rf.BCw)(a,f),(0,rf.BCw)(c,s),(0,rf.BCw)(c,l),(0,rf.BCw)(t,h),d||(b=(0,rf.KTR)(l,"click",(0,rf.xZN)(p)),d=!0)},p:function(r,o){n=r,16&o&&!(0,rf.mq_)(i.src,e=URL.createObjectURL(n[14]))&&(0,rf.CFu)(i,"src",e),16&o&&y!==(y=n[14].name+"")&&(0,rf.iQh)(f,y),16&o&&v!==(v=n[14].name)&&(0,rf.CFu)(t,"title",v)},d:function(n){n&&(0,rf.YoD)(t),d=!1,b()}}}function Og(n){for(var t,r=(0,rf.rv_)(n[5]),i=[],e=0;e<r.length;e+=1)i[e]=Eg(mg(n,r,e));return{c:function(){t=(0,rf.ND4)("ul");for(var n=0;n<i.length;n+=1)i[n].c();(0,rf.CFu)(t,"class","chat-preview-list__block")},m:function(n,r){(0,rf.Yry)(n,t,r);for(var e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p:function(n,e){if(288&e){var o;for(r=(0,rf.rv_)(n[5]),o=0;o<r.length;o+=1){var u=mg(n,r,o);i[o]?i[o].p(u,e):(i[o]=Eg(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(i,n)}}}function Eg(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b=n[14].name+"";function y(){return n[12](n[14])}return{c:function(){t=(0,rf.ND4)("li"),r=(0,rf.ND4)("i"),e=(0,rf.xem)(),o=(0,rf.ND4)("div"),c=(0,rf.ND4)("div"),a=(0,rf.Qq7)(b),f=(0,rf.xem)(),(s=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_close-dark"></i>',l=(0,rf.xem)(),(0,rf.CFu)(r,"class",i="chat-preview-list__icon icons-chat icons-chat_"+Rm(Nr(n[14].name)||"")),(0,rf.CFu)(c,"class","chat-preview-list__name"),(0,rf.CFu)(s,"class","chat-preview-list__button"),(0,rf.CFu)(s,"title",u("delete")),(0,rf.CFu)(o,"class","chat-preview-list__content"),(0,rf.CFu)(t,"class","chat-preview-list__item"),(0,rf.CFu)(t,"title",h=n[14].name)},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(o,c),(0,rf.BCw)(c,a),(0,rf.BCw)(o,f),(0,rf.BCw)(o,s),(0,rf.BCw)(t,l),v||(d=(0,rf.KTR)(s,"click",(0,rf.xZN)(y)),v=!0)},p:function(e,o){n=e,32&o&&i!==(i="chat-preview-list__icon icons-chat icons-chat_"+Rm(Nr(n[14].name)||""))&&(0,rf.CFu)(r,"class",i),32&o&&b!==(b=n[14].name+"")&&(0,rf.iQh)(a,b),32&o&&h!==(h=n[14].name)&&(0,rf.CFu)(t,"title",h)},d:function(n){n&&(0,rf.YoD)(t),v=!1,d()}}}function Tg(n){var t,r,i,e=n[7]&&gg(n),o=n[6].length&&jg(n);return{c:function(){t=(0,rf.ND4)("div"),e&&e.c(),r=(0,rf.xem)(),o&&o.c(),(0,rf.CFu)(t,"class","chat-preview-area")},m:function(u,c){(0,rf.Yry)(u,t,c),e&&e.m(t,null),(0,rf.BCw)(t,r),o&&o.m(t,null),n[13](t),i=!0},p:function(n,i){var u=this,c=yg(i,1)[0];n[7]?e?(e.p(n,c),128&c&&(0,rf.c7F)(e,1)):((e=gg(n)).c(),(0,rf.c7F)(e,1),e.m(t,r)):e&&((0,rf.V44)(),(0,rf.Tn8)(e,1,1,function(){bg(this,u),e=null}.bind(this)),(0,rf.GYV)()),n[6].length?o?o.p(n,c):((o=jg(n)).c(),o.m(t,null)):o&&(o.d(1),o=null)},i:function(n){i||((0,rf.c7F)(e),i=!0)},o:function(n){(0,rf.Tn8)(e),i=!1},d:function(r){r&&(0,rf.YoD)(t),e&&e.d(),o&&o.d(),n[13](null)}}}var kg=function(){bg(this,ag)}.bind(undefined),Cg=function(){bg(this,ag)}.bind(undefined);function xg(n,t,r){var i,e,o=this,u=rf.lQ1,c=function(){var n=this;return bg(this,o),u(),u=(0,rf.B1Y)(l,function(t){return bg(this,n),r(6,i=t)}.bind(this)),l}.bind(this),a=rf.lQ1,f=function(){var n=this;return bg(this,o),a(),a=(0,rf.B1Y)(s,function(t){return bg(this,n),r(7,e=t)}.bind(this)),s}.bind(this);n.$$.on_destroy.push(function(){return bg(this,o),u()}.bind(this)),n.$$.on_destroy.push(function(){return bg(this,o),a()}.bind(this));var s=t.replyMessage;f();var l=t.fileList;c();var h=t.element,v=t.chat,d=[],b=[];function y(n){var t=this;l.update(function(r){return bg(this,t),r.splice(r.indexOf(n),1),r}.bind(this))}var p=function(){bg(this,o),s.set(undefined)}.bind(this),m=function(){bg(this,o),l.set([])}.bind(this),w=function(n){bg(this,o),y(n)}.bind(this),g=function(n){bg(this,o),y(n)}.bind(this);return n.$$set=function(n){bg(this,o),"replyMessage"in n&&f(r(1,s=n.replyMessage)),"fileList"in n&&c(r(2,l=n.fileList)),"element"in n&&r(0,h=n.element),"chat"in n&&r(3,v=n.chat)}.bind(this),n.$$.update=function(){var t=this;bg(this,o),112&n.$$.dirty&&(r(4,d=[]),r(5,b=[]),i.length&&i.forEach(function(n){bg(this,t),n.type.match(/image.*/)?d.push(n):b.push(n)}.bind(this)))}.bind(this),[h,s,l,v,d,b,i,e,y,p,m,w,g,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){bg(this,t),r(0,h=n)}.bind(this))}]}var Ag=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=lg(this,t),(0,rf.TsN)(r,n,xg,Tg,rf.jXN,{replyMessage:1,fileList:2,element:0,chat:3}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&dg(n,t)}(t,n),function(n,t,r){return t&&fg(n.prototype,t),r&&fg(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Ig=Ag;function Mg(n){return Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mg(n)}function Rg(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Ug(i.key),i)}}function Ug(n){var t=function(n,t){if("object"!=Mg(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Mg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Mg(t)?t:t+""}function Pg(n,t,r){return t=Ng(t),function(n,t){if(t&&("object"==Mg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Bg()?Reflect.construct(t,r||[],Ng(n).constructor):t.apply(n,r))}function Bg(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Bg=function(){return!!n})()}function Ng(n){return Ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ng(n)}function Dg(n,t){return Dg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Dg(n,t)}function $g(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return Gg(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(Gg(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,Gg(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,Gg(l,"constructor",f),Gg(f,"constructor",a),a.displayName="GeneratorFunction",Gg(f,e,"GeneratorFunction"),Gg(l),Gg(l,e,"Generator"),Gg(l,i,function(){return this}),Gg(l,"toString",function(){return"[object Generator]"}),($g=function(){return{w:o,m:h}})()}function Gg(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}Gg=function(n,t,r,i){function o(t,r){Gg(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},Gg(n,t,r,i)}function Lg(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function zg(n){var t=this,r=n.slice(),i=r[8].some(function(n){return Lg(this,t),n.userId===r[2].extraId}.bind(this));return r[31]=i,r}function Fg(n){var t,r=n[31]&&Wg(n);return{c:function(){r&&r.c(),t=(0,rf.Iex)()},m:function(n,i){r&&r.m(n,i),(0,rf.Yry)(n,t,i)},p:function(n,i){n[31]?r?r.p(n,i):((r=Wg(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d:function(n){n&&(0,rf.YoD)(t),r&&r.d(n)}}}function Wg(n){var t,r,i,e,o,c,a,f,s,l=u("warningUserBlocked")+"",h=u("unblockUser")+"",v=n[7]&&qg(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),e=(0,rf.Qq7)(l),o=(0,rf.xem)(),c=(0,rf.ND4)("button"),v&&v.c(),a=(0,rf.Qq7)(h),(0,rf.CFu)(c,"class","button button_tiny"),(0,rf.CFu)(c,"type","button"),c.disabled=n[7],(0,rf.CFu)(i,"class","alert alert_warning alert_with-button"),(0,rf.CFu)(r,"class","chat-editor__errors-wrapper"),(0,rf.CFu)(t,"class","chat-editor__errors")},m:function(u,l){(0,rf.Yry)(u,t,l),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.BCw)(i,o),(0,rf.BCw)(i,c),v&&v.m(c,null),(0,rf.BCw)(c,a),f||(s=(0,rf.KTR)(c,"click",(0,rf.xZN)(n[19])),f=!0)},p:function(n,t){n[7]?v||((v=qg(n)).c(),v.m(c,a)):v&&(v.d(1),v=null),128&t[0]&&(c.disabled=n[7])},d:function(n){n&&(0,rf.YoD)(t),v&&v.d(),f=!1,s()}}}function qg(n){var t,r;return{c:function(){t=(0,rf.ND4)("i"),r=(0,rf.xem)(),(0,rf.CFu)(t,"class","loading-icon")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.Yry)(n,r,i)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r))}}}function Xg(n){var t,r,i,e,o,u;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),e=(0,rf.Qq7)(n[1]),(0,rf.CFu)(i,"class","alert alert_danger"),(0,rf.CFu)(r,"class","chat-editor__errors-wrapper"),(0,rf.CFu)(t,"class","chat-editor__errors")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),u=!0},p:function(n,t){(!u||2&t[0])&&(0,rf.iQh)(e,n[1])},i:function(n){var t=this;u||(n&&(0,rf.Dti)(function(){Lg(this,t),u&&(o||(o=(0,rf.h86)(i,uf.Rv,{duration:200},!0)),o.run(1))}.bind(this)),u=!0)},o:function(n){n&&(o||(o=(0,rf.h86)(i,uf.Rv,{duration:200},!1)),o.run(0)),u=!1},d:function(n){n&&(0,rf.YoD)(t),n&&o&&o.end()}}}function Hg(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,m,g,j,_,S,O=this,E=u("add")+"";function T(t){n[20](t)}var k={replyMessage:hm,fileList:vm,chat:n[2]};return void 0!==n[4]&&(k.element=n[4]),o=new Ig({props:k}),rf.Dnk.push(function(){return Lg(this,O),(0,rf.oIE)(o,"element",T)}.bind(this)),{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("form"),i=(0,rf.ND4)("fieldset"),e=(0,rf.ND4)("div"),(0,rf.N0i)(o.$$.fragment),a=(0,rf.xem)(),f=(0,rf.ND4)("div"),s=(0,rf.ND4)("input"),(l=(0,rf.ND4)("span")).innerHTML='<i class="icons-chat icons-chat_attach"></i>',h=(0,rf.xem)(),v=(0,rf.ND4)("textarea"),d=(0,rf.xem)(),b=(0,rf.ND4)("div"),y=(0,rf.ND4)("button"),p=(0,rf.ND4)("i"),m=(0,rf.Qq7)(E),(0,rf.CFu)(s,"title",u("attachFileTitle")+": "+w.join(", ")),(0,rf.Xrn)(s,"file"),s.multiple=!0,(0,rf.CFu)(s,"name","attachedFile"),(0,rf.CFu)(s,"accept","."+w.join(",.")),(0,rf.CFu)(l,"class","button"),(0,rf.CFu)(f,"class","chat-attach-form box-file"),(0,rf.CFu)(v,"class","chat-editor__textarea"),(0,rf.CFu)(v,"rows","1"),(0,rf.CFu)(v,"placeholder",u("message")),(0,rf.CFu)(p,"class","icons-chat icons-chat_send"),(0,rf.CFu)(y,"type","button"),(0,rf.CFu)(y,"title",u("add")),(0,rf.CFu)(y,"class","button button_green button_small"+(Zt?" button_widget":"")),(0,rf.CFu)(b,"class","chat-editor__tools"),(0,rf.CFu)(e,"class","chat-editor__fieldset-wrapper"),(0,rf.CFu)(i,"class","chat-editor__fieldset"),i.disabled=n[6],(0,rf.CFu)(r,"class","chat-editor__form"),(0,rf.CFu)(r,"enctype","multipart/form-data"),(0,rf.CFu)(t,"class",g="chat-editor ui"+(n[6]?" chat-editor_disabled":""))},m:function(u,c){(0,rf.Yry)(u,t,c),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.wSR)(o,e,null),(0,rf.BCw)(e,a),(0,rf.BCw)(e,f),(0,rf.BCw)(f,s),(0,rf.BCw)(f,l),(0,rf.BCw)(e,h),(0,rf.BCw)(e,v),(0,rf.Gvd)(v,n[9]),n[22](v),(0,rf.BCw)(e,d),(0,rf.BCw)(e,b),(0,rf.BCw)(b,y),(0,rf.BCw)(y,p),(0,rf.BCw)(y,m),n[23](t),j=!0,_||(S=[(0,rf.KTR)(s,"change",n[13]),(0,rf.KTR)(v,"input",n[21]),(0,rf.KTR)(v,"keydown",n[11]),(0,rf.KTR)(v,"keyup",n[12]),(0,rf.KTR)(y,"click",n[10]),(0,rf.KTR)(r,"submit",n[10])],_=!0)},p:function(n,r){var e=this,u={};4&r[0]&&(u.chat=n[2]),!c&&16&r[0]&&(c=!0,u.element=n[4],(0,rf.Jk$)(function(){return Lg(this,e),c=!1}.bind(this))),o.$set(u),512&r[0]&&(0,rf.Gvd)(v,n[9]),(!j||64&r[0])&&(i.disabled=n[6]),(!j||64&r[0]&&g!==(g="chat-editor ui"+(n[6]?" chat-editor_disabled":"")))&&(0,rf.CFu)(t,"class",g)},i:function(n){j||((0,rf.c7F)(o.$$.fragment,n),j=!0)},o:function(n){(0,rf.Tn8)(o.$$.fragment,n),j=!1},d:function(r){r&&(0,rf.YoD)(t),(0,rf.Hbl)(o),n[22](null),n[23](null),_=!1,(0,rf.oOW)(S)}}}function Jg(n){var t,r,i,e,o=n[2].type===Sn&&Fg(zg(n)),u=n[1]&&Xg(n),c=n[5]&&Hg(n);return{c:function(){o&&o.c(),t=(0,rf.xem)(),u&&u.c(),r=(0,rf.xem)(),c&&c.c(),i=(0,rf.Iex)()},m:function(n,a){o&&o.m(n,a),(0,rf.Yry)(n,t,a),u&&u.m(n,a),(0,rf.Yry)(n,r,a),c&&c.m(n,a),(0,rf.Yry)(n,i,a),e=!0},p:function(n,e){var a=this;n[2].type===Sn?o?o.p(zg(n),e):((o=Fg(zg(n))).c(),o.m(t.parentNode,t)):o&&(o.d(1),o=null),n[1]?u?(u.p(n,e),2&e[0]&&(0,rf.c7F)(u,1)):((u=Xg(n)).c(),(0,rf.c7F)(u,1),u.m(r.parentNode,r)):u&&((0,rf.V44)(),(0,rf.Tn8)(u,1,1,function(){Lg(this,a),u=null}.bind(this)),(0,rf.GYV)()),n[5]?c?(c.p(n,e),32&e[0]&&(0,rf.c7F)(c,1)):((c=Hg(n)).c(),(0,rf.c7F)(c,1),c.m(i.parentNode,i)):c&&((0,rf.V44)(),(0,rf.Tn8)(c,1,1,function(){Lg(this,a),c=null}.bind(this)),(0,rf.GYV)())},i:function(n){e||((0,rf.c7F)(u),(0,rf.c7F)(c),e=!0)},o:function(n){(0,rf.Tn8)(u),(0,rf.Tn8)(c),e=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i)),o&&o.d(n),u&&u.d(n),c&&c.d(n)}}}function Qg(n){var t=this;n.length&&vm.update(function(r){Lg(this,t);for(var i=0,e=n.length;i<e;i++)r.push(n[i]);return r}.bind(this))}function Vg(n,t,r){var i,o,c,a,f,s=this;(0,rf.j0C)(n,Po,function(n){return Lg(this,s),r(2,i=n)}.bind(this)),(0,rf.j0C)(n,vm,function(n){return Lg(this,s),r(24,o=n)}.bind(this)),(0,rf.j0C)(n,hm,function(n){return Lg(this,s),r(18,c=n)}.bind(this)),(0,rf.j0C)(n,Bo,function(n){return Lg(this,s),r(8,a=n)}.bind(this)),(0,rf.j0C)(n,dm,function(n){return Lg(this,s),r(9,f=n)}.bind(this));var l,h,v,d,b=this&&this.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},p=t.resizeList,m=!1,g="",j=!1,S="",O=!1;function E(){window.fz&&(i.type===Sn?window.fz("track","MQL5+Chat+Message+Sent"):i.type===En?window.fz("track","MQL5+Chat+Channel+Message+Sent"):i.type===On&&window.fz("track","MQL5+Chat+Group+Message+Sent"))}function T(){var n=this;hm.set(undefined),dm.set(""),vm.set([]),(0,cf.io)().then(function(){Lg(this,n),k(),p(),h&&h.focus()}.bind(this))}function k(){if(window.getComputedStyle){r(3,l.style.height="".concat(ar,"px"),l),r(3,l.style.flexBasis="".concat(ar,"px"),l);var n=Math.max(ar,Math.min(4+h.scrollHeight,200));r(4,v.style.bottom="".concat(n+1,"px"),v),r(3,l.style.height="".concat(n,"px"),l),r(3,l.style.flexBasis="".concat(n,"px"),l)}}function C(n,t,i){var o=this;(function(n,t,r){var i=this;return new Promise(function(e,o){var u=this;if(xi(this,i),0!==parseInt(n,16))if(n){var c=yt(n),a=[];if(r&&r.length){var f=[];r.forEach(function(n){var t=this;if(xi(this,u),n.tagType===Rn&&"citedId"in n){var r=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],i=[yt(n.citedId),{Uint8:n.citedType},yt(n.citedUser),{String16:n.citedAuthor},{String16:n.citedText}],e=[].concat(r,[{Uint16:Ci(i)}],i);f.push(e)}else if(n.tagType===Un&&"linkedIds"in n){var o=[{Uint8:n.tagType},{Uint16:0},{Uint16:0}],c=[];n.linkedIds.forEach(function(n){xi(this,t),c.push(yt(n))}.bind(this));var a=[{Uint8:n.type},{Uint8:n.linkedIds.length},c],s=[].concat(o,[{Uint16:Ci(a)}],a);f.push(s)}}.bind(this)),a=[c,{Uint8:Tn},{String32:t},{Uint32:Ci(f)},f]}else a=[c,{Uint8:Tn},{String32:t},{Uint32:0}];ir.send(A,a).then(function(n){var t=n.reader,r=n.result;xi(this,u);var i=oi(t,r);e(i)}.bind(this))["catch"](function(n){xi(this,u),o(n)}.bind(this))}else o(new Error("Chat id is empty"));else o(new Error("Chat id is zero"))}.bind(this))})(n,t,i).then(function(){Lg(this,o),E(),r(6,j=!1),T()}.bind(this))["catch"](function(n){Lg(this,o);var t=n,i=parseInt(t.name,10);r(1,g=i===pn?u("errorUserNonChatablePrivacyFriends"):i===wn?u("errorUserBannedAnotherUser"):t.message),r(6,j=!1),y.error(e.USER,t,"Add message")}.bind(this))}function x(){var n=this;if(!j){var t=(0,Ot.Jt)(dm).trim();if(!(t.length>4e3))return c||o.length?!c||t&&t.length?1!==o.length||t.length||c?t.length?void function(){var n=this;r(6,j=!0);var t=(0,Ot.Jt)(dm).trim(),e=undefined;if(c){e=[];var a="";if(c.recType===Tn){var f=c.text.indexOf("\n");a=f>0?c.text.substring(0,Math.min(f,100)):c.text.substring(0,100)}e.push({tagType:Rn,citedId:c.messageId,citedType:c.recType,citedUser:c.authorId,citedAuthor:c.authorName,citedText:a})}o&&o.length?Mm(o,i.chatId,function(t){Lg(this,n),Au(t)}.bind(this),!0).then(function(o){Lg(this,n),e||(e=[]),r(1,g=o.errors.join(". ")),e.push({tagType:Un,type:Pn,linkedIds:o.uploaded}),C(i.chatId,t,e)}.bind(this)):t?C(i.chatId,t,e):(r(6,j=!1),r(1,g=u("emptyMessageError")))}():void r(1,g=u("emptyMessageError")):(r(6,j=!0),void Mm(o,i.chatId,undefined).then(function(t){Lg(this,n),r(1,g=t.errors.join(". ")),t.uploaded.length&&E(),r(6,j=!1),T()}.bind(this))["catch"](function(t){Lg(this,n),r(1,g=t.message),r(6,j=!1),y.error(e.USER,g,"Add message files")}.bind(this))):void r(1,g=u("emptyMessageError")):void(t&&t.length?(r(6,j=!0),C(i.chatId,t,undefined)):r(1,g=u("emptyMessageError")));r(1,g=u("longMessageError",4e3))}}function I(){return b(this,void 0,void 0,$g().m(function n(){var t,o;return $g().w(function(n){for(;;)switch(n.p=n.n){case 0:return r(7,O=!0),n.p=1,n.n=2,Me(i.extraId,!1);case 2:if(n.v!==gn){n.n=4;break}return t=Bo,n.n=3,Ce();case 3:t.set.call(t,n.v),n.n=5;break;case 4:throw new Error(u("errorActionFailed"));case 5:n.n=7;break;case 6:n.p=6,o=n.v,r(1,g=o.message),y.error(e.USER,o);case 7:r(7,O=!1);case 8:return n.a(2)}},n,null,[[1,6]])}))}Po.subscribe(function(n){Lg(this,s),n.chatId!==S&&r(17,S=n.chatId)}.bind(this)),(0,cf.Rc)(function(){Lg(this,s),pm(),h&&(h.focus(),l&&(Cm(l,Qg,function(n){r(1,g=n)},w),jm(h,Qg,function(n){r(1,g=n)},w)))}.bind(this));var M=function(){return Lg(this,s),I()}.bind(this);return n.$$set=function(n){Lg(this,s),"resizeList"in n&&r(15,p=n.resizeList)}.bind(this),n.$$.update=function(){var t=this;if(Lg(this,s),4&n.$$.dirty[0]){var e=i.authorId===_;r(5,m=!(e||i.isClosed||!(i.perms&qn.WRITE)||Yt))}65538&n.$$.dirty[0]&&g&&(clearTimeout(d),r(16,d=setTimeout(function(){Lg(this,t),r(1,g="")}.bind(this),5e3))),262145&n.$$.dirty[0]&&c&&h&&h.focus(),131072&n.$$.dirty[0]&&S&&pm()}.bind(this),[h,g,i,l,v,m,j,O,a,f,x,function(n){return"Enter"!==n.key||!n.ctrlKey||(x(),!1)},function(){k(),p()},function(n){var t=this,i=n.target;if(i&&i.files){var e=i.files;vm.update(function(n){Lg(this,t);for(var i=0,o=e.length;i<o;i++)n.push(e[i]);return n.length>8&&(n.splice(8),r(1,g=u("maxNumberFiles",8))),n}.bind(this)),i.value="",i.type="",i.type="file"}},I,p,d,S,c,M,function(n){r(4,v=n)},function(){f=this.value,dm.set(f)},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){Lg(this,t),r(0,h=n)}.bind(this))},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){Lg(this,t),r(3,l=n)}.bind(this))}]}var Yg=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Pg(this,t),(0,rf.TsN)(r,n,Vg,Jg,rf.jXN,{resizeList:15},null,[-1,-1]),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Dg(n,t)}(t,n),function(n,t,r){return t&&Rg(n.prototype,t),r&&Rg(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Zg=Yg;function Kg(n){return Kg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Kg(n)}function nj(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,tj(i.key),i)}}function tj(n){var t=function(n,t){if("object"!=Kg(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Kg(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Kg(t)?t:t+""}function rj(n,t,r){return t=ej(t),function(n,t){if(t&&("object"==Kg(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,ij()?Reflect.construct(t,r||[],ej(n).constructor):t.apply(n,r))}function ij(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(ij=function(){return!!n})()}function ej(n){return ej=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ej(n)}function oj(n,t){return oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},oj(n,t)}function uj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return cj(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cj(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cj(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function aj(n){var t,r,i,e,o,u,c,a,f=Wr({dateTime:n[0].date,type:"time"})+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.Qq7)(f),o=(0,rf.xem)(),u=(0,rf.ND4)("div"),c=(0,rf.ND4)("div"),a=(0,rf.Qq7)(n[1]),(0,rf.CFu)(r,"class","chat-message__date"),(0,rf.CFu)(r,"title",e=n[0].dateText),(0,rf.CFu)(c,"class","chat-message__buble"),(0,rf.CFu)(u,"class","chat-message__box"),(0,rf.CFu)(t,"class","chat-message chat-message_system")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(t,o),(0,rf.BCw)(t,u),(0,rf.BCw)(u,c),(0,rf.BCw)(c,a)},p:function(n,t){var o=uj(t,1)[0];1&o&&f!==(f=Wr({dateTime:n[0].date,type:"time"})+"")&&(0,rf.iQh)(i,f),1&o&&e!==(e=n[0].dateText)&&(0,rf.CFu)(r,"title",e),2&o&&(0,rf.iQh)(a,n[1])},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function fj(n,t,r){var i=this,e=t.message,o=t.chat,c="",a=o.type===En;switch(e.type){case Bn:c=e.userId===$e?u("systemYouInvited",o.name):u("systemUserInvited",e.authorName,e.userName||"");break;case Nn:c=e.authorId===e.userId?u("systemChatUserLeft",e.userName||""):u(a?"systemChannelUserRemoved":"systemChatUserRemoved",e.authorName,e.userName||"");break;case Dn:c=a?e.changeValue?u("systemChannelPublic",e.authorName||""):u("systemChannelPrivate",e.authorName)||"":e.changeValue?u("systemChatPublic",e.authorName||""):u("systemChatPrivate",e.authorName||"");break;case $n:c=e.changeValue?u("systemChatLimited",e.authorName||""):u("systemChatUnlimited",e.authorName||"");break;case Gn:c=a?e.changeValue?u("systemChannelClosed"):u("systemChannelReopened"):e.changeValue?u("systemChatClosed",e.authorName):u("systemChatReopened",e.authorName);break;case Ln:c=a?u("systemChannelRename",'"'.concat(e.name||"",'"')):u("systemChatRename",e.authorName,'"'.concat(e.name||"",'"'));break;case zn:c=a?u("systemChannelCreate",'"'.concat(e.name||"",'"')):u("systemChatCreate",e.authorName,'"'.concat(e.name||"",'"'));break;default:c=""}return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"message"in n&&r(0,e=n.message),"chat"in n&&r(2,o=n.chat)}.bind(this),[e,c,o]}var sj=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=rj(this,t),(0,rf.TsN)(r,n,fj,aj,rf.jXN,{message:0,chat:2}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&oj(n,t)}(t,n),function(n,t,r){return t&&nj(n.prototype,t),r&&nj(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const lj=sj;function hj(n){return hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hj(n)}function vj(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,dj(i.key),i)}}function dj(n){var t=function(n,t){if("object"!=hj(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=hj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==hj(t)?t:t+""}function bj(n,t,r){return t=pj(t),function(n,t){if(t&&("object"==hj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,yj()?Reflect.construct(t,r||[],pj(n).constructor):t.apply(n,r))}function yj(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(yj=function(){return!!n})()}function pj(n){return pj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pj(n)}function mj(n,t){return mj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},mj(n,t)}function wj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return jj(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jj(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jj(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function _j(n,t,r){var i=n.slice();return i[21]=t[r],i}function Sj(n){var t,r;return(t=new Cs({props:{$$slots:{buttons:[Cj],content:[kj],title:[Ej]},$$scope:{ctx:n}}})).$on("close",n[18]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};16777247&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Oj(n){var t,r;return(t=new Cs({props:{withButtons:!1,$$slots:{content:[Aj],title:[xj]},$$scope:{ctx:n}}})).$on("close",n[14]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};16777312&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Ej(n){var t;return{c:function(){(t=(0,rf.ND4)("span")).textContent="".concat(u("complaintTitle")),(0,rf.CFu)(t,"slot","title")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function Tj(n){var t,r,i,e,o,c,a,f=u(n[21].name)+"";return o=(0,rf.bVF)(n[16][0]),{c:function(){t=(0,rf.ND4)("input"),r=(0,rf.xem)(),i=(0,rf.ND4)("label"),e=(0,rf.Qq7)(f),(0,rf.CFu)(t,"name","complaintType"),t.__value=n[21].num,(0,rf.Gvd)(t,t.__value),(0,rf.CFu)(t,"class","radio"),(0,rf.Xrn)(t,"radio"),(0,rf.CFu)(t,"id","complaintType"+n[21].num),(0,rf.CFu)(i,"for","complaintType"+n[21].num),o.p(t)},m:function(o,u){(0,rf.Yry)(o,t,u),t.checked=t.__value===n[2],(0,rf.Yry)(o,r,u),(0,rf.Yry)(o,i,u),(0,rf.BCw)(i,e),c||(a=(0,rf.KTR)(t,"change",n[15]),c=!0)},p:function(n,r){4&r&&(t.checked=t.__value===n[2])},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r),(0,rf.YoD)(i)),o.r(),c=!1,a()}}}function kj(n){for(var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j,_,S,O,E,T,k,C=(n[1].type===En?n[1].name:n[0].authorName)+"",x=u("comment")+"",A=n[4].length+"",I=(0,rf.rv_)(Rj),M=[],R=0;R<I.length;R+=1)M[R]=Tj(_j(n,I,R));return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("form"),i=(0,rf.ND4)("div"),e=(0,rf.ND4)("i"),o=(0,rf.xem)(),c=(0,rf.ND4)("b"),a=(0,rf.Qq7)(C),f=(0,rf.Qq7)(":"),s=(0,rf.xem)(),l=(0,rf.Qq7)(n[3]),h=(0,rf.xem)(),v=(0,rf.ND4)("div");for(var u=0;u<M.length;u+=1)M[u].c();d=(0,rf.xem)(),b=(0,rf.ND4)("div"),y=(0,rf.ND4)("div"),p=(0,rf.Qq7)(x),m=(0,rf.xem)(),w=(0,rf.ND4)("div"),g=(0,rf.Qq7)(A),j=(0,rf.Qq7)("/"),_=(0,rf.Qq7)(Mj),S=(0,rf.xem)(),O=(0,rf.ND4)("div"),E=(0,rf.ND4)("textarea"),(0,rf.CFu)(e,"class","icons-ux icons-ux_reply"),(0,rf.CFu)(i,"class","chat-complaint__message"),(0,rf.CFu)(v,"class","chat-complaint__type-list"),(0,rf.CFu)(w,"class","chat-complaint__count"),(0,rf.CFu)(w,"id","complaint_char_counter"),(0,rf.CFu)(y,"class","chat-complaint__title"),(0,rf.CFu)(E,"class","textarea"),(0,rf.CFu)(E,"name","complaint_text"),(0,rf.CFu)(E,"rows","3"),(0,rf.CFu)(O,"class","complaint-window__editor"),(0,rf.CFu)(b,"class","chat-complaint__item"),(0,rf.CFu)(r,"class","chat-complaint"),(0,rf.CFu)(t,"slot","content")},m:function(u,C){(0,rf.Yry)(u,t,C),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.BCw)(i,o),(0,rf.BCw)(i,c),(0,rf.BCw)(c,a),(0,rf.BCw)(c,f),(0,rf.BCw)(i,s),(0,rf.BCw)(i,l),(0,rf.BCw)(r,h),(0,rf.BCw)(r,v);for(var x=0;x<M.length;x+=1)M[x]&&M[x].m(v,null);(0,rf.BCw)(r,d),(0,rf.BCw)(r,b),(0,rf.BCw)(b,y),(0,rf.BCw)(y,p),(0,rf.BCw)(y,m),(0,rf.BCw)(y,w),(0,rf.BCw)(w,g),(0,rf.BCw)(w,j),(0,rf.BCw)(w,_),(0,rf.BCw)(b,S),(0,rf.BCw)(b,O),(0,rf.BCw)(O,E),(0,rf.Gvd)(E,n[4]),T||(k=[(0,rf.KTR)(E,"input",n[17]),(0,rf.KTR)(E,"input",n[9])],T=!0)},p:function(n,t){if(3&t&&C!==(C=(n[1].type===En?n[1].name:n[0].authorName)+"")&&(0,rf.iQh)(a,C),8&t&&(0,rf.iQh)(l,n[3]),4&t){var r;for(I=(0,rf.rv_)(Rj),r=0;r<I.length;r+=1){var i=_j(n,I,r);M[r]?M[r].p(i,t):(M[r]=Tj(i),M[r].c(),M[r].m(v,null))}for(;r<M.length;r+=1)M[r].d(1);M.length=I.length}16&t&&A!==(A=n[4].length+"")&&(0,rf.iQh)(g,A),16&t&&(0,rf.Gvd)(E,n[4])},d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(M,n),T=!1,(0,rf.oOW)(k)}}}function Cj(n){var t,r,i,e;return{c:function(){t=(0,rf.ND4)("span"),(r=(0,rf.ND4)("button")).textContent="".concat(u("add")),(0,rf.CFu)(r,"class","button button_green qa-dialog-ok"),(0,rf.CFu)(t,"slot","buttons")},m:function(o,u){(0,rf.Yry)(o,t,u),(0,rf.BCw)(t,r),i||(e=(0,rf.KTR)(r,"click",n[10]),i=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),i=!1,e()}}}function xj(n){var t,r;return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(n[5]),(0,rf.CFu)(t,"slot","title")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){32&t&&(0,rf.iQh)(r,n[5])},d:function(n){n&&(0,rf.YoD)(t)}}}function Aj(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.Qq7)(n[6]),(0,rf.CFu)(r,"class","chat-alert-text"),(0,rf.CFu)(t,"slot","content")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i)},p:function(n,t){64&t&&(0,rf.iQh)(i,n[6])},d:function(n){n&&(0,rf.YoD)(t)}}}function Ij(n){var t,r,i,e,o=[Oj,Sj],u=[];function c(n,t){return n[5]?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=(0,rf.Iex)()},m:function(n,r){u[t].m(n,r),(0,rf.Yry)(n,i,r),e=!0},p:function(n,e){var a=this,f=gj(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,f):((0,rf.V44)(),(0,rf.Tn8)(u[s],1,1,function(){wj(this,a),u[s]=null}.bind(this)),(0,rf.GYV)(),(r=u[t])?r.p(n,f):(r=u[t]=o[t](n)).c(),(0,rf.c7F)(r,1),r.m(i.parentNode,i))},i:function(n){e||((0,rf.c7F)(r),e=!0)},o:function(n){(0,rf.Tn8)(r),e=!1},d:function(n){n&&(0,rf.YoD)(i),u[t].d(n)}}}var Mj=150,Rj=[{name:"spam",num:0},{name:"abuse",num:1},{name:"advert",num:2},{name:"complaintOther",num:500}];function Uj(n,t,r){var i,e,o=this,c=t.message,a=t.chat,f=0,s="",l="",h="",v="",d="",b="",y="",p=Js(a.authorId);(0,rf.j0C)(n,p,function(n){return wj(this,o),r(13,e=n)}.bind(this));var m=Js(c.authorId);(0,rf.j0C)(n,m,function(n){return wj(this,o),r(12,i=n)}.bind(this));return n.$$set=function(n){wj(this,o),"message"in n&&r(0,c=n.message),"chat"in n&&r(1,a=n.chat)}.bind(this),n.$$.update=function(){if(wj(this,o),1&n.$$.dirty)switch(c.recType){case Tn:r(3,s=c.text);break;case kn:r(3,s=c.fileName)}2&n.$$.dirty&&(a.type===En?y=a.inviteLink?"channels/".concat(a.inviteLink):"channels/".concat(a.chatId):a.type===On&&(y="messages/".concat(a.chatId))),8192&n.$$.dirty&&e.userLogin&&(b=e.userLogin),6146&n.$$.dirty&&i.userLogin&&(r(11,d=i.userLogin),a.type===Sn&&(y="users/".concat(d,"/messages")))}.bind(this),[c,a,f,s,l,h,v,p,m,function(n){l.length>Mj&&(n.preventDefault(),r(4,l=l.slice(0,Mj)))},function(){var n={complaintType:f,complaintText:l,chatId:a.chatId,chatLink:y,chatAuthorLogin:b,chatAuthorName:a.authorName,chatMessage:s,chatMessageAuthorLogin:d,chatMessageAuthorName:c.authorName,chatUsersCount:a.countMembers,chatType:a.type,__signature:Ht};window.Ajax.post("/complaint/new/chat",n,!1,{onready:function(){r(5,h=u("complaintTitle")),r(6,v=u("complaintSuccess"))},onerror:function(){r(5,h=u("complaintTitle")),r(6,v=u("complaintError"))}},undefined,!0)},d,i,e,function(t){rf.Tq.call(this,n,t)},function(){f=this.__value,r(2,f)},[[]],function(){l=this.value,r(4,l)},function(t){rf.Tq.call(this,n,t)}]}var Pj=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=bj(this,t),(0,rf.TsN)(r,n,Uj,Ij,rf.jXN,{message:0,chat:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&mj(n,t)}(t,n),function(n,t,r){return t&&vj(n.prototype,t),r&&vj(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Bj=Pj;function Nj(n){return Nj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Nj(n)}function Dj(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,$j(i.key),i)}}function $j(n){var t=function(n,t){if("object"!=Nj(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Nj(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Nj(t)?t:t+""}function Gj(n,t,r){return t=zj(t),function(n,t){if(t&&("object"==Nj(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Lj()?Reflect.construct(t,r||[],zj(n).constructor):t.apply(n,r))}function Lj(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Lj=function(){return!!n})()}function zj(n){return zj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},zj(n)}function Fj(n,t){return Fj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Fj(n,t)}function Wj(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return qj(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(qj(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,qj(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,qj(l,"constructor",f),qj(f,"constructor",a),a.displayName="GeneratorFunction",qj(f,e,"GeneratorFunction"),qj(l),qj(l,e,"Generator"),qj(l,i,function(){return this}),qj(l,"toString",function(){return"[object Generator]"}),(Wj=function(){return{w:o,m:h}})()}function qj(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}qj=function(n,t,r,i){function o(t,r){qj(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},qj(n,t,r,i)}function Xj(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Hj(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return Jj(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Jj(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jj(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Qj(n){var t,r,i,e=n[6]&&function(n){var t,r,i,e,o,c,a=u("replyMessage")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("button"),i=(0,rf.ND4)("i"),e=(0,rf.Qq7)(a),(0,rf.CFu)(i,"class","icons-chat icons-chat_reply"),(0,rf.CFu)(r,"type","button"),(0,rf.CFu)(r,"class","chat-window-menu__button"),(0,rf.CFu)(t,"class","chat-window-menu__item chat-window-menu__item_cap")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),o||(c=(0,rf.KTR)(r,"click",(0,rf.xZN)(n[9])),o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,c()}}}(n),o=n[4]&&function(n){var t,r,i,e,o,c,a=u("delete")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("button"),i=(0,rf.ND4)("i"),e=(0,rf.Qq7)(a),(0,rf.CFu)(i,"class","icons-chat icons-chat_delete"),(0,rf.CFu)(r,"type","button"),(0,rf.CFu)(r,"class","chat-window-menu__button"),(0,rf.CFu)(t,"class","chat-window-menu__item chat-window-menu__item_cap chat-window-menu__item_red")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),o||(c=(0,rf.KTR)(r,"click",(0,rf.xZN)(n[10])),o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,c()}}}(n),c=n[5]&&function(n){var t,r,i,e,o,c,a=u("complaint")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("button"),i=(0,rf.ND4)("i"),e=(0,rf.Qq7)(a),(0,rf.CFu)(i,"class","icons-chat icons-chat_attention"),(0,rf.CFu)(r,"type","button"),(0,rf.CFu)(r,"class","chat-window-menu__button"),(0,rf.CFu)(t,"class","chat-window-menu__item chat-window-menu__item_cap")},m:function(u,a){(0,rf.Yry)(u,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(r,e),o||(c=(0,rf.KTR)(r,"click",(0,rf.xZN)(n[11])),o=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o=!1,c()}}}(n);return{c:function(){t=(0,rf.ND4)("div"),e&&e.c(),r=(0,rf.xem)(),o&&o.c(),i=(0,rf.xem)(),c&&c.c(),(0,rf.CFu)(t,"class","chat-dropdown-menu__list")},m:function(n,u){(0,rf.Yry)(n,t,u),e&&e.m(t,null),(0,rf.BCw)(t,r),o&&o.m(t,null),(0,rf.BCw)(t,i),c&&c.m(t,null)},p:function(n,t){n[6]&&e.p(n,t),n[4]&&o.p(n,t),n[5]&&c.p(n,t)},d:function(n){n&&(0,rf.YoD)(t),e&&e.d(),o&&o.d(),c&&c.d()}}}function Vj(n){var t,r;return(t=new Bj({props:{message:n[1],chat:n[2]}})).$on("close",n[12]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.message=n[1]),4&r&&(i.chat=n[2]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Yj(n){var t,r,i,e=n[7]&&Qj(n),o=n[3]&&Vj(n);return{c:function(){e&&e.c(),t=(0,rf.xem)(),o&&o.c(),r=(0,rf.Iex)()},m:function(n,u){e&&e.m(n,u),(0,rf.Yry)(n,t,u),o&&o.m(n,u),(0,rf.Yry)(n,r,u),i=!0},p:function(n,t){var i=this,u=Hj(t,1)[0];n[7]&&e.p(n,u),n[3]?o?(o.p(n,u),8&u&&(0,rf.c7F)(o,1)):((o=Vj(n)).c(),(0,rf.c7F)(o,1),o.m(r.parentNode,r)):o&&((0,rf.V44)(),(0,rf.Tn8)(o,1,1,function(){Xj(this,i),o=null}.bind(this)),(0,rf.GYV)())},i:function(n){i||((0,rf.c7F)(o),i=!0)},o:function(n){(0,rf.Tn8)(o),i=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r)),e&&e.d(n),o&&o.d(n)}}}function Zj(n,t,r){var i=this,o=this&&this.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},u=this&&this.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=n[Symbol.asyncIterator];return r?r.call(n):(n="function"==typeof __values?__values(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(t){return new Promise(function(i,e){(function(n,t,r,i){Promise.resolve(i).then(function(t){n({value:t,done:r})},t)})(i,e,(t=n[r](t)).done,t.value)})}}},c=t.showedMenu,a=t.message,f=t.chat,s=a.authorId===_,l=f.type===Sn,h=a.authorId===Jt,v=!1,d=!!(f.perms&qn.I)||h&&!!(l||f.perms&qn.WRITE),b=!s&&!h,p=!s&&f.type!==En&&(l||!!(f.perms&qn.WRITE)),m=d||b||p;function w(){return o(this,void 0,void 0,Wj().m(function n(){var t,r,i,o,c,s,l,h,v,d,b,p,m,w=this;return Wj().w(function(n){for(;;)switch(n.p=n.n){case 0:l=[],a.recType===Tn&&(null===(s=null===(c=a.tags)||void 0===c?void 0:c.files)||void 0===s?void 0:s.linkedIds)&&a.tags.files.linkedIds.forEach(function(n){Xj(this,w),l.push(n)}.bind(this)),a.linkId&&0!==parseInt(a.linkId,16)?l.push(a.linkId):l.push(a.messageId),n.p=1,h=!0,v=u(l);case 2:return n.n=3,v.next();case 3:if(d=n.v,t=d.done){n.n=8;break}return o=d.value,h=!1,b=o,n.p=4,n.n=5,ki(f.chatId,b);case 5:n.v.result===gn&&Iu(b),n.n=7;break;case 6:n.p=6,p=n.v,of.set(p.message),y.error(e.USER,p);case 7:h=!0,n.n=2;break;case 8:n.n=10;break;case 9:n.p=9,m=n.v,r={error:m};case 10:if(n.p=10,n.p=11,h||t||!(i=v["return"])){n.n=12;break}return n.n=12,i.call(v);case 12:if(n.p=12,!r){n.n=13;break}throw r.error;case 13:return n.f(12);case 14:return n.f(10);case 15:l.includes(a.messageId)||Iu(a.messageId);case 16:return n.a(2)}},n,this,[[11,,12,14],[4,6],[1,9,10,15]])}))}var g=function(){Xj(this,i),function(n){hm.set(n)}(a),r(0,c=!1)}.bind(this),j=function(){Xj(this,i),w(),r(0,c=!1)}.bind(this),S=function(){Xj(this,i),r(3,v=!0)}.bind(this),O=function(){Xj(this,i),r(3,v=!1),r(0,c=!1)}.bind(this);return n.$$set=function(n){Xj(this,i),"showedMenu"in n&&r(0,c=n.showedMenu),"message"in n&&r(1,a=n.message),"chat"in n&&r(2,f=n.chat)}.bind(this),[c,a,f,v,d,b,p,m,w,g,j,S,O]}var Kj=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Gj(this,t),(0,rf.TsN)(r,n,Zj,Yj,rf.jXN,{showedMenu:0,message:1,chat:2}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Fj(n,t)}(t,n),function(n,t,r){return t&&Dj(n.prototype,t),r&&Dj(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const n_=Kj;function t_(n){return t_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},t_(n)}var r_=undefined;function i_(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,e_(i.key),i)}}function e_(n){var t=function(n,t){if("object"!=t_(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=t_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==t_(t)?t:t+""}function o_(n,t,r){return t=c_(t),function(n,t){if(t&&("object"==t_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,u_()?Reflect.construct(t,r||[],c_(n).constructor):t.apply(n,r))}function u_(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(u_=function(){return!!n})()}function c_(n){return c_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c_(n)}function a_(n,t){return a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},a_(n,t)}function f_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return s_(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?s_(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s_(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function l_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function h_(n){var t,r,i=n[5]&&function(n){var t,r,i,e,o,u,c,a,f,s=this;function l(t){n[7](t)}var h={message:n[1],chat:n[2]};return void 0!==n[3]&&(h.showedMenu=n[3]),e=new n_({props:h}),rf.Dnk.push(function(){return l_(this,s),(0,rf.oIE)(e,"showedMenu",l)}.bind(this)),{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).innerHTML="<i></i><i></i><i></i>",i=(0,rf.xem)(),(0,rf.N0i)(e.$$.fragment),(0,rf.CFu)(r,"class","chat-dropdown-menu__btn"),(0,rf.CFu)(t,"class",u="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":""))},m:function(o,u){(0,rf.Yry)(o,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.wSR)(e,t,null),n[8](t),c=!0,a||(f=[(0,rf.KTR)(r,"keyup",v_),(0,rf.KTR)(r,"click",n[6])],a=!0)},p:function(n,r){var i=this,a={};2&r&&(a.message=n[1]),4&r&&(a.chat=n[2]),!o&&8&r&&(o=!0,a.showedMenu=n[3],(0,rf.Jk$)(function(){return l_(this,i),o=!1}.bind(this))),e.$set(a),(!c||24&r&&u!==(u="chat-dropdown-menu"+(n[3]?" chat-dropdown-menu_show":"")+(n[4]?" chat-dropdown-menu_bottom":"")))&&(0,rf.CFu)(t,"class",u)},i:function(n){c||((0,rf.c7F)(e.$$.fragment,n),c=!0)},o:function(n){(0,rf.Tn8)(e.$$.fragment,n),c=!1},d:function(r){r&&(0,rf.YoD)(t),(0,rf.Hbl)(e),n[8](null),a=!1,(0,rf.oOW)(f)}}}(n);return{c:function(){i&&i.c(),t=(0,rf.Iex)()},m:function(n,e){i&&i.m(n,e),(0,rf.Yry)(n,t,e),r=!0},p:function(n,t){var r=f_(t,1)[0];n[5]&&i.p(n,r)},i:function(n){r||((0,rf.c7F)(i),r=!0)},o:function(n){(0,rf.Tn8)(i),r=!1},d:function(n){n&&(0,rf.YoD)(t),i&&i.d(n)}}}var v_=function(){l_(this,r_)}.bind(undefined);function d_(n,t,r){var i=this,e=t.message,o=t.chat,u=t.content,c=!1,a=e.authorId===_,f=o.type===Sn,s=e.authorId===$e,l=!1,h=!!(o.perms&qn.I)||s&&!!(f||o.perms&qn.WRITE),v=!a&&!s,d=!a&&o.type!==En&&(f||!!(o.perms&qn.WRITE)),b=h||v||d;function y(n){if(u){var t=n.target;t&&!u.contains(t)&&r(3,c=!1)}}(0,cf.Rc)(function(){var n=this;return l_(this,i),document.addEventListener("click",y),function(){l_(this,n),document.removeEventListener("click",y)}.bind(this)}.bind(this));var p=function(){l_(this,i),r(3,c=!c)}.bind(this);return n.$$set=function(n){l_(this,i),"message"in n&&r(1,e=n.message),"chat"in n&&r(2,o=n.chat),"content"in n&&r(0,u=n.content)}.bind(this),n.$$.update=function(){if(l_(this,i),9&n.$$.dirty&&u&&c){var t=u.parentNode;if(t){var e=t.parentNode;if(e){var o=e.getBoundingClientRect(),a=t.getBoundingClientRect();r(4,l=o.bottom-a.top<150)}}}}.bind(this),[u,e,o,c,l,b,p,function(n){r(3,c=n)},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){l_(this,t),r(0,u=n)}.bind(this))}]}var b_=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=o_(this,t),(0,rf.TsN)(r,n,d_,h_,rf.jXN,{message:1,chat:2,content:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&a_(n,t)}(t,n),function(n,t,r){return t&&i_(n.prototype,t),r&&i_(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const y_=b_;function p_(n){return p_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},p_(n)}function m_(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,w_(i.key),i)}}function w_(n){var t=function(n,t){if("object"!=p_(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=p_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==p_(t)?t:t+""}function g_(n,t,r){return t=__(t),function(n,t){if(t&&("object"==p_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,j_()?Reflect.construct(t,r||[],__(n).constructor):t.apply(n,r))}function j_(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(j_=function(){return!!n})()}function __(n){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},__(n)}function S_(n,t){return S_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},S_(n,t)}function O_(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function E_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return T_(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?T_(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T_(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function k_(n){var t,r;return t=new Xm({props:{data:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function C_(n){var t,r;return t=new Dw({props:{data:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function x_(n){var t,r,i,e,o=[C_,k_],u=[];function c(n,t){return(n[2]&&n[1]<ft||n[3])&&n[0].preview?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=(0,rf.Iex)()},m:function(n,r){u[t].m(n,r),(0,rf.Yry)(n,i,r),e=!0},p:function(n,e){var a=this,f=E_(e,1)[0],s=t;(t=c(n))===s?u[t].p(n,f):((0,rf.V44)(),(0,rf.Tn8)(u[s],1,1,function(){O_(this,a),u[s]=null}.bind(this)),(0,rf.GYV)(),(r=u[t])?r.p(n,f):(r=u[t]=o[t](n)).c(),(0,rf.c7F)(r,1),r.m(i.parentNode,i))},i:function(n){e||((0,rf.c7F)(r),e=!0)},o:function(n){(0,rf.Tn8)(r),e=!1},d:function(n){n&&(0,rf.YoD)(i),u[t].d(n)}}}function A_(n,t,r){var i=this,e=t.message,o=e.fileSize,u=0===e.mime.toLowerCase().indexOf("image"),c=0===e.mime.toLowerCase().indexOf("video");return n.$$set=function(n){O_(this,i),"message"in n&&r(0,e=n.message)}.bind(this),[e,o,u,c]}var I_=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=g_(this,t),(0,rf.TsN)(r,n,A_,x_,rf.jXN,{message:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&S_(n,t)}(t,n),function(n,t,r){return t&&m_(n.prototype,t),r&&m_(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const M_=I_;function R_(n){return R_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},R_(n)}function U_(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,P_(i.key),i)}}function P_(n){var t=function(n,t){if("object"!=R_(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=R_(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==R_(t)?t:t+""}function B_(n,t,r){return t=D_(t),function(n,t){if(t&&("object"==R_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,N_()?Reflect.construct(t,r||[],D_(n).constructor):t.apply(n,r))}function N_(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(N_=function(){return!!n})()}function D_(n){return D_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D_(n)}function $_(n,t){return $_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},$_(n,t)}function G_(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return L_(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L_(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L_(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function z_(n){var t;function r(n,t){return n[0].url?W_:F_}var i=r(n),e=i(n);return{c:function(){e.c(),t=(0,rf.Iex)()},m:function(n,r){e.m(n,r),(0,rf.Yry)(n,t,r)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){n&&(0,rf.YoD)(t),e.d(n)}}}function F_(n){var t,r,i,e;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.mq_)(t.src,r=n[0].preview.src)||(0,rf.CFu)(t,"src",r),(0,rf.CFu)(t,"class","enrich-block__img"),(0,rf.CFu)(t,"loading","lazy"),(0,rf.CFu)(t,"width",i=n[0].preview.width),(0,rf.CFu)(t,"height",e=n[0].preview.height),(0,rf.CFu)(t,"alt","")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,o){1&o&&!(0,rf.mq_)(t.src,r=n[0].preview.src)&&(0,rf.CFu)(t,"src",r),1&o&&i!==(i=n[0].preview.width)&&(0,rf.CFu)(t,"width",i),1&o&&e!==(e=n[0].preview.height)&&(0,rf.CFu)(t,"height",e)},d:function(n){n&&(0,rf.YoD)(t)}}}function W_(n){var t,r,i,e,o,u;return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.ND4)("img"),(0,rf.mq_)(r.src,i=n[0].preview.src)||(0,rf.CFu)(r,"src",i),(0,rf.CFu)(r,"class","enrich-block__img"),(0,rf.CFu)(r,"loading","lazy"),(0,rf.CFu)(r,"width",e=n[0].preview.width),(0,rf.CFu)(r,"height",o=n[0].preview.height),(0,rf.CFu)(r,"alt",""),(0,rf.CFu)(t,"href",u=n[0].url),(0,rf.CFu)(t,"rel","noreferrer"),(0,rf.CFu)(t,"target","_blank")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,c){1&c&&!(0,rf.mq_)(r.src,i=n[0].preview.src)&&(0,rf.CFu)(r,"src",i),1&c&&e!==(e=n[0].preview.width)&&(0,rf.CFu)(r,"width",e),1&c&&o!==(o=n[0].preview.height)&&(0,rf.CFu)(r,"height",o),1&c&&u!==(u=n[0].url)&&(0,rf.CFu)(t,"href",u)},d:function(n){n&&(0,rf.YoD)(t)}}}function q_(n){var t,r,i,e,o=n[0].siteName+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("a"),i=(0,rf.Qq7)(o),(0,rf.CFu)(r,"href",e=n[0].url),(0,rf.CFu)(r,"rel","noreferrer"),(0,rf.CFu)(r,"target","_blank"),(0,rf.CFu)(t,"class","enrich-block__site")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i)},p:function(n,t){1&t&&o!==(o=n[0].siteName+"")&&(0,rf.iQh)(i,o),1&t&&e!==(e=n[0].url)&&(0,rf.CFu)(r,"href",e)},d:function(n){n&&(0,rf.YoD)(t)}}}function X_(n){var t;function r(n,t){return n[0].url?J_:H_}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("div"),e.c(),(0,rf.CFu)(t,"class","enrich-block__title")},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function H_(n){var t,r=n[0].title+"";return{c:function(){t=(0,rf.Qq7)(r)},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){1&i&&r!==(r=n[0].title+"")&&(0,rf.iQh)(t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function J_(n){var t,r,i,e=n[0].title+"";return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.Qq7)(e),(0,rf.CFu)(t,"href",i=n[0].url),(0,rf.CFu)(t,"rel","noreferrer"),(0,rf.CFu)(t,"target","_blank")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,o){1&o&&e!==(e=n[0].title+"")&&(0,rf.iQh)(r,e),1&o&&i!==(i=n[0].url)&&(0,rf.CFu)(t,"href",i)},d:function(n){n&&(0,rf.YoD)(t)}}}function Q_(n){var t,r,i=n[0].description+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","enrich-block__desc")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){1&t&&i!==(i=n[0].description+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function V_(n){var t,r,i,e,o=n[0].preview&&n[0].preview.src&&z_(n),u=n[0].siteName&&n[0].url&&q_(n),c=n[0].title&&X_(n),a=n[0].description&&Q_(n);return{c:function(){t=(0,rf.ND4)("div"),o&&o.c(),r=(0,rf.xem)(),u&&u.c(),i=(0,rf.xem)(),c&&c.c(),e=(0,rf.xem)(),a&&a.c(),(0,rf.CFu)(t,"class","enrich-block")},m:function(n,f){(0,rf.Yry)(n,t,f),o&&o.m(t,null),(0,rf.BCw)(t,r),u&&u.m(t,null),(0,rf.BCw)(t,i),c&&c.m(t,null),(0,rf.BCw)(t,e),a&&a.m(t,null)},p:function(n,f){var s=G_(f,1)[0];n[0].preview&&n[0].preview.src?o?o.p(n,s):((o=z_(n)).c(),o.m(t,r)):o&&(o.d(1),o=null),n[0].siteName&&n[0].url?u?u.p(n,s):((u=q_(n)).c(),u.m(t,i)):u&&(u.d(1),u=null),n[0].title?c?c.p(n,s):((c=X_(n)).c(),c.m(t,e)):c&&(c.d(1),c=null),n[0].description?a?a.p(n,s):((a=Q_(n)).c(),a.m(t,null)):a&&(a.d(1),a=null)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),o&&o.d(),u&&u.d(),c&&c.d(),a&&a.d()}}}function Y_(n,t,r){var i=this,e=t.data;return n.$$set=function(n){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,i),"data"in n&&r(0,e=n.data)}.bind(this),[e]}var Z_=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=B_(this,t),(0,rf.TsN)(r,n,Y_,V_,rf.jXN,{data:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&$_(n,t)}(t,n),function(n,t,r){return t&&U_(n.prototype,t),r&&U_(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const K_=Z_;function nS(n){return nS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nS(n)}function tS(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,rS(i.key),i)}}function rS(n){var t=function(n,t){if("object"!=nS(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=nS(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==nS(t)?t:t+""}function iS(n,t,r){return t=oS(t),function(n,t){if(t&&("object"==nS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,eS()?Reflect.construct(t,r||[],oS(n).constructor):t.apply(n,r))}function eS(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(eS=function(){return!!n})()}function oS(n){return oS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oS(n)}function uS(n,t){return uS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},uS(n,t)}function cS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return aS(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?aS(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aS(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function fS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function sS(n,t,r){var i=n.slice();return i[3]=t[r],i}function lS(n,t,r){var i=n.slice();return i[6]=t[r],i}function hS(n){var t,r;return t=new ug({props:{message:n[0].parsedTags.quote,chat:n[1]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.message=n[0].parsedTags.quote),2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function vS(n){for(var t,r,i=this,e=[],o=new Map,u=(0,rf.rv_)(n[0].parsedTags.media),c=function(n){return fS(this,i),n[6].messageId}.bind(this),a=0;a<u.length;a+=1){var f=lS(n,u,a),s=c(f);o.set(s,e[a]=dS(s,f))}return{c:function(){t=(0,rf.ND4)("div");for(var n=0;n<e.length;n+=1)e[n].c();(0,rf.CFu)(t,"class","chat-media-list")},m:function(n,i){(0,rf.Yry)(n,t,i);for(var o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);r=!0},p:function(n,r){1&r&&(u=(0,rf.rv_)(n[0].parsedTags.media),(0,rf.V44)(),e=(0,rf.l7s)(e,r,c,1,n,u,o,t,rf.XP4,dS,null,lS),(0,rf.GYV)())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)(0,rf.c7F)(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)(0,rf.Tn8)(e[t]);r=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<e.length;r+=1)e[r].d()}}}function dS(n,t){var r,i,e;return i=new Dw({props:{data:t[6]}}),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};1&r&&(e.data=t[6]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function bS(n){for(var t,r,i=this,e=[],o=new Map,u=(0,rf.rv_)(n[0].parsedTags.files),c=function(n){return fS(this,i),n[3].messageId}.bind(this),a=0;a<u.length;a+=1){var f=sS(n,u,a),s=c(f);o.set(s,e[a]=yS(s,f))}return{c:function(){t=(0,rf.ND4)("div");for(var n=0;n<e.length;n+=1)e[n].c();(0,rf.CFu)(t,"class","chat-file-list")},m:function(n,i){(0,rf.Yry)(n,t,i);for(var o=0;o<e.length;o+=1)e[o]&&e[o].m(t,null);r=!0},p:function(n,r){1&r&&(u=(0,rf.rv_)(n[0].parsedTags.files),(0,rf.V44)(),e=(0,rf.l7s)(e,r,c,1,n,u,o,t,rf.XP4,yS,null,sS),(0,rf.GYV)())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)(0,rf.c7F)(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)(0,rf.Tn8)(e[t]);r=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<e.length;r+=1)e[r].d()}}}function yS(n,t){var r,i,e;return i=new Xm({props:{data:t[3]}}),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};1&r&&(e.data=t[3]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function pS(n){var t,r;return t=new K_({props:{data:n[0].tags.enrich}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.data=n[0].tags.enrich),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function mS(n){var t,r,i,e,o,u,c,a,f,s=(null===(t=n[0])||void 0===t||null===(t=t.parsedTags)||void 0===t?void 0:t.quote)&&hS(n),l=(null===(r=n[0])||void 0===r||null===(r=r.parsedTags)||void 0===r?void 0:r.media)&&vS(n),h=n[2]&&function(n){var t;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"class","chat-message__text")},m:function(r,i){(0,rf.Yry)(r,t,i),t.innerHTML=n[2]},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}(n),v=(null===(i=n[0])||void 0===i||null===(i=i.parsedTags)||void 0===i?void 0:i.files)&&bS(n),d=n[0].tags&&n[0].tags.enrich&&pS(n);return{c:function(){s&&s.c(),e=(0,rf.xem)(),l&&l.c(),o=(0,rf.xem)(),h&&h.c(),u=(0,rf.xem)(),v&&v.c(),c=(0,rf.xem)(),d&&d.c(),a=(0,rf.Iex)()},m:function(n,t){s&&s.m(n,t),(0,rf.Yry)(n,e,t),l&&l.m(n,t),(0,rf.Yry)(n,o,t),h&&h.m(n,t),(0,rf.Yry)(n,u,t),v&&v.m(n,t),(0,rf.Yry)(n,c,t),d&&d.m(n,t),(0,rf.Yry)(n,a,t),f=!0},p:function(n,t){var r,i,u,f=this,b=cS(t,1)[0];null!==(r=n[0])&&void 0!==r&&null!==(r=r.parsedTags)&&void 0!==r&&r.quote?s?(s.p(n,b),1&b&&(0,rf.c7F)(s,1)):((s=hS(n)).c(),(0,rf.c7F)(s,1),s.m(e.parentNode,e)):s&&((0,rf.V44)(),(0,rf.Tn8)(s,1,1,function(){fS(this,f),s=null}.bind(this)),(0,rf.GYV)()),null!==(i=n[0])&&void 0!==i&&null!==(i=i.parsedTags)&&void 0!==i&&i.media?l?(l.p(n,b),1&b&&(0,rf.c7F)(l,1)):((l=vS(n)).c(),(0,rf.c7F)(l,1),l.m(o.parentNode,o)):l&&((0,rf.V44)(),(0,rf.Tn8)(l,1,1,function(){fS(this,f),l=null}.bind(this)),(0,rf.GYV)()),n[2]&&h.p(n,b),null!==(u=n[0])&&void 0!==u&&null!==(u=u.parsedTags)&&void 0!==u&&u.files?v?(v.p(n,b),1&b&&(0,rf.c7F)(v,1)):((v=bS(n)).c(),(0,rf.c7F)(v,1),v.m(c.parentNode,c)):v&&((0,rf.V44)(),(0,rf.Tn8)(v,1,1,function(){fS(this,f),v=null}.bind(this)),(0,rf.GYV)()),n[0].tags&&n[0].tags.enrich?d?(d.p(n,b),1&b&&(0,rf.c7F)(d,1)):((d=pS(n)).c(),(0,rf.c7F)(d,1),d.m(a.parentNode,a)):d&&((0,rf.V44)(),(0,rf.Tn8)(d,1,1,function(){fS(this,f),d=null}.bind(this)),(0,rf.GYV)())},i:function(n){f||((0,rf.c7F)(s),(0,rf.c7F)(l),(0,rf.c7F)(v),(0,rf.c7F)(d),f=!0)},o:function(n){(0,rf.Tn8)(s),(0,rf.Tn8)(l),(0,rf.Tn8)(v),(0,rf.Tn8)(d),f=!1},d:function(n){n&&((0,rf.YoD)(e),(0,rf.YoD)(o),(0,rf.YoD)(u),(0,rf.YoD)(c),(0,rf.YoD)(a)),s&&s.d(n),l&&l.d(n),h&&h.d(n),v&&v.d(n),d&&d.d(n)}}}function wS(n,t,r){var i=this,e=t.message,o=t.chat,u=e.text?function(n,t){return n&&n.replace&&0!==n.length?n.replace(/(^|[\s\n]|<[A-Za-z]*\/?>)((?:https?|ftp):\/\/[-A-Z0-9+\u0026\u2019@#/%?=()~_|!:,.;]*[-A-Z0-9+\u0026@#/%=~()_|])/gi,function(n,r,i){if(t&&t.length)for(var e=function(n){return(n.indexOf("://")>-1?n.split("/")[2]:n.split("/")[0]).split(":")[0].split("?")[0]}(i),o=0;o<t.length;o++){var u=e.indexOf(t[o]);if(u>=0&&u===e.length-t[o].length)return[r,'<a href="',i,'" target="_blank" title="',i,'">',i,"</a>"].join("")}return[r,'<a href="https://www.mql5.com/go?link=',encodeURIComponent(i),'" target="_blank" title="',i,'">',i,"</a>"].join("")}):n}(e.text,Vt).replace(/\n/g,"<br>"):"";return n.$$set=function(n){fS(this,i),"message"in n&&r(0,e=n.message),"chat"in n&&r(1,o=n.chat)}.bind(this),[e,o,u]}var gS=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=iS(this,t),(0,rf.TsN)(r,n,wS,mS,rf.jXN,{message:0,chat:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&uS(n,t)}(t,n),function(n,t,r){return t&&tS(n.prototype,t),r&&tS(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const jS=gS;function _S(n){return _S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_S(n)}function SS(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,OS(i.key),i)}}function OS(n){var t=function(n,t){if("object"!=_S(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=_S(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==_S(t)?t:t+""}function ES(n,t,r){return t=kS(t),function(n,t){if(t&&("object"==_S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,TS()?Reflect.construct(t,r||[],kS(n).constructor):t.apply(n,r))}function TS(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(TS=function(){return!!n})()}function kS(n){return kS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},kS(n)}function CS(n,t){return CS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},CS(n,t)}function xS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function AS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return IS(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?IS(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IS(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function MS(n){var t,r;return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(n[1]),(0,rf.hgi)(t,"color",n[2])},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,i){2&i&&(0,rf.iQh)(r,n[1]),4&i&&(0,rf.hgi)(t,"color",n[2])},d:function(n){n&&(0,rf.YoD)(t)}}}function RS(n){var t,r;return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.Qq7)(n[1]),(0,rf.CFu)(t,"href",n[3]),(0,rf.CFu)(t,"target","_blank"),(0,rf.hgi)(t,"color",n[2])},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,i){2&i&&(0,rf.iQh)(r,n[1]),8&i&&(0,rf.CFu)(t,"href",n[3]),4&i&&(0,rf.hgi)(t,"color",n[2])},d:function(n){n&&(0,rf.YoD)(t)}}}function US(n){var t;function r(n,t){return n[3]?RS:MS}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("div"),e.c(),(0,rf.CFu)(t,"class","chat-message__name")},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){var u=AS(o,1)[0];i===(i=r(n))&&e?e.p(n,u):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function PS(n,t,r){var i,e=this,o=rf.lQ1,c=function(){var n=this;return xS(this,e),o(),o=(0,rf.B1Y)(a,function(t){return xS(this,n),r(7,i=t)}.bind(this)),a}.bind(this);n.$$.on_destroy.push(function(){return xS(this,e),o()}.bind(this));var a=t.data;c();var f=t.chat,s="",l="#4a76b8",h=!1,v=!1,d="";return n.$$set=function(n){xS(this,e),"data"in n&&c(r(0,a=n.data)),"chat"in n&&r(4,f=n.chat)}.bind(this),n.$$.update=function(){xS(this,e),240&n.$$.dirty&&(r(5,h=i.userId===_),i.userLogin&&!h?r(3,d="/".concat(or,"/users/").concat(i.userLogin.toLowerCase())):r(3,d=""),r(1,s=i.userName||""),i.isDeleted&&r(1,s=u("deletedAccount")),r(6,v=i.userId===$e),h?r(2,l="#4A76B8"):f.type===Sn?r(2,l=v?"#007700":"#d38900"):r(2,l=oh(wt(i.userId),95,20)))}.bind(this),[a,s,l,d,f,h,v,i]}var BS=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=ES(this,t),(0,rf.TsN)(r,n,PS,US,rf.jXN,{data:0,chat:4}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&CS(n,t)}(t,n),function(n,t,r){return t&&SS(n.prototype,t),r&&SS(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const NS=BS;function DS(n){return DS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},DS(n)}function $S(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,GS(i.key),i)}}function GS(n){var t=function(n,t){if("object"!=DS(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=DS(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==DS(t)?t:t+""}function LS(n,t,r){return t=FS(t),function(n,t){if(t&&("object"==DS(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,zS()?Reflect.construct(t,r||[],FS(n).constructor):t.apply(n,r))}function zS(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(zS=function(){return!!n})()}function FS(n){return FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FS(n)}function WS(n,t){return WS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},WS(n,t)}function qS(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function XS(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return HS(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?HS(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HS(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function JS(n){var t,r,i=n[2][0]+"";return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","chat-avatar__text")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){4&t&&i!==(i=n[2][0]+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function QS(n){var t,r;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.mq_)(t.src,r=n[1])||(0,rf.CFu)(t,"src",r),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"title",n[2]),(0,rf.CFu)(t,"width",n[0]),(0,rf.CFu)(t,"height",n[0]),(0,rf.CFu)(t,"loading","lazy")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){2&i&&!(0,rf.mq_)(t.src,r=n[1])&&(0,rf.CFu)(t,"src",r),4&i&&(0,rf.CFu)(t,"title",n[2]),1&i&&(0,rf.CFu)(t,"width",n[0]),1&i&&(0,rf.CFu)(t,"height",n[0])},d:function(n){n&&(0,rf.YoD)(t)}}}function VS(n){var t;function r(n,t){return n[1]?QS:JS}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("span"),e.c(),(0,rf.CFu)(t,"class","chat-avatar"),(0,rf.hgi)(t,"background",n[3])},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){var u=XS(o,1)[0];i===(i=r(n))&&e?e.p(n,u):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null))),8&u&&(0,rf.hgi)(t,"background",n[3])},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function YS(n,t,r){var i,e=this,o=rf.lQ1,u=function(){var n=this;return qS(this,e),o(),o=(0,rf.B1Y)(c,function(t){return qS(this,n),r(6,i=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return qS(this,e),o()}.bind(this));var c,a=t.data,f=t.size,s=void 0===f?40:f,l="",h="#4a76b8",v=a.avatar;return a.type===Sn&&"authorId"in a&&u(c=Js(a.authorId===$e?a.extraId:a.authorId)),n.$$set=function(n){qS(this,e),"data"in n&&r(5,a=n.data),"size"in n&&r(0,s=n.size)}.bind(this),n.$$.update=function(){qS(this,e),32&n.$$.dirty&&a.type!==Sn&&r(1,v=a.avatar),66&n.$$.dirty&&i&&(r(1,v=i.userAvatar),r(3,h=v?"transparent":oh(wt(i.userId),undefined,undefined)),r(2,l=i.userName||"x")),98&n.$$.dirty&&(i?(r(3,h=v?"transparent":oh(wt(i.userId),undefined,undefined)),r(2,l=i.userName||"x")):(r(3,h=v?"transparent":oh(wt(a.chatId),undefined,undefined)),r(2,l=a.name||"x")))}.bind(this),[s,v,l,h,c,a,i]}var ZS=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=LS(this,t),(0,rf.TsN)(r,n,YS,VS,rf.jXN,{data:5,size:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&WS(n,t)}(t,n),function(n,t,r){return t&&$S(n.prototype,t),r&&$S(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const KS=ZS;function nO(n){return nO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nO(n)}function tO(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,rO(i.key),i)}}function rO(n){var t=function(n,t){if("object"!=nO(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=nO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==nO(t)?t:t+""}function iO(n,t,r){return t=oO(t),function(n,t){if(t&&("object"==nO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,eO()?Reflect.construct(t,r||[],oO(n).constructor):t.apply(n,r))}function eO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(eO=function(){return!!n})()}function oO(n){return oO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oO(n)}function uO(n,t){return uO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},uO(n,t)}function cO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function aO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return fO(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fO(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fO(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function sO(n){var t,r;return t=new jh({props:{data:n[2],size:n[3]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};4&r&&(i.data=n[2]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function lO(n){var t,r;return t=new KS({props:{data:n[1],size:n[3]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.data=n[1]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function hO(n){var t,r,i,e,o=[lO,sO],u=[];function c(n,t){return n[1].type===En?0:1}return r=c(n),i=u[r]=o[r](n),{c:function(){t=(0,rf.ND4)("div"),i.c(),(0,rf.CFu)(t,"class","chat-message__avatar")},m:function(n,i){(0,rf.Yry)(n,t,i),u[r].m(t,null),e=!0},p:function(n,e){var a=this,f=aO(e,1)[0],s=r;(r=c(n))===s?u[r].p(n,f):((0,rf.V44)(),(0,rf.Tn8)(u[s],1,1,function(){cO(this,a),u[s]=null}.bind(this)),(0,rf.GYV)(),(i=u[r])?i.p(n,f):(i=u[r]=o[r](n)).c(),(0,rf.c7F)(i,1),i.m(t,null))},i:function(n){e||((0,rf.c7F)(i),e=!0)},o:function(n){(0,rf.Tn8)(i),e=!1},d:function(n){n&&(0,rf.YoD)(t),u[r].d()}}}function vO(n,t,r){var i,e=this,o=rf.lQ1,u=function(){var n=this;return cO(this,e),o(),o=(0,rf.B1Y)(c,function(t){return cO(this,n),r(2,i=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return cO(this,e),o()}.bind(this));var c=t.data;u();var a=t.chat,f=Zt?20:40;return n.$$set=function(n){cO(this,e),"data"in n&&u(r(0,c=n.data)),"chat"in n&&r(1,a=n.chat)}.bind(this),[c,a,i,f]}var dO=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=iO(this,t),(0,rf.TsN)(r,n,vO,hO,rf.jXN,{data:0,chat:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&uO(n,t)}(t,n),function(n,t,r){return t&&tO(n.prototype,t),r&&tO(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const bO=dO;function yO(n){return yO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},yO(n)}function pO(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,mO(i.key),i)}}function mO(n){var t=function(n,t){if("object"!=yO(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=yO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==yO(t)?t:t+""}function wO(n,t,r){return t=jO(t),function(n,t){if(t&&("object"==yO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,gO()?Reflect.construct(t,r||[],jO(n).constructor):t.apply(n,r))}function gO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(gO=function(){return!!n})()}function jO(n){return jO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},jO(n)}function _O(n,t){return _O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},_O(n,t)}function SO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return OO(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?OO(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function OO(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function EO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function TO(n){var t,r,i,e,o=this;function u(t){n[11](t)}var c={message:n[0],chat:n[1]};return void 0!==n[4]&&(c.showedMenu=n[4]),r=new n_({props:c}),rf.Dnk.push(function(){return EO(this,o),(0,rf.oIE)(r,"showedMenu",u)}.bind(this)),{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"class","chat-float-menu"),(0,rf.hgi)(t,"top",n[6]+"px"),(0,rf.hgi)(t,"left",n[7]+"px")},m:function(i,o){(0,rf.Yry)(i,t,o),(0,rf.wSR)(r,t,null),n[12](t),e=!0},p:function(n,o){var u=this,c={};1&o&&(c.message=n[0]),2&o&&(c.chat=n[1]),!i&&16&o&&(i=!0,c.showedMenu=n[4],(0,rf.Jk$)(function(){return EO(this,u),i=!1}.bind(this))),r.$set(c),(!e||64&o)&&(0,rf.hgi)(t,"top",n[6]+"px"),(!e||128&o)&&(0,rf.hgi)(t,"left",n[7]+"px")},i:function(n){e||((0,rf.c7F)(r.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),e=!1},d:function(i){i&&(0,rf.YoD)(t),(0,rf.Hbl)(r),n[12](null)}}}function kO(n){var t,r;return t=new bO({props:{chat:n[1],data:n[9]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function CO(n){var t;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"class","chat-message__avatar")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function xO(n){var t,r,i,e,o=[IO,AO],u=[];function c(n,t){return n[1].type!==En?0:1}return t=c(n),r=u[t]=o[t](n),{c:function(){r.c(),i=(0,rf.Iex)()},m:function(n,r){u[t].m(n,r),(0,rf.Yry)(n,i,r),e=!0},p:function(n,e){var a=this,f=t;(t=c(n))===f?u[t].p(n,e):((0,rf.V44)(),(0,rf.Tn8)(u[f],1,1,function(){EO(this,a),u[f]=null}.bind(this)),(0,rf.GYV)(),(r=u[t])?r.p(n,e):(r=u[t]=o[t](n)).c(),(0,rf.c7F)(r,1),r.m(i.parentNode,i))},i:function(n){e||((0,rf.c7F)(r),e=!0)},o:function(n){(0,rf.Tn8)(r),e=!1},d:function(n){n&&(0,rf.YoD)(i),u[t].d(n)}}}function AO(n){var t,r,i,e=n[1].name+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(e),(0,rf.CFu)(t,"class","chat-message__name"),(0,rf.CFu)(t,"title",i=Le?n[0].authorName:"")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,o){2&o&&e!==(e=n[1].name+"")&&(0,rf.iQh)(r,e),1&o&&i!==(i=Le?n[0].authorName:"")&&(0,rf.CFu)(t,"title",i)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function IO(n){var t,r;return t=new NS({props:{chat:n[1],data:n[9]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function MO(n){var t,r;return t=new M_({props:{message:n[0]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.message=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function RO(n){var t,r;return t=new jS({props:{message:n[0],chat:n[1]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.message=n[0]),2&r&&(i.chat=n[1]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function UO(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j,_=this,S=Wr({dateTime:n[0].date,type:"time"})+"",O=n[4]&&TO(n);function E(t){n[13](t)}var T={message:n[0],chat:n[1]};void 0!==n[8]&&(T.content=n[8]),c=new y_({props:T}),rf.Dnk.push(function(){return EO(this,_),(0,rf.oIE)(c,"content",E)}.bind(this));var k=[CO,kO],C=[];function x(n,t){return n[2]?0:1}l=x(n),h=C[l]=k[l](n);var A=!n[2]&&xO(n),I=[RO,MO],M=[];function R(n,t){return n[0].recType===Tn?0:n[0].recType===kn?1:-1}return~(y=R(n))&&(p=M[y]=I[y](n)),{c:function(){O&&O.c(),t=(0,rf.xem)(),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),e=(0,rf.Qq7)(S),u=(0,rf.xem)(),(0,rf.N0i)(c.$$.fragment),f=(0,rf.xem)(),s=(0,rf.ND4)("div"),h.c(),v=(0,rf.xem)(),d=(0,rf.ND4)("div"),A&&A.c(),b=(0,rf.xem)(),p&&p.c(),(0,rf.CFu)(i,"class","chat-message__date"),(0,rf.CFu)(i,"title",o=n[0].dateText),(0,rf.CFu)(d,"class","chat-message__content"),(0,rf.CFu)(s,"class","chat-message__box"),(0,rf.CFu)(r,"class",m="chat-message"+(Zt?" chat-message_widget":"")+(n[4]?" chat-message_selected":"")+(n[2]?" chat-message_own":""))},m:function(o,a){O&&O.m(o,a),(0,rf.Yry)(o,t,a),(0,rf.Yry)(o,r,a),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.BCw)(r,u),(0,rf.wSR)(c,r,null),(0,rf.BCw)(r,f),(0,rf.BCw)(r,s),C[l].m(s,null),(0,rf.BCw)(s,v),(0,rf.BCw)(s,d),A&&A.m(d,null),(0,rf.BCw)(d,b),~y&&M[y].m(d,null),n[14](r),w=!0,g||(j=(0,rf.KTR)(r,"contextmenu",n[10]),g=!0)},p:function(n,u){var f=this,g=SO(u,1)[0];n[4]?O?(O.p(n,g),16&g&&(0,rf.c7F)(O,1)):((O=TO(n)).c(),(0,rf.c7F)(O,1),O.m(t.parentNode,t)):O&&((0,rf.V44)(),(0,rf.Tn8)(O,1,1,function(){EO(this,f),O=null}.bind(this)),(0,rf.GYV)()),(!w||1&g)&&S!==(S=Wr({dateTime:n[0].date,type:"time"})+"")&&(0,rf.iQh)(e,S),(!w||1&g&&o!==(o=n[0].dateText))&&(0,rf.CFu)(i,"title",o);var j={};1&g&&(j.message=n[0]),2&g&&(j.chat=n[1]),!a&&256&g&&(a=!0,j.content=n[8],(0,rf.Jk$)(function(){return EO(this,f),a=!1}.bind(this))),c.$set(j);var _=l;(l=x(n))===_?C[l].p(n,g):((0,rf.V44)(),(0,rf.Tn8)(C[_],1,1,function(){EO(this,f),C[_]=null}.bind(this)),(0,rf.GYV)(),(h=C[l])?h.p(n,g):(h=C[l]=k[l](n)).c(),(0,rf.c7F)(h,1),h.m(s,v)),n[2]?A&&((0,rf.V44)(),(0,rf.Tn8)(A,1,1,function(){EO(this,f),A=null}.bind(this)),(0,rf.GYV)()):A?(A.p(n,g),4&g&&(0,rf.c7F)(A,1)):((A=xO(n)).c(),(0,rf.c7F)(A,1),A.m(d,b));var E=y;(y=R(n))===E?~y&&M[y].p(n,g):(p&&((0,rf.V44)(),(0,rf.Tn8)(M[E],1,1,function(){EO(this,f),M[E]=null}.bind(this)),(0,rf.GYV)()),~y?((p=M[y])?p.p(n,g):(p=M[y]=I[y](n)).c(),(0,rf.c7F)(p,1),p.m(d,null)):p=null),(!w||20&g&&m!==(m="chat-message"+(Zt?" chat-message_widget":"")+(n[4]?" chat-message_selected":"")+(n[2]?" chat-message_own":"")))&&(0,rf.CFu)(r,"class",m)},i:function(n){w||((0,rf.c7F)(O),(0,rf.c7F)(c.$$.fragment,n),(0,rf.c7F)(h),(0,rf.c7F)(A),(0,rf.c7F)(p),w=!0)},o:function(n){(0,rf.Tn8)(O),(0,rf.Tn8)(c.$$.fragment,n),(0,rf.Tn8)(h),(0,rf.Tn8)(A),(0,rf.Tn8)(p),w=!1},d:function(i){i&&((0,rf.YoD)(t),(0,rf.YoD)(r)),O&&O.d(i),(0,rf.Hbl)(c),C[l].d(),A&&A.d(),~y&&M[y].d(),n[14](null),g=!1,j()}}}function PO(n,t,r){var i,e,o,u=this,c=t.message,a=t.chat,f=t.prevOwn,s=void 0!==f&&f,l=Js(a.type!==En?c.authorId:""),h=!1,v=0,d=0;function b(n){if(i){var t=n.target;t&&!i.contains(t)&&r(4,h=!1)}}function y(n){if(e&&!n.ctrlKey&&2!=n.button){var t=n.target;t&&!e.contains(t)&&r(4,h=!1)}}return(0,cf.Rc)(function(){var n=this;return EO(this,u),document.addEventListener("click",y),document.addEventListener("contextmenu",b),function(){EO(this,n),document.removeEventListener("click",y),document.removeEventListener("contextmenu",b)}.bind(this)}.bind(this)),n.$$set=function(n){EO(this,u),"message"in n&&r(0,c=n.message),"chat"in n&&r(1,a=n.chat),"prevOwn"in n&&r(2,s=n.prevOwn)}.bind(this),[c,a,s,i,h,e,v,d,o,l,function(n){var t;if(!(null===(t=window.getSelection())||void 0===t?void 0:t.toString())){var i=n.target;"IMG"===i.tagName||"A"===i.tagName||(null==e?void 0:e.contains(i))||(null==o?void 0:o.contains(i))||(n.preventDefault(),r(6,v=n.pageY),r(7,d=n.pageX),r(4,h=!0))}},function(n){r(4,h=n)},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){EO(this,t),r(5,e=n)}.bind(this))},function(n){r(8,o=n)},function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){EO(this,t),r(3,i=n)}.bind(this))}]}var BO=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=wO(this,t),(0,rf.TsN)(r,n,PO,UO,rf.jXN,{message:0,chat:1,prevOwn:2}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&_O(n,t)}(t,n),function(n,t,r){return t&&pO(n.prototype,t),r&&pO(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const NO=BO;function DO(n){return DO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},DO(n)}function $O(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,GO(i.key),i)}}function GO(n){var t=function(n,t){if("object"!=DO(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=DO(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==DO(t)?t:t+""}function LO(n,t,r){return t=FO(t),function(n,t){if(t&&("object"==DO(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,zO()?Reflect.construct(t,r||[],FO(n).constructor):t.apply(n,r))}function zO(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(zO=function(){return!!n})()}function FO(n){return FO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},FO(n)}function WO(n,t){return WO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},WO(n,t)}function qO(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return XO(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(XO(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,XO(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,XO(l,"constructor",f),XO(f,"constructor",a),a.displayName="GeneratorFunction",XO(f,e,"GeneratorFunction"),XO(l),XO(l,e,"Generator"),XO(l,i,function(){return this}),XO(l,"toString",function(){return"[object Generator]"}),(qO=function(){return{w:o,m:h}})()}function XO(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}XO=function(n,t,r,i){function o(t,r){XO(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},XO(n,t,r,i)}function HO(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return JO(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?JO(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function JO(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function QO(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function VO(n,t,r){var i=n.slice();return i[21]=t[r],i[23]=r,i}function YO(n){var t;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"class","chat-loader-bar")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function ZO(n){var t,r,i,e;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=(0,rf.xem)(),(e=(0,rf.ND4)("div")).textContent="".concat(u("noMessagesYet")),(0,rf.CFu)(r,"class","icons-chat icons-chat_add-message-big"),(0,rf.CFu)(t,"class","chat-comments-list__empty")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e)},d:function(n){n&&(0,rf.YoD)(t)}}}function KO(n){var t,r;return t=new NO({props:{chat:n[1],message:n[21],prevOwn:n[7](n[23],n[21])}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.chat=n[1]),8&r&&(i.message=n[21]),8&r&&(i.prevOwn=n[7](n[23],n[21])),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function nE(n){var t,r;return t=new lj({props:{chat:n[1],message:n[21]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};2&r&&(i.chat=n[1]),8&r&&(i.message=n[21]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function tE(n){var t,r,i,e,o=oE(n[21].dateBar)+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.Qq7)(o),e=(0,rf.xem)(),(0,rf.CFu)(r,"class","chat-date-bar__title"),(0,rf.CFu)(t,"class","chat-date-bar")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(t,e)},p:function(n,t){8&t&&o!==(o=oE(n[21].dateBar)+"")&&(0,rf.iQh)(i,o)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function rE(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("unreadMessages")),i=(0,rf.xem)(),(0,rf.CFu)(r,"class","chat-unread-indicator__content"),(0,rf.CFu)(t,"class","chat-unread-indicator")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function iE(n,t){var r,i,e,o,u,c=[rE,tE,nE,KO],a=[];function f(n,t){return"unread"in n[21]?0:"dateBar"in n[21]?1:n[21].recType===xn?2:3}return i=f(t),e=a[i]=c[i](t),{key:n,first:null,c:function(){r=(0,rf.Iex)(),e.c(),o=(0,rf.Iex)(),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),a[i].m(n,t),(0,rf.Yry)(n,o,t),u=!0},p:function(n,r){var u=this,s=i;(i=f(t=n))===s?a[i].p(t,r):((0,rf.V44)(),(0,rf.Tn8)(a[s],1,1,function(){QO(this,u),a[s]=null}.bind(this)),(0,rf.GYV)(),(e=a[i])?e.p(t,r):(e=a[i]=c[i](t)).c(),(0,rf.c7F)(e,1),e.m(o.parentNode,o))},i:function(n){u||((0,rf.c7F)(e),u=!0)},o:function(n){(0,rf.Tn8)(e),u=!1},d:function(n){n&&((0,rf.YoD)(r),(0,rf.YoD)(o)),a[i].d(n)}}}function eE(n){for(var t,r,i,e,o,u,c,a=this,f=[],s=new Map,l=n[4]&&YO(),h=!n[3].length&&n[5]&&ZO(),v=(0,rf.rv_)(n[3]),d=function(n){return QO(this,a),n[21].messageId}.bind(this),b=0;b<v.length;b+=1){var y=VO(n,v,b),p=d(y);s.set(p,f[b]=iE(p,y))}return{c:function(){t=(0,rf.ND4)("div"),l&&l.c(),r=(0,rf.xem)(),h&&h.c(),i=(0,rf.xem)();for(var o=0;o<f.length;o+=1)f[o].c();(0,rf.CFu)(t,"class",e="chat-comments-list"+(n[3].length||n[5]?"":" chat-comments-list_loading"))},m:function(e,a){(0,rf.Yry)(e,t,a),l&&l.m(t,null),(0,rf.BCw)(t,r),h&&h.m(t,null),(0,rf.BCw)(t,i);for(var s=0;s<f.length;s+=1)f[s]&&f[s].m(t,null);n[13](t),o=!0,u||(c=(0,rf.KTR)(t,"scroll",(0,rf.IZi)(sa(n[6],200))),u=!0)},p:function(n,u){var c=HO(u,1)[0];n[4]?l||((l=YO()).c(),l.m(t,r)):l&&(l.d(1),l=null),!n[3].length&&n[5]?h||((h=ZO()).c(),h.m(t,i)):h&&(h.d(1),h=null),138&c&&(v=(0,rf.rv_)(n[3]),(0,rf.V44)(),f=(0,rf.l7s)(f,c,d,1,n,v,s,t,rf.XP4,iE,null,VO),(0,rf.GYV)()),(!o||40&c&&e!==(e="chat-comments-list"+(n[3].length||n[5]?"":" chat-comments-list_loading")))&&(0,rf.CFu)(t,"class",e)},i:function(n){if(!o){for(var t=0;t<v.length;t+=1)(0,rf.c7F)(f[t]);o=!0}},o:function(n){for(var t=0;t<f.length;t+=1)(0,rf.Tn8)(f[t]);o=!1},d:function(r){r&&(0,rf.YoD)(t),l&&l.d(),h&&h.d();for(var i=0;i<f.length;i+=1)f[i].d();n[13](null),u=!1,c()}}}function oE(n){return qr({dateTime:n,type:"date"})}function uE(n,t,r){var i,e,o,u,c,a,f=this,s=rf.lQ1,l=function(){var n=this;return QO(this,f),s(),s=(0,rf.B1Y)(v,function(t){return QO(this,n),r(12,u=t)}.bind(this)),v}.bind(this);(0,rf.j0C)(n,Po,function(n){return QO(this,f),r(1,e=n)}.bind(this)),(0,rf.j0C)(n,xu,function(n){return QO(this,f),r(16,o=n)}.bind(this)),(0,rf.j0C)(n,Gu,function(n){return QO(this,f),r(4,c=n)}.bind(this)),(0,rf.j0C)(n,$u,function(n){return QO(this,f),r(5,a=n)}.bind(this)),n.$$.on_destroy.push(function(){return QO(this,f),s()}.bind(this));var h=this&&this.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},v=t.list;l();var d,b=t.loadMore,y="",p=!1,m=0,w=0,g=sa(b,100);function j(){return h(this,void 0,void 0,qO().m(function n(){var t;return qO().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,(0,cf.io)();case 1:if(d&&e&&e.chatId&&p){n.n=2;break}return n.a(2);case 2:t=d.scrollHeight,m=Math.max(m,0)+(t-w),r(2,d.scrollTop=m,d),(w=t)-50<=d.clientHeight&&b();case 3:return n.a(2)}},n)}))}function S(){return h(this,void 0,void 0,qO().m(function n(){return qO().w(function(n){for(;;)switch(n.n){case 0:return r(3,i=[]),n.n=1,(0,cf.io)();case 1:w=d.scrollHeight-40,Xu(),r(10,y=e.chatId),r(11,p=!0);case 2:return n.a(2)}},n)}))}return(0,cf.Rc)(function(){var n=this;return QO(this,f),S(),function(){QO(this,n),Xu()}.bind(this)}.bind(this)),n.$$set=function(n){QO(this,f),"list"in n&&l(r(0,v=n.list)),"loadMore"in n&&r(8,b=n.loadMore)}.bind(this),n.$$.update=function(){QO(this,f),4096&n.$$.dirty&&r(3,i=function(n){var t=this;if(!n||!n.length)return[];var r,i=[],u=-1,c=0,a=[],f=n.length;return n.forEach(function(n,s){var l;QO(this,t);var h=new Date(null===(l=n.date)||void 0===l?void 0:l.getTime());h.setHours(0,0,0,0);var v=h.getTime();~a.indexOf(v)||(c++,i.push({dateBar:h,messageId:v}),a.push(v)),e.isSubscribed&&(n.authorId!==$e&&_t(n.messageId,o)>0&&(r?_t(n.messageId,r.messageId)<0&&(r=n,u=s+c):(r=n,u=s+c)),s+1===f&&n.authorId===$e&&(u=-1)),i.push(n)}.bind(this)),~u&&i.splice(u,0,{unread:!0,messageId:-1}),i}(u)),3074&n.$$.dirty&&p&&y!==e.chatId&&((0,rf.vu6)(Gu,c=!0,c),S()),4096&n.$$.dirty&&u&&j()}.bind(this),[v,e,d,i,c,a,function(){return h(this,void 0,void 0,qO().m(function n(){return qO().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,(0,cf.io)();case 1:if(d&&e&&e.chatId){n.n=2;break}return n.a(2);case 2:(m=d.scrollTop)<50&&g();case 3:return n.a(2)}},n)}))},function(n,t){if(!n)return!1;if(e.type===En||e.authorId===_||e.extraId===_)return!1;var r=i[n-1];return"authorId"in r&&((r.recType===Tn||r.recType===kn)&&r.authorId===t.authorId)},b,j,y,p,u,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){QO(this,t),r(2,d=n)}.bind(this))}]}var cE=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=LO(this,t),(0,rf.TsN)(r,n,uE,eE,rf.jXN,{list:0,loadMore:8,handleChange:9}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&WO(n,t)}(t,n),function(n,t,r){return t&&$O(n.prototype,t),r&&$O(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t,[{key:"handleChange",get:function(){return this.$$.ctx[9]}}])}(rf.r7T);const aE=cE;function fE(n){return fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fE(n)}var sE=undefined;function lE(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,hE(i.key),i)}}function hE(n){var t=function(n,t){if("object"!=fE(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=fE(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==fE(t)?t:t+""}function vE(n,t,r){return t=bE(t),function(n,t){if(t&&("object"==fE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,dE()?Reflect.construct(t,r||[],bE(n).constructor):t.apply(n,r))}function dE(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(dE=function(){return!!n})()}function bE(n){return bE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bE(n)}function yE(n,t){return yE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},yE(n,t)}function pE(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return mE(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(mE(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,mE(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,mE(l,"constructor",f),mE(f,"constructor",a),a.displayName="GeneratorFunction",mE(f,e,"GeneratorFunction"),mE(l),mE(l,e,"Generator"),mE(l,i,function(){return this}),mE(l,"toString",function(){return"[object Generator]"}),(pE=function(){return{w:o,m:h}})()}function mE(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}mE=function(n,t,r,i){function o(t,r){mE(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},mE(n,t,r,i)}function wE(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return gE(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gE(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gE(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function jE(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _E(n){var t=this,r=n.slice(),i=r[4].some(function(n){return jE(this,t),n.userId===r[3].extraId}.bind(this));return r[12]=i,r}function SE(n){var t,r,i,e,o,c,a,f=u(n[3].isMuted?"unmute":"mute")+"",s=n[3].type===Sn&&OE(_E(n));return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("button"),e=(0,rf.Qq7)(f),o=(0,rf.xem)(),s&&s.c(),(0,rf.CFu)(i,"type","button"),(0,rf.CFu)(i,"class","chat-window-menu__button"),(0,rf.CFu)(r,"class","chat-window-menu__item"),(0,rf.CFu)(t,"class","chat-dropdown-menu__list chat-dropdown-menu__list_showed")},m:function(u,f){(0,rf.Yry)(u,t,f),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.BCw)(t,o),s&&s.m(t,null),c||(a=(0,rf.KTR)(i,"click",(0,rf.xZN)(n[5])),c=!0)},p:function(n,r){8&r&&f!==(f=u(n[3].isMuted?"unmute":"mute")+"")&&(0,rf.iQh)(e,f),n[3].type===Sn?s?s.p(_E(n),r):((s=OE(_E(n))).c(),s.m(t,null)):s&&(s.d(1),s=null)},d:function(n){n&&(0,rf.YoD)(t),s&&s.d(),c=!1,a()}}}function OE(n){var t,r,i,e,o,c=u(n[12]?"unblockUser":"blockUser")+"",a=n[2]&&EE(n);function f(){return n[8](n[12])}return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("button"),a&&a.c(),i=(0,rf.Qq7)(c),(0,rf.CFu)(r,"type","button"),(0,rf.CFu)(r,"class","chat-window-menu__button"),r.disabled=n[2],(0,rf.CFu)(t,"class","chat-window-menu__item chat-window-menu__item_red")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),a&&a.m(r,null),(0,rf.BCw)(r,i),e||(o=(0,rf.KTR)(r,"click",(0,rf.xZN)(f)),e=!0)},p:function(t,e){(n=t)[2]?a||((a=EE(n)).c(),a.m(r,i)):a&&(a.d(1),a=null),24&e&&c!==(c=u(n[12]?"unblockUser":"blockUser")+"")&&(0,rf.iQh)(i,c),4&e&&(r.disabled=n[2])},d:function(n){n&&(0,rf.YoD)(t),a&&a.d(),e=!1,o()}}}function EE(n){var t,r;return{c:function(){t=(0,rf.ND4)("i"),r=(0,rf.xem)(),(0,rf.CFu)(t,"class","loading-icon")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.Yry)(n,r,i)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r))}}}function TE(n){var t,r,i,e,o,u=n[0]&&SE(n);return{c:function(){t=(0,rf.ND4)("span"),(r=(0,rf.ND4)("span")).innerHTML="<i></i><i></i><i></i>",i=(0,rf.xem)(),u&&u.c(),(0,rf.CFu)(r,"class","chat-window-header__commands-btn"),(0,rf.CFu)(t,"class","chat-window-header__commands")},m:function(c,a){(0,rf.Yry)(c,t,a),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),u&&u.m(t,null),n[9](t),e||(o=[(0,rf.KTR)(r,"keyup",kE),(0,rf.KTR)(r,"click",n[7])],e=!0)},p:function(n,r){var i=wE(r,1)[0];n[0]?u?u.p(n,i):((u=SE(n)).c(),u.m(t,null)):u&&(u.d(1),u=null)},i:rf.lQ1,o:rf.lQ1,d:function(r){r&&(0,rf.YoD)(t),u&&u.d(),n[9](null),e=!1,(0,rf.oOW)(o)}}}var kE=function(){jE(this,sE)}.bind(undefined);function CE(n,t,r){var i,o,c=this;(0,rf.j0C)(n,Po,function(n){return jE(this,c),r(3,i=n)}.bind(this)),(0,rf.j0C)(n,Bo,function(n){return jE(this,c),r(4,o=n)}.bind(this));var a,f=this&&this.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},s=!1,l=!1;function h(n){if(a){var t=n.target;t&&!a.contains(t)&&r(0,s=!1)}}function v(){return f(this,arguments,void 0,function(){var n=!(arguments.length>0&&arguments[0]!==undefined)||arguments[0];return pE().m(function t(){var o,c,a;return pE().w(function(t){for(;;)switch(t.p=t.n){case 0:return r(2,l=!0),t.p=1,t.n=2,Me(i.extraId,n);case 2:if((o=t.v)!==gn){t.n=4;break}return c=Bo,t.n=3,Ce();case 3:c.set.call(c,t.v),t.n=5;break;case 4:throw new Error("".concat(u("errorOccuredMessage")," Code: ").concat(o));case 5:t.n=7;break;case 6:t.p=6,a=t.v,of.set(a.message),y.error(e.USER,a);case 7:r(2,l=!1),r(0,s=!1);case 8:return t.a(2)}},t,null,[[1,6]])})()})}(0,cf.Rc)(function(){var n=this;return jE(this,c),document.addEventListener("click",h),function(){jE(this,n),document.removeEventListener("click",h)}.bind(this)}.bind(this));var d=function(){jE(this,c),r(0,s=!s)}.bind(this),b=function(n){return jE(this,c),v(!n)}.bind(this);return[s,a,l,i,o,function(n){var t=this;if(n&&n.target){var e=!i.isMuted;je(i.chatId,e).then(function(n){jE(this,t),n===gn&&((0,rf.vu6)(Po,i.isMuted=e,i),Mo(i,e),r(0,s=!1))}.bind(this))}},v,d,b,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){jE(this,t),r(1,a=n)}.bind(this))}]}var xE=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=vE(this,t),(0,rf.TsN)(r,n,CE,TE,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&yE(n,t)}(t,n),function(n,t,r){return t&&lE(n.prototype,t),r&&lE(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const AE=xE;function IE(n){return IE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},IE(n)}var ME=undefined;function RE(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,UE(i.key),i)}}function UE(n){var t=function(n,t){if("object"!=IE(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=IE(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==IE(t)?t:t+""}function PE(n,t,r){return t=NE(t),function(n,t){if(t&&("object"==IE(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,BE()?Reflect.construct(t,r||[],NE(n).constructor):t.apply(n,r))}function BE(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(BE=function(){return!!n})()}function NE(n){return NE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},NE(n)}function DE(n,t){return DE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},DE(n,t)}function $E(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function GE(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return LE(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LE(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function LE(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function zE(n){var t,r;return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(n[5]),(0,rf.CFu)(t,"class","chat-window-header__name")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){32&t&&(0,rf.iQh)(r,n[5])},d:function(n){n&&(0,rf.YoD)(t)}}}function FE(n){var t,r;return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.Qq7)(n[5]),(0,rf.CFu)(t,"class","chat-window-header__name"),(0,rf.CFu)(t,"target","_blank"),(0,rf.CFu)(t,"href",n[6])},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,i){32&i&&(0,rf.iQh)(r,n[5]),64&i&&(0,rf.CFu)(t,"href",n[6])},d:function(n){n&&(0,rf.YoD)(t)}}}function WE(n){var t;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.CFu)(t,"title",u("verified")),(0,rf.CFu)(t,"class","chat-window-header__verified"),(0,rf.mq_)(t.src,"https://c.mql5.com/i/chat/verified.svg")||(0,rf.CFu)(t,"src","https://c.mql5.com/i/chat/verified.svg"),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"width","16"),(0,rf.CFu)(t,"height","16")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function qE(n){var t;return{c:function(){t=(0,rf.ND4)("i"),(0,rf.CFu)(t,"class","chat-window-header__muted icons-chat icons-chat_muted")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function XE(n){var t,r;return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(n[7]),(0,rf.CFu)(t,"class","chat-window-header__additional"),(0,rf.CFu)(t,"title",n[8])},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,i){128&i&&(0,rf.iQh)(r,n[7]),256&i&&(0,rf.CFu)(t,"title",n[8])},d:function(n){n&&(0,rf.YoD)(t)}}}function HE(n){var t;function r(n,t){return(Le||n[4].perms&qn.M)&&!n[1]?QE:JE}var i=r(n),e=i(n);return{c:function(){t=(0,rf.ND4)("div"),e.c(),(0,rf.CFu)(t,"class","chat-window-header__buttons")},m:function(n,r){(0,rf.Yry)(n,t,r),e.m(t,null)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t,null)))},d:function(n){n&&(0,rf.YoD)(t),e.d()}}}function JE(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_info"></i>',(0,rf.CFu)(t,"class","button chat-window-header__button-icon"),(0,rf.CFu)(t,"title",u("info"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[16])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function QE(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_edit-big"></i>',(0,rf.CFu)(t,"class","button chat-window-header__button-icon"),(0,rf.CFu)(t,"title",u("edit"))},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[15])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function VE(n){var t,r,i;return{c:function(){(t=(0,rf.ND4)("button")).textContent="".concat(u("delete")),(0,rf.CFu)(t,"class","button button_tiny chat-window-header__button chat-window-header__button_capitalize button_red")},m:function(e,o){(0,rf.Yry)(e,t,o),r||(i=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[17])),r=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r=!1,i()}}}function YE(n){var t;function r(n,t){return n[4].isSubscribed?KE:ZE}var i=r(n),e=i(n);return{c:function(){e.c(),t=(0,rf.Iex)()},m:function(n,r){e.m(n,r),(0,rf.Yry)(n,t,r)},p:function(n,o){i===(i=r(n))&&e?e.p(n,o):(e.d(1),(e=i(n))&&(e.c(),e.m(t.parentNode,t)))},d:function(n){n&&(0,rf.YoD)(t),e.d(n)}}}function ZE(n){var t,r,i,e,o=u(n[10]?"join":"subscribe")+"";return{c:function(){t=(0,rf.ND4)("button"),r=(0,rf.Qq7)(o),(0,rf.CFu)(t,"class","button button_tiny chat-window-header__button button_green")},m:function(o,u){(0,rf.Yry)(o,t,u),(0,rf.BCw)(t,r),i||(e=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[19])),i=!0)},p:function(n,t){1024&t&&o!==(o=u(n[10]?"join":"subscribe")+"")&&(0,rf.iQh)(r,o)},d:function(n){n&&(0,rf.YoD)(t),i=!1,e()}}}function KE(n){var t,r,i,e,o=u(n[10]?"leaveGroup":"unsubscribe")+"";return{c:function(){t=(0,rf.ND4)("button"),r=(0,rf.Qq7)(o),(0,rf.CFu)(t,"class","button button_tiny chat-window-header__button button_white")},m:function(o,u){(0,rf.Yry)(o,t,u),(0,rf.BCw)(t,r),i||(e=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[18])),i=!0)},p:function(n,t){1024&t&&o!==(o=u(n[10]?"leaveGroup":"unsubscribe")+"")&&(0,rf.iQh)(r,o)},d:function(n){n&&(0,rf.YoD)(t),i=!1,e()}}}function nT(n){var t,r;return t=new AE({}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function tT(n){var t,r;return(t=new ny({})).$on("close",n[20]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function rT(n){var t,r,i,e,o,c,a,f,s,l,h,v,d,b,y,p;function m(n,t){return n[6]?FE:zE}var w,g,j,_=m(n),S=_(n),O=n[4].isVerified&&WE(),E=n[4].isMuted&&qE(),T=!Zt&&function(n){var t,r=n[7]&&XE(n);return{c:function(){r&&r.c(),t=(0,rf.Iex)()},m:function(n,i){r&&r.m(n,i),(0,rf.Yry)(n,t,i)},p:function(n,i){n[7]?r?r.p(n,i):((r=XE(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},d:function(n){n&&(0,rf.YoD)(t),r&&r.d(n)}}}(n),k=!n[1]&&HE(n),C=n[1]&&!n[2]&&VE(n),x=(n[0]||n[10])&&(!n[11]||n[11]&&!n[4].isSubscribed)&&YE(n),A=n[4].isSubscribed&&nT(),I=!Zt&&{c:function(){(w=(0,rf.ND4)("span")).innerHTML='<i class="icons-chat icons-chat_close-gray"></i>',(0,rf.CFu)(w,"class","chat-window-header__close"),(0,rf.CFu)(w,"title",u("back"))},m:function(n,t){(0,rf.Yry)(n,w,t),g||(j=[(0,rf.KTR)(w,"keyup",eT),(0,rf.KTR)(w,"click",iT)],g=!0)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(w),g=!1,(0,rf.oOW)(j)}},M=Zt&&function(){var n,t,r;return{c:function(){(n=(0,rf.ND4)("span")).innerHTML='<i class="icons-chat icons-chat_back"></i>',(0,rf.CFu)(n,"class","chat-window-header__close chat-window-header__close_widget"),(0,rf.CFu)(n,"title",u("back"))},m:function(i,e){(0,rf.Yry)(i,n,e),t||(r=[(0,rf.KTR)(n,"keyup",oT),(0,rf.KTR)(n,"click",iT)],t=!0)},p:rf.lQ1,d:function(i){i&&(0,rf.YoD)(n),t=!1,(0,rf.oOW)(r)}}}(),R=n[9]&&tT(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),S.c(),e=(0,rf.xem)(),O&&O.c(),o=(0,rf.xem)(),E&&E.c(),c=(0,rf.xem)(),T&&T.c(),a=(0,rf.xem)(),k&&k.c(),f=(0,rf.xem)(),s=(0,rf.ND4)("div"),C&&C.c(),l=(0,rf.xem)(),x&&x.c(),h=(0,rf.xem)(),A&&A.c(),v=(0,rf.xem)(),I&&I.c(),d=(0,rf.xem)(),M&&M.c(),b=(0,rf.xem)(),R&&R.c(),y=(0,rf.Iex)(),(0,rf.CFu)(i,"class","chat-window-header__title"),(0,rf.CFu)(r,"class","chat-window-header__content"+(Zt?" chat-window-header__content_widget":"")),(0,rf.CFu)(s,"class","chat-window-header__tools"+(Zt?" chat-window-header__tools_widget":"")),(0,rf.CFu)(t,"class","chat-window-header ui")},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),S.m(i,null),(0,rf.BCw)(i,e),O&&O.m(i,null),(0,rf.BCw)(i,o),E&&E.m(i,null),(0,rf.BCw)(i,c),T&&T.m(i,null),(0,rf.BCw)(r,a),k&&k.m(r,null),(0,rf.BCw)(t,f),(0,rf.BCw)(t,s),C&&C.m(s,null),(0,rf.BCw)(s,l),x&&x.m(s,null),(0,rf.BCw)(s,h),A&&A.m(s,null),(0,rf.BCw)(s,v),I&&I.m(s,null),(0,rf.BCw)(t,d),M&&M.m(t,null),(0,rf.Yry)(n,b,u),R&&R.m(n,u),(0,rf.Yry)(n,y,u),p=!0},p:function(n,t){var u=this,a=GE(t,1)[0];_===(_=m(n))&&S?S.p(n,a):(S.d(1),(S=_(n))&&(S.c(),S.m(i,e))),n[4].isVerified?O||((O=WE()).c(),O.m(i,o)):O&&(O.d(1),O=null),n[4].isMuted?E||((E=qE()).c(),E.m(i,c)):E&&(E.d(1),E=null),Zt||T.p(n,a),n[1]?k&&(k.d(1),k=null):k?k.p(n,a):((k=HE(n)).c(),k.m(r,null)),n[1]&&!n[2]?C?C.p(n,a):((C=VE(n)).c(),C.m(s,l)):C&&(C.d(1),C=null),!n[0]&&!n[10]||n[11]&&(!n[11]||n[4].isSubscribed)?x&&(x.d(1),x=null):x?x.p(n,a):((x=YE(n)).c(),x.m(s,h)),n[4].isSubscribed?A?16&a&&(0,rf.c7F)(A,1):((A=nT()).c(),(0,rf.c7F)(A,1),A.m(s,v)):A&&((0,rf.V44)(),(0,rf.Tn8)(A,1,1,function(){$E(this,u),A=null}.bind(this)),(0,rf.GYV)()),Zt||I.p(n,a),Zt&&M.p(n,a),n[9]?R?(R.p(n,a),512&a&&(0,rf.c7F)(R,1)):((R=tT(n)).c(),(0,rf.c7F)(R,1),R.m(y.parentNode,y)):R&&((0,rf.V44)(),(0,rf.Tn8)(R,1,1,function(){$E(this,u),R=null}.bind(this)),(0,rf.GYV)())},i:function(n){p||((0,rf.c7F)(A),(0,rf.c7F)(R),p=!0)},o:function(n){(0,rf.Tn8)(A),(0,rf.Tn8)(R),p=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(b),(0,rf.YoD)(y)),S.d(),O&&O.d(),E&&E.d(),T&&T.d(),k&&k.d(),C&&C.d(),x&&x.d(),A&&A.d(),I&&I.d(),M&&M.d(),R&&R.d(n)}}}function iT(){ou()}var eT=function(){$E(this,ME)}.bind(undefined),oT=function(){$E(this,ME)}.bind(undefined);function uT(n,t,r){var i,o,c,a,f,s,l,h,v,d=this,b=rf.lQ1,p=function(){var n=this;return $E(this,d),b(),b=(0,rf.B1Y)(s,function(t){return $E(this,n),r(14,h=t)}.bind(this)),s}.bind(this);(0,rf.j0C)(n,Po,function(n){return $E(this,d),r(4,l=n)}.bind(this)),(0,rf.j0C)(n,Ft,function(n){return $E(this,d),r(12,v=n)}.bind(this)),n.$$.on_destroy.push(function(){return $E(this,d),b()}.bind(this));var m="",w="",g="",j="",S=!1;function O(){var n=this,t=a?qn.READ:qn.WRITE;re(l.chatId,$e,t).then(function(t){$E(this,n),Lf(t),l.type===En?window.fz&&window.fz("track","MQL5+Chat+Channel+Join"):l.type===On&&window.fz&&window.fz("track","MQL5+Chat+Group+Join"),(0,rf.vu6)(Po,l.isSubscribed=!0,l)}.bind(this))["catch"](function(t){$E(this,n),of.set(t.message),y.error(e.USER,t)}.bind(this))}var E=function(){$E(this,d),tu(Po)}.bind(this),T=function(){$E(this,d),(0,rf.vu6)(Ft,v.info=!0,v)}.bind(this),k=function(){$E(this,d),(0,rf.vu6)(Ft,v["delete"]=!0,v)}.bind(this),C=function(){$E(this,d),r(9,S=!0)}.bind(this),x=function(){$E(this,d),O()}.bind(this),A=function(){$E(this,d),r(9,S=!1)}.bind(this);return n.$$.update=function(){$E(this,d),16&n.$$.dirty&&r(2,i=l.authorId===_),16&n.$$.dirty&&r(11,o=l.authorId===$e),16&n.$$.dirty&&r(1,c=l.type===Sn),16&n.$$.dirty&&r(0,a=l.type===En),16&n.$$.dirty&&r(10,f=l.type===On),18&n.$$.dirty&&p(r(3,s=c?Js(l.authorId===$e?l.extraId:l.authorId):undefined)),16398&n.$$.dirty&&c&&s&&h&&(r(5,m=""),r(7,g=""),h.userLogin&&!i?r(6,w="/".concat(or,"/users/").concat(h.userLogin.toLowerCase())):r(6,w=""),r(5,m=h.userName||""),h.isDeleted&&r(5,m=u("deletedAccount"))),19&n.$$.dirty&&(c||(r(5,m=l.name),r(6,w=""),r(7,g=""),!Zt&&l.countMembers&&(r(7,g=u("ofUsers",gr(l.countMembers))),a&&r(8,j="".concat(u("owner"),": ").concat(l.authorName)))))}.bind(this),[a,c,i,s,l,m,w,g,j,S,f,o,v,O,h,E,T,k,C,x,A]}var cT=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=PE(this,t),(0,rf.TsN)(r,n,uT,rT,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&DE(n,t)}(t,n),function(n,t,r){return t&&RE(n.prototype,t),r&&RE(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const aT=cT;function fT(n){return fT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},fT(n)}function sT(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,lT(i.key),i)}}function lT(n){var t=function(n,t){if("object"!=fT(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=fT(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==fT(t)?t:t+""}function hT(n,t,r){return t=dT(t),function(n,t){if(t&&("object"==fT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,vT()?Reflect.construct(t,r||[],dT(n).constructor):t.apply(n,r))}function vT(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(vT=function(){return!!n})()}function dT(n){return dT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dT(n)}function bT(n,t){return bT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},bT(n,t)}function yT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function pT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return mT(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mT(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mT(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function wT(n){var t,r;return(t=new Dl({})).$on("close",n[7]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function gT(n){var t,r;return t=new am({props:{chat:Ko}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function jT(n){var t,r;return t=new Xs({}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function _T(n){var t,r;return(t=new Cd({})).$on("close",n[6]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function ST(n){var t,r;return(t=new jv({props:{chat:n[4]}})).$on("close",n[5]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};16&r&&(i.chat=n[4]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function OT(n){var t,r,i,e,o,u,c,a,f,s=[ST,_T,jT,gT,wT],l=[];function h(n,t){return n[3].addMembers?0:n[3].listMembers?1:n[3]["delete"]?2:n[3].edit?3:n[3].info?4:-1}~(t=h(n))&&(r=l[t]=s[t](n)),o=new aT({});var v={list:Cu,loadMore:n[0]};c=new aE({props:v}),n[8](c);var d=!Yt&&function(n){var t,r;return t=new Zg({props:{resizeList:n[1]}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}(n);return{c:function(){r&&r.c(),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),(0,rf.N0i)(o.$$.fragment),u=(0,rf.xem)(),(0,rf.N0i)(c.$$.fragment),a=(0,rf.xem)(),d&&d.c(),(0,rf.CFu)(e,"class","chat-window"+(Zt?" chat-window_widget":""))},m:function(n,r){~t&&l[t].m(n,r),(0,rf.Yry)(n,i,r),(0,rf.Yry)(n,e,r),(0,rf.wSR)(o,e,null),(0,rf.BCw)(e,u),(0,rf.wSR)(c,e,null),(0,rf.BCw)(e,a),d&&d.m(e,null),f=!0},p:function(n,e){var o=this,u=pT(e,1)[0],a=t;(t=h(n))===a?~t&&l[t].p(n,u):(r&&((0,rf.V44)(),(0,rf.Tn8)(l[a],1,1,function(){yT(this,o),l[a]=null}.bind(this)),(0,rf.GYV)()),~t?((r=l[t])?r.p(n,u):(r=l[t]=s[t](n)).c(),(0,rf.c7F)(r,1),r.m(i.parentNode,i)):r=null);var f={};1&u&&(f.loadMore=n[0]),c.$set(f),Yt||d.p(n,u)},i:function(n){f||((0,rf.c7F)(r),(0,rf.c7F)(o.$$.fragment,n),(0,rf.c7F)(c.$$.fragment,n),(0,rf.c7F)(d),f=!0)},o:function(n){(0,rf.Tn8)(r),(0,rf.Tn8)(o.$$.fragment,n),(0,rf.Tn8)(c.$$.fragment,n),(0,rf.Tn8)(d),f=!1},d:function(r){r&&((0,rf.YoD)(i),(0,rf.YoD)(e)),~t&&l[t].d(r),(0,rf.Hbl)(o),n[8](null),(0,rf.Hbl)(c),d&&d.d()}}}function ET(n,t,r){var i,e,o=this;(0,rf.j0C)(n,Ft,function(n){return yT(this,o),r(3,i=n)}.bind(this)),(0,rf.j0C)(n,Po,function(n){return yT(this,o),r(4,e=n)}.bind(this));var u,c=t.loadMore;(0,cf.Rc)(function(){var n=this;return yT(this,o),function(){yT(this,n),(0,rf.vu6)(Ft,i.addMembers=!1,i),(0,rf.vu6)(Ft,i.listMembers=!1,i),(0,rf.vu6)(Ft,i["delete"]=!1,i),(0,rf.vu6)(Ft,i.edit=!1,i),(0,rf.vu6)(Ft,i.info=!1,i)}.bind(this)}.bind(this));var a=function(){yT(this,o),(0,rf.vu6)(Ft,i.addMembers=!1,i)}.bind(this),f=function(){yT(this,o),(0,rf.vu6)(Ft,i.listMembers=!1,i)}.bind(this),s=function(){yT(this,o),(0,rf.vu6)(Ft,i.info=!1,i)}.bind(this);return n.$$set=function(n){yT(this,o),"loadMore"in n&&r(0,c=n.loadMore)}.bind(this),[c,function(){u.handleChange()},u,i,e,a,f,s,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){yT(this,t),r(2,u=n)}.bind(this))}]}var TT=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=hT(this,t),(0,rf.TsN)(r,n,ET,OT,rf.jXN,{loadMore:0,resizeList:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&bT(n,t)}(t,n),function(n,t,r){return t&&sT(n.prototype,t),r&&sT(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t,[{key:"resizeList",get:function(){return this.$$.ctx[1]}}])}(rf.r7T);const kT=TT;function CT(n){return CT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},CT(n)}function xT(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,AT(i.key),i)}}function AT(n){var t=function(n,t){if("object"!=CT(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=CT(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==CT(t)?t:t+""}function IT(n,t,r){return t=RT(t),function(n,t){if(t&&("object"==CT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,MT()?Reflect.construct(t,r||[],RT(n).constructor):t.apply(n,r))}function MT(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(MT=function(){return!!n})()}function RT(n){return RT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},RT(n)}function UT(n,t){return UT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},UT(n,t)}function PT(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function BT(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return NT(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NT(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function NT(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function DT(n){var t;return{c:function(){t=(0,rf.ND4)("span"),(0,rf.CFu)(t,"class","chat-line__name")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function $T(n){var t,r,i,e,o,u,c=n[0].isVerified&&GT(n),a=n[0].isMuted&&LT(n);return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.ND4)("span"),i=(0,rf.Qq7)(n[5]),e=(0,rf.xem)(),c&&c.c(),o=(0,rf.xem)(),a&&a.c(),(0,rf.CFu)(r,"class","chat-line__name-text"),(0,rf.CFu)(t,"class",u="chat-line__name"+(n[0].isMuted?" chat-line__name_muted":""))},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(t,e),c&&c.m(t,null),(0,rf.BCw)(t,o),a&&a.m(t,null)},p:function(n,r){32&r&&(0,rf.iQh)(i,n[5]),n[0].isVerified?c||((c=GT(n)).c(),c.m(t,o)):c&&(c.d(1),c=null),n[0].isMuted?a||((a=LT(n)).c(),a.m(t,null)):a&&(a.d(1),a=null),1&r&&u!==(u="chat-line__name"+(n[0].isMuted?" chat-line__name_muted":""))&&(0,rf.CFu)(t,"class",u)},d:function(n){n&&(0,rf.YoD)(t),c&&c.d(),a&&a.d()}}}function GT(n){var t;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.CFu)(t,"title",u("verified")),(0,rf.CFu)(t,"class","chat-line__verified"),(0,rf.mq_)(t.src,"https://c.mql5.com/i/chat/verified.svg")||(0,rf.CFu)(t,"src","https://c.mql5.com/i/chat/verified.svg"),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"width","16"),(0,rf.CFu)(t,"height","16")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function LT(n){var t;return{c:function(){t=(0,rf.ND4)("i"),(0,rf.CFu)(t,"class","icons-chat icons-chat_muted")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function zT(n){var t;return{c:function(){t=(0,rf.ND4)("span"),(0,rf.CFu)(t,"class","chat-line__read-mark")},m:function(r,i){(0,rf.Yry)(r,t,i),t.innerHTML=n[3]},p:function(n,r){8&r&&(t.innerHTML=n[3])},d:function(n){n&&(0,rf.YoD)(t)}}}function FT(n){var t;return{c:function(){t=(0,rf.ND4)("span"),(0,rf.CFu)(t,"class","chat-line__unread"),(0,rf.CFu)(t,"title",u("unreadMessages"))},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function WT(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d,b,y,p,m,w=qr({dateTime:n[0].topMessage?n[0].topMessage.date:n[0].date,type:"smart"})+"";function g(n,t){return n[5]?$T:DT}i=new KS({props:{data:n[0],size:cr}});var j=g(n),_=j(n);function S(n,t){return n[2]?FT:n[8]?zT:void 0}var O=S(n),E=O&&O(n);return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.ND4)("span"),(0,rf.N0i)(i.$$.fragment),e=(0,rf.xem)(),o=(0,rf.ND4)("span"),u=(0,rf.ND4)("span"),_.c(),c=(0,rf.xem)(),a=(0,rf.ND4)("span"),f=(0,rf.Qq7)(w),l=(0,rf.xem)(),h=(0,rf.ND4)("span"),v=(0,rf.xem)(),E&&E.c(),(0,rf.CFu)(r,"class","chat-line__avatar"),(0,rf.CFu)(a,"class","chat-line__date"),(0,rf.CFu)(a,"title",s=n[0].topMessage?n[0].topMessage.dateText:n[0].dateText),(0,rf.CFu)(u,"class","chat-line__header"),(0,rf.CFu)(h,"class","chat-line__desc"),(0,rf.CFu)(o,"class","chat-line__content"),(0,rf.CFu)(t,"href",d=hr(n[0])),(0,rf.CFu)(t,"class",b="chat-line"+(n[7]?" chat-line_active":"")+(n[2]||n[8]?" chat-line_marked":"")+(Zt?" chat-line_min":""))},m:function(s,d){(0,rf.Yry)(s,t,d),(0,rf.BCw)(t,r),(0,rf.wSR)(i,r,null),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(o,u),_.m(u,null),(0,rf.BCw)(u,c),(0,rf.BCw)(u,a),(0,rf.BCw)(a,f),(0,rf.BCw)(o,l),(0,rf.BCw)(o,h),h.innerHTML=n[4],(0,rf.BCw)(t,v),E&&E.m(t,null),y=!0,p||(m=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[12])),p=!0)},p:function(n,r){var e=BT(r,1)[0],o={};1&e&&(o.data=n[0]),i.$set(o),j===(j=g(n))&&_?_.p(n,e):(_.d(1),(_=j(n))&&(_.c(),_.m(u,c))),(!y||1&e)&&w!==(w=qr({dateTime:n[0].topMessage?n[0].topMessage.date:n[0].date,type:"smart"})+"")&&(0,rf.iQh)(f,w),(!y||1&e&&s!==(s=n[0].topMessage?n[0].topMessage.dateText:n[0].dateText))&&(0,rf.CFu)(a,"title",s),(!y||16&e)&&(h.innerHTML=n[4]),O===(O=S(n))&&E?E.p(n,e):(E&&E.d(1),(E=O&&O(n))&&(E.c(),E.m(t,null))),(!y||1&e&&d!==(d=hr(n[0])))&&(0,rf.CFu)(t,"href",d),(!y||388&e&&b!==(b="chat-line"+(n[7]?" chat-line_active":"")+(n[2]||n[8]?" chat-line_marked":"")+(Zt?" chat-line_min":"")))&&(0,rf.CFu)(t,"class",b)},i:function(n){y||((0,rf.c7F)(i.$$.fragment,n),y=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),y=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(i),_.d(),E&&E.d(),p=!1,m()}}}function qT(n,t,r){var i,o,c,a,f,s,l,h,v,d,b=this,p=rf.lQ1,m=function(){var n=this;return PT(this,b),p(),p=(0,rf.B1Y)(a,function(t){return PT(this,n),r(9,h=t)}.bind(this)),a}.bind(this);(0,rf.j0C)(n,Ft,function(n){return PT(this,b),r(10,v=n)}.bind(this)),(0,rf.j0C)(n,Po,function(n){return PT(this,b),r(11,d=n)}.bind(this)),n.$$.on_destroy.push(function(){return PT(this,b),p()}.bind(this));var w=t.chat,g=t.clickHandle,_=w.type===Sn,S=!1;var O=function(){PT(this,b),g(w.chatId)}.bind(this);return n.$$set=function(n){PT(this,b),"chat"in n&&r(0,w=n.chat),"clickHandle"in n&&r(1,g=n.clickHandle)}.bind(this),n.$$.update=function(){var t,p,g,O;PT(this,b),1&n.$$.dirty&&r(8,i=w.type!==En&&w.topMessage&&w.topMessage.authorId===$e),1&n.$$.dirty&&r(2,o=!!w.isSubscribed&&function(n){return _t(n.lastUpdate||j,n.lastAccess||j)>0}(w)),3073&n.$$.dirty&&r(7,c=d&&w.chatId===d.chatId&&v.window),1&n.$$.dirty&&m(r(6,a=_?Js(w.authorId===$e?w.extraId:w.authorId):undefined)),513&n.$$.dirty&&r(5,(t=h,p=w.name,f=t?t.isDeleted?(Ge||Le||(go(w.chatId),o&&(S?y.error(e.S,"Duplicate sending set last access","Main"):(_i(w.chatId,w.lastUpdate),r(2,o=!1),S=!0))),u("deletedAccount")):t.userName?t.userName:p:_?"":p)),1&n.$$.dirty&&r(4,(O="",(g=w).topMessage?(g.topMessage.recType===Tn?O=g.topMessage.text:g.topMessage.recType===kn&&(O=vr(g.topMessage.fileName)),g.type===On&&(O=g.topMessage.authorId===$e?"".concat(u("you"),": ").concat(O):"".concat(g.topMessage.authorName,": ").concat(O))):g.description&&(O=g.description),s=O)),1&n.$$.dirty&&r(3,l=function(n){var t=_t(n.lastUpdate,n.lastSeen)>0?"sent":"delivered";return'<i class="icons-chat icons-chat_'.concat(t,'"></i>')}(w))}.bind(this),[w,g,o,l,s,f,a,c,i,h,v,d,O]}var XT=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=IT(this,t),(0,rf.TsN)(r,n,qT,WT,rf.jXN,{chat:0,clickHandle:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&UT(n,t)}(t,n),function(n,t,r){return t&&xT(n.prototype,t),r&&xT(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const HT=XT;function JT(n){return JT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},JT(n)}function QT(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,VT(i.key),i)}}function VT(n){var t=function(n,t){if("object"!=JT(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=JT(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==JT(t)?t:t+""}function YT(n,t,r){return t=KT(t),function(n,t){if(t&&("object"==JT(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,ZT()?Reflect.construct(t,r||[],KT(n).constructor):t.apply(n,r))}function ZT(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(ZT=function(){return!!n})()}function KT(n){return KT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},KT(n)}function nk(n,t){return nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},nk(n,t)}function tk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return rk(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rk(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rk(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function ik(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ek(n,t,r){var i=n.slice();return i[14]=t[r],i}function ok(n){for(var t,r,i=this,e=[],o=new Map,u=(0,rf.rv_)(n[2]),c=function(n){return ik(this,i),n[14].chatId}.bind(this),a=0;a<u.length;a+=1){var f=ek(n,u,a),s=c(f);o.set(s,e[a]=ck(s,f))}return{c:function(){for(var n=0;n<e.length;n+=1)e[n].c();t=(0,rf.Iex)()},m:function(n,i){for(var o=0;o<e.length;o+=1)e[o]&&e[o].m(n,i);(0,rf.Yry)(n,t,i),r=!0},p:function(n,r){6&r&&(u=(0,rf.rv_)(n[2]),(0,rf.V44)(),e=(0,rf.l7s)(e,r,c,1,n,u,o,t.parentNode,rf.XP4,ck,t,ek),(0,rf.GYV)())},i:function(n){if(!r){for(var t=0;t<u.length;t+=1)(0,rf.c7F)(e[t]);r=!0}},o:function(n){for(var t=0;t<e.length;t+=1)(0,rf.Tn8)(e[t]);r=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<e.length;r+=1)e[r].d(n)}}}function uk(n){var t,r,i;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=new rf.OKD(!1),(0,rf.CFu)(r,"class","icons-chat icons-chat_chat-big"),i.a=null,(0,rf.CFu)(t,"class","empty-chats-list")},m:function(e,o){(0,rf.Yry)(e,t,o),(0,rf.BCw)(t,r),i.m(n[7],t)},p:function(n,t){128&t&&i.p(n[7])},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function ck(n,t){var r,i,e;return i=new HT({props:{chat:t[14],clickHandle:t[1]}}),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};4&r&&(e.chat=t[14]),2&r&&(e.clickHandle=t[1]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function ak(n){var t,r,i,e,o,u,c,a,f,s,l=[uk,ok],h=[];function v(n,t){return n[2].length?1:0}return o=v(n),u=h[o]=l[o](n),{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),u.c(),(0,rf.CFu)(r,"class","chat-panel__expand"),(0,rf.hgi)(r,"height",n[4]+"px"),(0,rf.CFu)(e,"class","chat-panel__list"),(0,rf.hgi)(e,"transform","translate3d(0,"+n[6]+"px,0)"),(0,rf.CFu)(t,"class",c="chat-panel"+(Zt?" chat-panel_widget":" chat-panel_standalone")+(n[8].length?" chat-panel_width-choice-type":"")+" "+n[0])},m:function(u,c){(0,rf.Yry)(u,t,c),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),h[o].m(e,null),n[13](t),a=!0,f||(s=(0,rf.KTR)(t,"scroll",sa(n[9],100)),f=!0)},p:function(n,i){var f=this,s=tk(i,1)[0];(!a||16&s)&&(0,rf.hgi)(r,"height",n[4]+"px");var d=o;(o=v(n))===d?h[o].p(n,s):((0,rf.V44)(),(0,rf.Tn8)(h[d],1,1,function(){ik(this,f),h[d]=null}.bind(this)),(0,rf.GYV)(),(u=h[o])?u.p(n,s):(u=h[o]=l[o](n)).c(),(0,rf.c7F)(u,1),u.m(e,null)),(!a||64&s)&&(0,rf.hgi)(e,"transform","translate3d(0,"+n[6]+"px,0)"),(!a||257&s&&c!==(c="chat-panel"+(Zt?" chat-panel_widget":" chat-panel_standalone")+(n[8].length?" chat-panel_width-choice-type":"")+" "+n[0]))&&(0,rf.CFu)(t,"class",c)},i:function(n){a||((0,rf.c7F)(u),a=!0)},o:function(n){(0,rf.Tn8)(u),a=!1},d:function(r){r&&(0,rf.YoD)(t),h[o].d(),n[13](null),f=!1,s()}}}function fk(n,t,r){var i,e,o,c=this,a=rf.lQ1,f=function(){var n=this;return ik(this,c),a(),a=(0,rf.B1Y)(s,function(t){return ik(this,n),r(11,i=t)}.bind(this)),s}.bind(this);(0,rf.j0C)(n,vo,function(n){return ik(this,c),r(12,e=n)}.bind(this)),(0,rf.j0C)(n,ho,function(n){return ik(this,c),r(8,o=n)}.bind(this)),n.$$.on_destroy.push(function(){return ik(this,c),a()}.bind(this));var s,l,h=t.additionalClass,v=void 0===h?"":h,d=t.clickHandle,b=t.loadMore,y=0,p=[],m=0,w="";function g(){if(l){var n=Zt?42:72,t=i.length;r(4,y=t*n);for(var o=l.scrollTop,u=l.offsetHeight,c=0,a=0,f=0,s=0;c<t;){if(a+n>o){s=Math.max(c-7,0),f=Math.max(a-7*n,0);break}a+=n,c++}for(;c<t&&(c++,!((a+=n)>o+u)););var h=Math.min(c+7,t);t&&t-h<7&&b(e),r(6,m=Math.ceil(f)),r(2,p=i.slice(s,h))}}return(0,cf.Rc)(function(){var n=this;return ik(this,c),window.addEventListener("resize",g),g(),function(){ik(this,n),window.removeEventListener("resize",g)}.bind(this)}.bind(this)),n.$$set=function(n){ik(this,c),"additionalClass"in n&&r(0,v=n.additionalClass),"clickHandle"in n&&r(1,d=n.clickHandle),"loadMore"in n&&r(10,b=n.loadMore)}.bind(this),n.$$.update=function(){if(ik(this,c),4104&n.$$.dirty&&e!==undefined&&l&&r(3,l.scrollTop=0,l),4096&n.$$.dirty)switch(e){case Sn:f(r(5,s=io));break;case On:f(r(5,s=eo));break;case En:f(r(5,s=oo));break;default:f(r(5,s=ro))}2048&n.$$.dirty&&i&&g(),4&n.$$.dirty&&(p.length||r(7,w=Zt?u("emptyChatsList","/".concat(or,"/users/").concat(Qt,"/messages")):u("emptyChatsListShort")))}.bind(this),[v,d,p,l,y,s,m,w,o,g,b,i,e,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){ik(this,t),r(3,l=n),r(12,e)}.bind(this))}]}var sk=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=YT(this,t),(0,rf.TsN)(r,n,fk,ak,rf.jXN,{additionalClass:0,clickHandle:1,loadMore:10}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&nk(n,t)}(t,n),function(n,t,r){return t&&QT(n.prototype,t),r&&QT(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const lk=sk;function hk(n){return hk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},hk(n)}function vk(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,dk(i.key),i)}}function dk(n){var t=function(n,t){if("object"!=hk(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=hk(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==hk(t)?t:t+""}function bk(n,t,r){return t=pk(t),function(n,t){if(t&&("object"==hk(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,yk()?Reflect.construct(t,r||[],pk(n).constructor):t.apply(n,r))}function yk(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(yk=function(){return!!n})()}function pk(n){return pk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},pk(n)}function mk(n,t){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},mk(n,t)}function wk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return jk(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?jk(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jk(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function _k(n,t,r){var i=n.slice();return i[7]=t[r],i}function Sk(n){for(var t,r=(0,rf.rv_)(n[2]),i=[],e=0;e<r.length;e+=1)i[e]=Ek(_k(n,r,e));return{c:function(){t=(0,rf.ND4)("div");for(var n=0;n<i.length;n+=1)i[n].c();(0,rf.CFu)(t,"class","chat-choice-type chat-choice-type_widget")},m:function(r,e){(0,rf.Yry)(r,t,e);for(var o=0;o<i.length;o+=1)i[o]&&i[o].m(t,null);n[6](t)},p:function(n,e){if(30&e){var o;for(r=(0,rf.rv_)(n[2]),o=0;o<r.length;o+=1){var u=_k(n,r,o);i[o]?i[o].p(u,e):(i[o]=Ek(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(r){r&&(0,rf.YoD)(t),(0,rf.ppq)(i,r),n[6](null)}}}function Ok(n){var t,r=n[4][n[7]].text+"";return{c:function(){t=(0,rf.Qq7)(r)},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){4&i&&r!==(r=n[4][n[7]].text+"")&&(0,rf.iQh)(t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function Ek(n){var t,r,i,e,o,u,c,a,f,s=!n[1]&&Ok(n);function l(){return n[5](n[7])}return{c:function(){t=(0,rf.ND4)("button"),r=(0,rf.ND4)("i"),e=(0,rf.xem)(),s&&s.c(),o=(0,rf.xem)(),(0,rf.CFu)(r,"class",i="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget)),(0,rf.CFu)(t,"class",u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":"")),(0,rf.CFu)(t,"title",c=n[4][n[7]].title)},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r),(0,rf.BCw)(t,e),s&&s.m(t,null),(0,rf.BCw)(t,o),a||(f=(0,rf.KTR)(t,"click",(0,rf.xZN)(l)),a=!0)},p:function(e,a){n=e,12&a&&i!==(i="icons-chat icons-chat_"+(n[3]===n[7]?n[4][n[7]].iconWidgetActive:n[4][n[7]].iconWidget))&&(0,rf.CFu)(r,"class",i),n[1]?s&&(s.d(1),s=null):s?s.p(n,a):((s=Ok(n)).c(),s.m(t,o)),12&a&&u!==(u="chat-choice-type__item"+(n[3]===n[7]?" chat-choice-type__item_active":""))&&(0,rf.CFu)(t,"class",u),4&a&&c!==(c=n[4][n[7]].title)&&(0,rf.CFu)(t,"title",c)},d:function(n){n&&(0,rf.YoD)(t),s&&s.d(),a=!1,f()}}}function Tk(n){var t,r=n[2].length&&Sk(n);return{c:function(){r&&r.c(),t=(0,rf.Iex)()},m:function(n,i){r&&r.m(n,i),(0,rf.Yry)(n,t,i)},p:function(n,i){var e=gk(i,1)[0];n[2].length?r?r.p(n,e):((r=Sk(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r&&r.d(n)}}}function kk(n,t,r){var i,e,o,c=this;(0,rf.j0C)(n,ho,function(n){return wk(this,c),r(2,i=n)}.bind(this)),(0,rf.j0C)(n,vo,function(n){return wk(this,c),r(3,e=n)}.bind(this));var a=[{icon:"flat-chats",iconWidget:"chats",iconWidgetActive:"chats-active",title:u("allChats"),text:u("allChatsShort")},{icon:"flat-personal-chats",iconWidget:"personal-chats",iconWidgetActive:"personal-chats-active",title:u("privateChats"),text:u("privateChatsShort")},{icon:"flat-group-chats",iconWidget:"group-chats",iconWidgetActive:"group-chats-active",title:u("groupChats"),text:u("groupChatsShort")},{icon:"flat-channels",iconWidget:"channels",iconWidgetActive:"channels-active",title:u("channels"),text:u("channels")}],f=!1;(0,cf.Rc)(function(){var n=this;wk(this,c),o&&window.ResizeObserver&&new ResizeObserver(function(){wk(this,n),r(1,f=o.offsetWidth<330)}.bind(this)).observe(o)}.bind(this));var s=function(n){wk(this,c),(0,rf.vu6)(vo,e=n,e),ou()}.bind(this);return[o,f,i,e,a,s,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){wk(this,t),r(0,o=n)}.bind(this))}]}var Ck=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=bk(this,t),(0,rf.TsN)(r,n,kk,Tk,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&mk(n,t)}(t,n),function(n,t,r){return t&&vk(n.prototype,t),r&&vk(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const xk=Ck;function Ak(){var n=this;return new Promise(function(t,r){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,n),window.Ajax.post("https://"+nr+"/auth",{token:Kt},!1,{onready:function(n){t(n)},onerror:function(n){r(new Error(n))}},undefined,!0)}.bind(this))}function Ik(n){return Ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ik(n)}function Mk(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Rk(i.key),i)}}function Rk(n){var t=function(n,t){if("object"!=Ik(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Ik(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Ik(t)?t:t+""}function Uk(n,t,r){return t=Bk(t),function(n,t){if(t&&("object"==Ik(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Pk()?Reflect.construct(t,r||[],Bk(n).constructor):t.apply(n,r))}function Pk(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Pk=function(){return!!n})()}function Bk(n){return Bk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Bk(n)}function Nk(n,t){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},Nk(n,t)}function Dk(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return $k(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$k(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $k(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Gk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Lk(n){var t,r,i,e;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("span"),e=(0,rf.Qq7)(n[3]),(0,rf.CFu)(i,"class","chat-errors-block__text"),(0,rf.CFu)(r,"class","alert alert_danger"),(0,rf.CFu)(t,"class","chat-errors-block")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e)},p:function(n,t){8&t&&(0,rf.iQh)(e,n[3])},d:function(n){n&&(0,rf.YoD)(t)}}}function zk(n){var t,r,i,e,o,u,c,a,f=n[9].error&&Fk(n),s=[qk,Wk],l=[];function h(n,t){return n[9].errorWindow?0:n[9].window?1:-1}return~(r=h(n))&&(i=l[r]=s[r](n)),o=new lk({props:{clickHandle:Sa,loadMore:So}}),c=new xk({}),{c:function(){f&&f.c(),t=(0,rf.xem)(),i&&i.c(),e=(0,rf.xem)(),(0,rf.N0i)(o.$$.fragment),u=(0,rf.xem)(),(0,rf.N0i)(c.$$.fragment)},m:function(n,i){f&&f.m(n,i),(0,rf.Yry)(n,t,i),~r&&l[r].m(n,i),(0,rf.Yry)(n,e,i),(0,rf.wSR)(o,n,i),(0,rf.Yry)(n,u,i),(0,rf.wSR)(c,n,i),a=!0},p:function(n,o){var u=this;n[9].error?f?512&o&&(0,rf.c7F)(f,1):((f=Fk(n)).c(),(0,rf.c7F)(f,1),f.m(t.parentNode,t)):f&&((0,rf.V44)(),(0,rf.Tn8)(f,1,1,function(){Gk(this,u),f=null}.bind(this)),(0,rf.GYV)());var c=r;(r=h(n))===c?~r&&l[r].p(n,o):(i&&((0,rf.V44)(),(0,rf.Tn8)(l[c],1,1,function(){Gk(this,u),l[c]=null}.bind(this)),(0,rf.GYV)()),~r?((i=l[r])?i.p(n,o):(i=l[r]=s[r](n)).c(),(0,rf.c7F)(i,1),i.m(e.parentNode,e)):i=null)},i:function(n){a||((0,rf.c7F)(f),(0,rf.c7F)(i),(0,rf.c7F)(o.$$.fragment,n),(0,rf.c7F)(c.$$.fragment,n),a=!0)},o:function(n){(0,rf.Tn8)(f),(0,rf.Tn8)(i),(0,rf.Tn8)(o.$$.fragment,n),(0,rf.Tn8)(c.$$.fragment,n),a=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(e),(0,rf.YoD)(u)),f&&f.d(n),~r&&l[r].d(n),(0,rf.Hbl)(o,n),(0,rf.Hbl)(c,n)}}}function Fk(n){var t,r;return t=new jf({}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Wk(n){var t,r;return t=new kT({props:{loadMore:Wu}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function qk(n){var t,r;return(t=new $f({props:{$$slots:{content:[Xk]},$$scope:{ctx:n}}})).$on("close",n[14]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};525312&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function Xk(n){var t;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"slot","content")},m:function(r,i){(0,rf.Yry)(r,t,i),t.innerHTML=n[10]},p:function(n,r){1024&r&&(t.innerHTML=n[10])},d:function(n){n&&(0,rf.YoD)(t)}}}function Hk(n){var t,r,i,e,o,c,a,f,s,l,h,v=n[3]&&Lk(n),d=n[6]&&!n[3]&&zk(n);return{c:function(){t=(0,rf.ND4)("div"),v&&v.c(),r=(0,rf.xem)(),d&&d.c(),i=(0,rf.xem)(),e=(0,rf.ND4)("div"),o=(0,rf.ND4)("a"),c=(0,rf.ND4)("i"),a=(0,rf.xem)(),(f=(0,rf.ND4)("div")).innerHTML="<div></div> <div></div> <div></div> <div></div> <div></div> <div></div>",(0,rf.CFu)(c,"class","icons-chat icons-chat_expand"),(0,rf.CFu)(o,"href",n[7]),(0,rf.CFu)(o,"class","chat-widget__expand"),(0,rf.CFu)(o,"target","_blank"),(0,rf.CFu)(o,"title",u("expandWindow")),(0,rf.CFu)(e,"class","chat-widget__footer"),(0,rf.CFu)(f,"class","chat-widget__resize-grip"),(0,rf.CFu)(t,"class","chat-widget"),(0,rf.CFu)(t,"id","chatsWidget"),(0,rf.hgi)(t,"width",n[0]+"px"),(0,rf.hgi)(t,"height",n[1]+"px"),(0,rf.hgi)(t,"top",n[2]+"px"),(0,rf.hgi)(t,"display",n[8]?"block":"none")},m:function(u,b){(0,rf.Yry)(u,t,b),v&&v.m(t,null),(0,rf.BCw)(t,r),d&&d.m(t,null),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(e,o),(0,rf.BCw)(o,c),(0,rf.BCw)(t,a),(0,rf.BCw)(t,f),n[15](t),s=!0,l||(h=(0,rf.KTR)(f,"mousedown",n[11]),l=!0)},p:function(n,e){var u=this,c=Dk(e,1)[0];n[3]?v?v.p(n,c):((v=Lk(n)).c(),v.m(t,r)):v&&(v.d(1),v=null),n[6]&&!n[3]?d?(d.p(n,c),72&c&&(0,rf.c7F)(d,1)):((d=zk(n)).c(),(0,rf.c7F)(d,1),d.m(t,i)):d&&((0,rf.V44)(),(0,rf.Tn8)(d,1,1,function(){Gk(this,u),d=null}.bind(this)),(0,rf.GYV)()),(!s||128&c)&&(0,rf.CFu)(o,"href",n[7]),(!s||1&c)&&(0,rf.hgi)(t,"width",n[0]+"px"),(!s||2&c)&&(0,rf.hgi)(t,"height",n[1]+"px"),(!s||4&c)&&(0,rf.hgi)(t,"top",n[2]+"px"),(!s||256&c)&&(0,rf.hgi)(t,"display",n[8]?"block":"none")},i:function(n){s||((0,rf.c7F)(d),s=!0)},o:function(n){(0,rf.Tn8)(d),s=!1},d:function(r){r&&(0,rf.YoD)(t),v&&v.d(),d&&d.d(),n[15](null),l=!1,h()}}}function Jk(n,t,r){var i,o,u,c,a,f=this,s=rf.lQ1,l=function(){var n=this;return Gk(this,f),s(),s=(0,rf.B1Y)(m,function(t){return Gk(this,n),r(8,u=t)}.bind(this)),m}.bind(this);(0,rf.j0C)(n,Po,function(n){return Gk(this,f),r(13,o=n)}.bind(this)),(0,rf.j0C)(n,Ft,function(n){return Gk(this,f),r(9,c=n)}.bind(this)),(0,rf.j0C)(n,qt,function(n){return Gk(this,f),r(10,a=n)}.bind(this)),n.$$.on_destroy.push(function(){return Gk(this,f),s()}.bind(this));var h,v=t.width,d=t.height,b=t.top,p=t.errorText,m=t.showed;l();var w=!1;function g(n){n.preventDefault&&n.preventDefault(),n.clientX>0&&r(0,v=Math.max(320,h.offsetLeft+h.offsetWidth-n.clientX)),n.clientY-document.body.offsetTop<window.innerHeight&&r(1,d=Math.max(400,n.clientY-h.offsetTop))}function j(n){n.preventDefault&&n.preventDefault(),window.removeEventListener("mousemove",g,!1),window.removeEventListener("mouseup",j,!1),0!==v&&0!==d&&tf(v,d)}(0,cf.Rc)(function(){var n=this;Gk(this,f),Ak()["catch"](function(t){Gk(this,n),y.error(e._,t)}.bind(this))["finally"](function(){Gk(this,n),r(6,w=!0)}.bind(this))}.bind(this));var _=function(){Gk(this,f),qt.set(undefined)}.bind(this);return n.$$set=function(n){Gk(this,f),"width"in n&&r(0,v=n.width),"height"in n&&r(1,d=n.height),"top"in n&&r(2,b=n.top),"errorText"in n&&r(3,p=n.errorText),"showed"in n&&l(r(4,m=n.showed))}.bind(this),n.$$.update=function(){Gk(this,f),8192&n.$$.dirty&&r(7,i=hr(o)||"/".concat(or,"/users/").concat(Qt,"/messages"))}.bind(this),[v,d,b,p,m,h,w,i,u,c,a,function(n){n.preventDefault&&n.preventDefault(),window.addEventListener("mousemove",g,!1),window.addEventListener("mouseup",j,!1)},function(){var n=this;(0,cf.io)().then(function(){Gk(this,n),h.scrollIntoView(!1)}.bind(this))},o,_,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){Gk(this,t),r(5,h=n)}.bind(this))}]}var Qk=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Uk(this,t),(0,rf.TsN)(r,n,Jk,Hk,rf.jXN,{width:0,height:1,top:2,errorText:3,showed:4,scrollIntoView:12}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&Nk(n,t)}(t,n),function(n,t,r){return t&&Mk(n.prototype,t),r&&Mk(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t,[{key:"scrollIntoView",get:function(){return this.$$.ctx[12]}}])}(rf.r7T);const Vk=Qk;function Yk(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var Zk,Kk,nC,tC,rC,iC,eC=6e4,oC=(0,Ot.T5)(!1),uC=(0,Ot.T5)(!1);function cC(){va(),Kk&&Kk.classList.remove("link-notify_opened"),nC&&(nC.removeEventListener("click",fC),nC.classList.remove("link-notify_opened-mobile")),oC.set(!1)}function aC(){var n=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return new Promise(function(r){var i=this;Yk(this,n),function(){var n=this;if(iC!==undefined)return iC;return iC=new Promise(function(t){var r=this;Yk(this,n),function(){var n=this;return new Promise(function(t){var r=this;Ka(this,n),Be("chat").then(function(n){Ka(this,r);try{var t=JSON.parse(n);return nf&&"object"===Za(nf)?t:(Ne("chat","{}"),undefined)}catch(i){y.error(e.S,i),Ne("chat","{}")}return undefined}.bind(this)).then(function(n){if(Ka(this,r),nf.width=(null==n?void 0:n.width)||400,null==n?void 0:n.height)nf.height=n.height||354;else{var i=window.innerHeight;nf.height=Math.max(i/2-(i/2%54-30)|0,354)}t(nf)}.bind(this))["catch"](function(n){Ka(this,r),y.error(e.S,n),Ne("chat","{}"),t(nf)}.bind(this))}.bind(this))}().then(function(n){Yk(this,r);var i=n.height||0,e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,o=40,u=document.body.querySelector(".cover .head");u instanceof HTMLElement&&(e-=u.clientHeight,o+=window.scrollY+u.getBoundingClientRect().y),i>e&&(i=e),tC=new Vk({target:document.body,props:{width:n.width,height:i,top:o,errorText:Zk,showed:oC}}),t()}.bind(this))}.bind(this)),iC}().then(function(){Yk(this,i),oC.set(!0),Kk&&Kk.classList.add("link-notify_opened"),nC&&(nC.addEventListener("click",fC),nC.classList.add("link-notify_opened-mobile")),t&&tC.scrollIntoView(),r()}.bind(this))}.bind(this))}function fC(){var n=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;n&&n.preventDefault&&n.preventDefault(),(0,Ot.Jt)(oC)?cC():aC()}function sC(){Kk&&(Kk.onclick=fC,Kk.classList.remove("link-notify_loading")),Ve(),ma(),window.HotKeys.Add(27,function(){Yc()||fa()||cC()}),window.HotKeys.Add(113,function(){fC()})}function lC(){var n=this;return new Promise(function(t,r){Yk(this,n),function i(){var n=this;if("visible"!==document.visibilityState)return void(rC=setTimeout(i,eC));clearTimeout(rC),Ya().then(function(){Yk(this,n),sC(),t()}.bind(this))["catch"](function(t){Yk(this,n),Zk=t.message,r(t)}.bind(this))}()}.bind(this))}function hC(){var n=this,t=arguments.length>0&&arguments[0]!==undefined&&arguments[0];return new Promise(function(r,i){var o=this;Yk(this,n),Kk=document.getElementById("notifyMessages"),nC=document.getElementById("notifyMessagesMobile"),function(){var n=this;Be("mql5_chats_unread").then(function(t){He(this,n);var r=parseInt(t,10)||0;Je.set(r)}.bind(this))["catch"](function(t){He(this,n),y.error(e.S,t,"Unread")}.bind(this))}(),Be("mql5_chats_connect").then(function(n){var e=this;Yk(this,o);var u=parseInt(n,10)||0,c=(new Date).getTime()-u;if(!u||c>eC||t||(0,Ot.Jt)(uC))lC().then(r)["catch"](i);else{rC=setTimeout(function(){Yk(this,e),lC().then(r)["catch"](i)}.bind(this),eC-c);var a=uC.subscribe(function(n){Yk(this,e),n&&(a(),lC().then(r)["catch"](i))}.bind(this));Kk&&(Kk.onclick=function(n){var t=this;n.preventDefault(),null==Kk||Kk.classList.add("link-notify_loading"),lC().then(function(){Yk(this,t),r()}.bind(this))["catch"](function(n){Yk(this,t),i(n)}.bind(this))["finally"](function(){Yk(this,t),aC()}.bind(this))})}}.bind(this))["catch"](function(n){Yk(this,o),y.error(e.S,n)}.bind(this))}.bind(this))}function vC(n,t){var r=this;if(ur&&Zt)window.doPost(null,"/".concat(or,"/users/").concat(Qt,"/messages"),null,{user:n});else if(Zt?aC(!0).then(function(){!function(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}(this,r),ja(t)}.bind(this)):ja(t),window.history){var i=window.location,e=i.origin+i.pathname;window.history.pushState({},document.title,e)}}function dC(n){return dC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},dC(n)}function bC(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,yC(i.key),i)}}function yC(n){var t=function(n,t){if("object"!=dC(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=dC(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==dC(t)?t:t+""}function pC(n,t,r){return t=wC(t),function(n,t){if(t&&("object"==dC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,mC()?Reflect.construct(t,r||[],wC(n).constructor):t.apply(n,r))}function mC(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(mC=function(){return!!n})()}function wC(n){return wC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},wC(n)}function gC(n,t){return gC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},gC(n,t)}function jC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function _C(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return SC(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?SC(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SC(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function OC(n){var t;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.CFu)(t,"title",u("verified")),(0,rf.CFu)(t,"class","chat-search-result__verified"),(0,rf.mq_)(t.src,"https://c.mql5.com/i/chat/verified.svg")||(0,rf.CFu)(t,"src","https://c.mql5.com/i/chat/verified.svg"),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"width","16"),(0,rf.CFu)(t,"height","16")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function EC(n){var t,r,i,e,o,u,c,a,f,s,l=n[0].name+"";i=new KS({props:{data:n[0],size:TC}});var h=n[0].isVerified&&OC();return{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.ND4)("span"),(0,rf.N0i)(i.$$.fragment),e=(0,rf.xem)(),o=(0,rf.ND4)("span"),u=(0,rf.Qq7)(l),c=(0,rf.xem)(),h&&h.c(),(0,rf.CFu)(r,"class","chat-search-result__avatar"),(0,rf.CFu)(o,"class","chat-search-result__name"),(0,rf.CFu)(t,"class","chat-search-result"),(0,rf.CFu)(t,"href",n[1])},m:function(l,v){(0,rf.Yry)(l,t,v),(0,rf.BCw)(t,r),(0,rf.wSR)(i,r,null),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(o,u),(0,rf.BCw)(t,c),h&&h.m(t,null),a=!0,f||(s=[(0,rf.KTR)(t,"click",(0,rf.xZN)(n[2])),(0,rf.KTR)(t,"click",n[3])],f=!0)},p:function(n,r){var e=_C(r,1)[0],o={};1&e&&(o.data=n[0]),i.$set(o),(!a||1&e)&&l!==(l=n[0].name+"")&&(0,rf.iQh)(u,l),n[0].isVerified?h||((h=OC()).c(),h.m(t,null)):h&&(h.d(1),h=null),(!a||2&e)&&(0,rf.CFu)(t,"href",n[1])},i:function(n){a||((0,rf.c7F)(i.$$.fragment,n),a=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),a=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(i),h&&h.d(),f=!1,(0,rf.oOW)(s)}}}var TC=25;function kC(n,t,r){var i,e=this,o=t.chat;return n.$$set=function(n){jC(this,e),"chat"in n&&r(0,o=n.chat)}.bind(this),n.$$.update=function(){jC(this,e),1&n.$$.dirty&&r(1,i=hr(o))}.bind(this),[o,i,function(){Sa(o.chatId)},function(t){rf.Tq.call(this,n,t)}]}var CC=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=pC(this,t),(0,rf.TsN)(r,n,kC,EC,rf.jXN,{chat:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&gC(n,t)}(t,n),function(n,t,r){return t&&bC(n.prototype,t),r&&bC(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const xC=CC;function AC(n){return AC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},AC(n)}function IC(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,MC(i.key),i)}}function MC(n){var t=function(n,t){if("object"!=AC(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=AC(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==AC(t)?t:t+""}function RC(n,t,r){return t=PC(t),function(n,t){if(t&&("object"==AC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,UC()?Reflect.construct(t,r||[],PC(n).constructor):t.apply(n,r))}function UC(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(UC=function(){return!!n})()}function PC(n){return PC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},PC(n)}function BC(n,t){return BC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},BC(n,t)}function NC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function DC(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return $C(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$C(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $C(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function GC(n){var t,r,i,e,o,u,c,a,f,s=n[0].userName+"";return i=new jh({props:{data:n[0],size:LC}}),{c:function(){t=(0,rf.ND4)("a"),r=(0,rf.ND4)("span"),(0,rf.N0i)(i.$$.fragment),e=(0,rf.xem)(),o=(0,rf.ND4)("span"),u=(0,rf.Qq7)(s),(0,rf.CFu)(r,"class","chat-search-result__avatar"),(0,rf.CFu)(o,"class","chat-search-result__name"),(0,rf.CFu)(t,"class","chat-search-result"),(0,rf.CFu)(t,"href",n[1])},m:function(s,l){(0,rf.Yry)(s,t,l),(0,rf.BCw)(t,r),(0,rf.wSR)(i,r,null),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(o,u),c=!0,a||(f=[(0,rf.KTR)(t,"click",(0,rf.xZN)(n[2])),(0,rf.KTR)(t,"click",n[3])],a=!0)},p:function(n,r){var e=DC(r,1)[0],o={};1&e&&(o.data=n[0]),i.$set(o),(!c||1&e)&&s!==(s=n[0].userName+"")&&(0,rf.iQh)(u,s),(!c||2&e)&&(0,rf.CFu)(t,"href",n[1])},i:function(n){c||((0,rf.c7F)(i.$$.fragment,n),c=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),c=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(i),a=!1,(0,rf.oOW)(f)}}}var LC=25;function zC(n,t,r){var i,e=this,o=t.user;return n.$$set=function(n){NC(this,e),"user"in n&&r(0,o=n.user)}.bind(this),n.$$.update=function(){NC(this,e),1&n.$$.dirty&&r(1,i="/".concat(or,"/users/").concat((o.userLogin||"").toLowerCase()))}.bind(this),[o,i,function(){o.userId&&ja(o.userId,undefined)},function(t){rf.Tq.call(this,n,t)}]}var FC=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=RC(this,t),(0,rf.TsN)(r,n,zC,GC,rf.jXN,{user:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&BC(n,t)}(t,n),function(n,t,r){return t&&IC(n.prototype,t),r&&IC(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const WC=FC;function qC(n){return qC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},qC(n)}var XC=undefined;function HC(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,JC(i.key),i)}}function JC(n){var t=function(n,t){if("object"!=qC(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=qC(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==qC(t)?t:t+""}function QC(n,t,r){return t=YC(t),function(n,t){if(t&&("object"==qC(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,VC()?Reflect.construct(t,r||[],YC(n).constructor):t.apply(n,r))}function VC(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(VC=function(){return!!n})()}function YC(n){return YC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},YC(n)}function ZC(n,t){return ZC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},ZC(n,t)}function KC(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function nx(n,t,r){var i=n.slice();return i[30]=t[r],i}function tx(n,t,r){var i=n.slice();return i[30]=t[r],i}function rx(n,t,r){var i=n.slice();return i[30]=t[r],i}function ix(n,t,r){var i=n.slice();return i[25]=t[r],i}function ex(n,t,r){var i=n.slice();return i[25]=t[r],i}function ox(n,t,r){var i=n.slice();return i[30]=t[r],i}function ux(n){var t,r,i,e,o=[ax,cx],u=[];function c(n,t){return n[16]?0:1}return r=c(n),i=u[r]=o[r](n),{c:function(){t=(0,rf.ND4)("div"),i.c(),(0,rf.CFu)(t,"class","chat-search-panel__result")},m:function(n,i){(0,rf.Yry)(n,t,i),u[r].m(t,null),e=!0},p:function(n,e){var a=this,f=r;(r=c(n))===f?u[r].p(n,e):((0,rf.V44)(),(0,rf.Tn8)(u[f],1,1,function(){KC(this,a),u[f]=null}.bind(this)),(0,rf.GYV)(),(i=u[r])?i.p(n,e):(i=u[r]=o[r](n)).c(),(0,rf.c7F)(i,1),i.m(t,null))},i:function(n){e||((0,rf.c7F)(i),e=!0)},o:function(n){(0,rf.Tn8)(i),e=!1},d:function(n){n&&(0,rf.YoD)(t),u[r].d()}}}function cx(n){var t,r,i,e,o,u,c,a=(n[10]||n[11])&&fx(n),f=n[15]&&sx(n),s=[hx,lx],l=[];function h(n,t){return"users"===n[8]?0:1}return e=h(n),o=l[e]=s[e](n),{c:function(){t=(0,rf.ND4)("div"),a&&a.c(),r=(0,rf.xem)(),f&&f.c(),i=(0,rf.xem)(),o.c(),u=(0,rf.Iex)(),(0,rf.CFu)(t,"class","chat-search-panel__tabs")},m:function(n,o){(0,rf.Yry)(n,t,o),a&&a.m(t,null),(0,rf.BCw)(t,r),f&&f.m(t,null),(0,rf.Yry)(n,i,o),l[e].m(n,o),(0,rf.Yry)(n,u,o),c=!0},p:function(n,i){var c=this;n[10]||n[11]?a?a.p(n,i):((a=fx(n)).c(),a.m(t,r)):a&&(a.d(1),a=null),n[15]?f?f.p(n,i):((f=sx(n)).c(),f.m(t,null)):f&&(f.d(1),f=null);var v=e;(e=h(n))===v?l[e].p(n,i):((0,rf.V44)(),(0,rf.Tn8)(l[v],1,1,function(){KC(this,c),l[v]=null}.bind(this)),(0,rf.GYV)(),(o=l[e])?o.p(n,i):(o=l[e]=s[e](n)).c(),(0,rf.c7F)(o,1),o.m(u.parentNode,u))},i:function(n){c||((0,rf.c7F)(o),c=!0)},o:function(n){(0,rf.Tn8)(o),c=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(i),(0,rf.YoD)(u)),a&&a.d(),f&&f.d(),l[e].d(n)}}}function ax(n){var t,r;return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("foundEmpty")),(0,rf.CFu)(r,"class","chat-search-panel__empty-result"),(0,rf.CFu)(t,"class","chat-search-panel__errors")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:rf.lQ1,i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function fx(n){var t,r,i,e,o,c=u("users")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(c),(0,rf.CFu)(t,"class",i="chat-search-panel__tab"+("users"===n[8]?" chat-search-panel__tab_active":""))},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),e||(o=[(0,rf.KTR)(t,"keyup",kx),(0,rf.KTR)(t,"click",n[22])],e=!0)},p:function(n,r){256&r[0]&&i!==(i="chat-search-panel__tab"+("users"===n[8]?" chat-search-panel__tab_active":""))&&(0,rf.CFu)(t,"class",i)},d:function(n){n&&(0,rf.YoD)(t),e=!1,(0,rf.oOW)(o)}}}function sx(n){var t,r,i,e,o,c=u("chats")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(c),(0,rf.CFu)(t,"class",i="chat-search-panel__tab"+("chats"===n[8]?" chat-search-panel__tab_active":""))},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),e||(o=[(0,rf.KTR)(t,"keyup",Cx),(0,rf.KTR)(t,"click",n[23])],e=!0)},p:function(n,r){256&r[0]&&i!==(i="chat-search-panel__tab"+("chats"===n[8]?" chat-search-panel__tab_active":""))&&(0,rf.CFu)(t,"class",i)},d:function(n){n&&(0,rf.YoD)(t),e=!1,(0,rf.oOW)(o)}}}function lx(n){var t,r,i,e,o=n[14]&&vx(n),u=n[12]&&bx(n),c=n[13]&&px(n);return{c:function(){t=(0,rf.ND4)("div"),o&&o.c(),r=(0,rf.xem)(),u&&u.c(),i=(0,rf.xem)(),c&&c.c(),(0,rf.CFu)(t,"class","chat-search-panel__tab-content")},m:function(n,a){(0,rf.Yry)(n,t,a),o&&o.m(t,null),(0,rf.BCw)(t,r),u&&u.m(t,null),(0,rf.BCw)(t,i),c&&c.m(t,null),e=!0},p:function(n,e){var a=this;n[14]?o?(o.p(n,e),16384&e[0]&&(0,rf.c7F)(o,1)):((o=vx(n)).c(),(0,rf.c7F)(o,1),o.m(t,r)):o&&((0,rf.V44)(),(0,rf.Tn8)(o,1,1,function(){KC(this,a),o=null}.bind(this)),(0,rf.GYV)()),n[12]?u?(u.p(n,e),4096&e[0]&&(0,rf.c7F)(u,1)):((u=bx(n)).c(),(0,rf.c7F)(u,1),u.m(t,i)):u&&((0,rf.V44)(),(0,rf.Tn8)(u,1,1,function(){KC(this,a),u=null}.bind(this)),(0,rf.GYV)()),n[13]?c?(c.p(n,e),8192&e[0]&&(0,rf.c7F)(c,1)):((c=px(n)).c(),(0,rf.c7F)(c,1),c.m(t,null)):c&&((0,rf.V44)(),(0,rf.Tn8)(c,1,1,function(){KC(this,a),c=null}.bind(this)),(0,rf.GYV)())},i:function(n){e||((0,rf.c7F)(o),(0,rf.c7F)(u),(0,rf.c7F)(c),e=!0)},o:function(n){(0,rf.Tn8)(o),(0,rf.Tn8)(u),(0,rf.Tn8)(c),e=!1},d:function(n){n&&(0,rf.YoD)(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function hx(n){var t,r,i,e,o=n[11]&&wx(n),u=n[9]&&jx(n),c=n[10]&&Sx(n);return{c:function(){t=(0,rf.ND4)("div"),o&&o.c(),r=(0,rf.xem)(),u&&u.c(),i=(0,rf.xem)(),c&&c.c(),(0,rf.CFu)(t,"class","chat-search-panel__tab-content")},m:function(n,a){(0,rf.Yry)(n,t,a),o&&o.m(t,null),(0,rf.BCw)(t,r),u&&u.m(t,null),(0,rf.BCw)(t,i),c&&c.m(t,null),e=!0},p:function(n,e){var a=this;n[11]?o?(o.p(n,e),2048&e[0]&&(0,rf.c7F)(o,1)):((o=wx(n)).c(),(0,rf.c7F)(o,1),o.m(t,r)):o&&((0,rf.V44)(),(0,rf.Tn8)(o,1,1,function(){KC(this,a),o=null}.bind(this)),(0,rf.GYV)()),n[9]?u?(u.p(n,e),512&e[0]&&(0,rf.c7F)(u,1)):((u=jx(n)).c(),(0,rf.c7F)(u,1),u.m(t,i)):u&&((0,rf.V44)(),(0,rf.Tn8)(u,1,1,function(){KC(this,a),u=null}.bind(this)),(0,rf.GYV)()),n[10]?c?(c.p(n,e),1024&e[0]&&(0,rf.c7F)(c,1)):((c=Sx(n)).c(),(0,rf.c7F)(c,1),c.m(t,null)):c&&((0,rf.V44)(),(0,rf.Tn8)(c,1,1,function(){KC(this,a),c=null}.bind(this)),(0,rf.GYV)())},i:function(n){e||((0,rf.c7F)(o),(0,rf.c7F)(u),(0,rf.c7F)(c),e=!0)},o:function(n){(0,rf.Tn8)(o),(0,rf.Tn8)(u),(0,rf.Tn8)(c),e=!1},d:function(n){n&&(0,rf.YoD)(t),o&&o.d(),u&&u.d(),c&&c.d()}}}function vx(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[7]),s=function(n){return KC(this,o),n[30].chatId}.bind(this),l=0;l<f.length;l+=1){var h=rx(n,f,l),v=s(h);a.set(v,c[l]=dx(v,h))}return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("subscribed"),":"),i=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();(0,rf.CFu)(r,"class","chat-search-panel__title"),(0,rf.CFu)(t,"class","chat-search-panel__subscribed")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);e=!0},p:function(n,r){131200&r[0]&&(f=(0,rf.rv_)(n[7]),(0,rf.V44)(),c=(0,rf.l7s)(c,r,s,1,n,f,a,t,rf.XP4,dx,null,rx),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function dx(n,t){var r,i,e;return(i=new xC({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};128&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function bx(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[4]),s=function(n){return KC(this,o),n[30].chatId}.bind(this),l=0;l<f.length;l+=1){var h=tx(n,f,l),v=s(h);a.set(v,c[l]=yx(v,h))}return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("channels"),":"),i=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();(0,rf.CFu)(r,"class","chat-search-panel__title"),(0,rf.CFu)(t,"class","chat-search-panel__channels")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);e=!0},p:function(n,r){131088&r[0]&&(f=(0,rf.rv_)(n[4]),(0,rf.V44)(),c=(0,rf.l7s)(c,r,s,1,n,f,a,t,rf.XP4,yx,null,tx),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function yx(n,t){var r,i,e;return(i=new xC({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};16&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function px(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[5]),s=function(n){return KC(this,o),n[30].chatId}.bind(this),l=0;l<f.length;l+=1){var h=nx(n,f,l),v=s(h);a.set(v,c[l]=mx(v,h))}return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("groupChats"),":"),i=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();(0,rf.CFu)(r,"class","chat-search-panel__title"),(0,rf.CFu)(t,"class","chat-search-panel__group")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);e=!0},p:function(n,r){131104&r[0]&&(f=(0,rf.rv_)(n[5]),(0,rf.V44)(),c=(0,rf.l7s)(c,r,s,1,n,f,a,t,rf.XP4,mx,null,nx),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function mx(n,t){var r,i,e;return(i=new xC({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};32&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function wx(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[6]),s=function(n){return KC(this,o),n[30].chatId}.bind(this),l=0;l<f.length;l+=1){var h=ox(n,f,l),v=s(h);a.set(v,c[l]=gx(v,h))}return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("privateChats"),":"),i=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();(0,rf.CFu)(r,"class","chat-search-panel__title"),(0,rf.CFu)(t,"class","chat-search-panel__private")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);e=!0},p:function(n,r){131136&r[0]&&(f=(0,rf.rv_)(n[6]),(0,rf.V44)(),c=(0,rf.l7s)(c,r,s,1,n,f,a,t,rf.XP4,gx,null,ox),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function gx(n,t){var r,i,e;return(i=new xC({props:{chat:t[30]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};64&r[0]&&(e.chat=t[30]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function jx(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[2]),s=function(n){return KC(this,o),n[25].userId}.bind(this),l=0;l<f.length;l+=1){var h=ex(n,f,l),v=s(h);a.set(v,c[l]=_x(v,h))}return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("friends"),":"),i=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();(0,rf.CFu)(r,"class","chat-search-panel__title"),(0,rf.CFu)(t,"class","chat-search-panel__friends")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);e=!0},p:function(n,r){131076&r[0]&&(f=(0,rf.rv_)(n[2]),(0,rf.V44)(),c=(0,rf.l7s)(c,r,s,1,n,f,a,t,rf.XP4,_x,null,ex),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function _x(n,t){var r,i,e;return(i=new WC({props:{user:t[25]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};4&r[0]&&(e.user=t[25]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function Sx(n){for(var t,r,i,e,o=this,c=[],a=new Map,f=(0,rf.rv_)(n[3]),s=function(n){return KC(this,o),n[25].userId}.bind(this),l=0;l<f.length;l+=1){var h=ix(n,f,l),v=s(h);a.set(v,c[l]=Ox(v,h))}return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("div")).textContent="".concat(u("mql5Members"),":"),i=(0,rf.xem)();for(var n=0;n<c.length;n+=1)c[n].c();(0,rf.CFu)(r,"class","chat-search-panel__title"),(0,rf.CFu)(t,"class","chat-search-panel__users")},m:function(n,o){(0,rf.Yry)(n,t,o),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i);for(var u=0;u<c.length;u+=1)c[u]&&c[u].m(t,null);e=!0},p:function(n,r){131080&r[0]&&(f=(0,rf.rv_)(n[3]),(0,rf.V44)(),c=(0,rf.l7s)(c,r,s,1,n,f,a,t,rf.XP4,Ox,null,ix),(0,rf.GYV)())},i:function(n){if(!e){for(var t=0;t<f.length;t+=1)(0,rf.c7F)(c[t]);e=!0}},o:function(n){for(var t=0;t<c.length;t+=1)(0,rf.Tn8)(c[t]);e=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<c.length;r+=1)c[r].d()}}}function Ox(n,t){var r,i,e;return(i=new WC({props:{user:t[25]}})).$on("click",t[17]),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};8&r[0]&&(e.user=t[25]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function Ex(n){var t,r,i,e,o,c,a,f,s,l,h=n[1]&&ux(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("input"),e=(0,rf.ND4)("i"),o=(0,rf.xem)(),(c=(0,rf.ND4)("div")).innerHTML='<i class="icons-chat icons-chat_close"></i><i class="icons-chat icons-chat_close-active"></i>',a=(0,rf.xem)(),h&&h.c(),(0,rf.CFu)(i,"class","input"),(0,rf.Xrn)(i,"text"),(0,rf.CFu)(i,"placeholder",u("searchUserPlaceholder")),(0,rf.CFu)(e,"class","icons-chat icons-chat_search"),(0,rf.CFu)(c,"title",u("close")),(0,rf.CFu)(c,"class","chat-search-panel__close"),(0,rf.CFu)(r,"class","chat-search-panel ui"),(0,rf.CFu)(t,"class","chat-search-panel__container")},m:function(u,v){(0,rf.Yry)(u,t,v),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),n[19](i),(0,rf.Gvd)(i,n[1]),(0,rf.BCw)(r,e),(0,rf.BCw)(r,o),(0,rf.BCw)(r,c),(0,rf.BCw)(t,a),h&&h.m(t,null),f=!0,s||(l=[(0,rf.KTR)(i,"input",n[20]),(0,rf.KTR)(i,"blur",n[21]),(0,rf.KTR)(c,"keyup",Tx),(0,rf.KTR)(c,"click",n[17])],s=!0)},p:function(n,r){var e=this;2&r[0]&&i.value!==n[1]&&(0,rf.Gvd)(i,n[1]),n[1]?h?(h.p(n,r),2&r[0]&&(0,rf.c7F)(h,1)):((h=ux(n)).c(),(0,rf.c7F)(h,1),h.m(t,null)):h&&((0,rf.V44)(),(0,rf.Tn8)(h,1,1,function(){KC(this,e),h=null}.bind(this)),(0,rf.GYV)())},i:function(n){f||((0,rf.c7F)(h),f=!0)},o:function(n){(0,rf.Tn8)(h),f=!1},d:function(r){r&&(0,rf.YoD)(t),n[19](null),h&&h.d(),s=!1,(0,rf.oOW)(l)}}}var Tx=function(){KC(this,XC)}.bind(undefined),kx=function(){KC(this,XC)}.bind(undefined),Cx=function(){KC(this,XC)}.bind(undefined);function xx(n,t,r){var i,o,u=this;(0,rf.j0C)(n,Ft,function(n){return KC(this,u),r(18,i=n)}.bind(this));var c="",a=[],f=[],s=[],l=[],h=[],v=[],d="users",b=!1,p=!1,m=!1,w=!1,g=!1,j=!1,_=!1,S=!1,O=qe(function(n){var t=this;KC(this,u),ue(n,20).then(function(n){KC(this,t),r(3,f=n)}.bind(this))["catch"](function(n){KC(this,t),r(3,f=[]),y.error(e.USER,n)}.bind(this)),gi(n,20).then(function(n){KC(this,t),r(4,s=n.chats?n.chats:[])}.bind(this))["catch"](function(n){KC(this,t),r(4,s=[]),y.error(e.USER,n)}.bind(this)),gi(n,20,!0).then(function(n){KC(this,t),r(5,l=n.chats?n.chats:[])}.bind(this))["catch"](function(n){KC(this,t),r(5,l=[]),y.error(e.USER,n)}.bind(this)),function(n,t){var r=this;return new Promise(function(i){var e=this;$l(this,r),n=n.toLowerCase();var o,u=[],c=zl(),a=(0,Ot.Jt)(c);if(a.length)u=Fl(n,t,a),i(u);else var f=c.subscribe(function(r){var c=this;$l(this,e),clearTimeout(o),r.length>0?(u=Fl(n,t,r),i(u),f&&f()):o=setTimeout(function(){$l(this,c),i(u),f&&f()}.bind(this),5e3)}.bind(this))}.bind(this))}(n,20).then(function(n){KC(this,t),r(2,a=n)}.bind(this))}.bind(this),300);function E(){(0,rf.vu6)(Ft,i.search=!1,i)}var T=function(){KC(this,u),c||E()}.bind(this),k=function(){KC(this,u),r(8,d="users")}.bind(this),C=function(){KC(this,u),r(8,d="chats")}.bind(this);return n.$$.update=function(){KC(this,u),2&n.$$.dirty[0]&&(c.length>2?O(c):(r(2,a=[]),r(3,f=[]),r(4,s=[]),r(5,l=[]),r(6,h=[]),r(7,v=[]))),65276&n.$$.dirty[0]&&(r(9,b=!!a.length),r(10,p=!!f.length),r(11,m=!!h.length),r(12,w=!!s.length),r(13,g=!!l.length),r(14,j=!!v.length),r(15,_=w||g||j),r(16,S=!(b||p||m||_))),36608&n.$$.dirty[0]&&(b||p||m||"users"!==d?_||"chats"!==d||r(8,d="users"):r(8,d="chats")),262145&n.$$.dirty[0]&&i.search&&o&&o.focus()}.bind(this),[o,c,a,f,s,l,h,v,d,b,p,m,w,g,j,_,S,E,i,function(n){var t=this;rf.Dnk[n?"unshift":"push"](function(){KC(this,t),r(0,o=n)}.bind(this))},function(){c=this.value,r(1,c)},T,k,C]}var Ax=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=QC(this,t),(0,rf.TsN)(r,n,xx,Ex,rf.jXN,{},null,[-1,-1]),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&ZC(n,t)}(t,n),function(n,t,r){return t&&HC(n.prototype,t),r&&HC(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Ix=Ax;function Mx(n){return Mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Mx(n)}var Rx=undefined;function Ux(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Px(i.key),i)}}function Px(n){var t=function(n,t){if("object"!=Mx(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Mx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Mx(t)?t:t+""}function Bx(n,t,r){return t=Dx(t),function(n,t){if(t&&("object"==Mx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,Nx()?Reflect.construct(t,r||[],Dx(n).constructor):t.apply(n,r))}function Nx(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(Nx=function(){return!!n})()}function Dx(n){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dx(n)}function $x(n,t){return $x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},$x(n,t)}function Gx(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function Lx(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return zx(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zx(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zx(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function Fx(n,t,r){var i=n.slice();return i[7]=t[r],i}function Wx(n){var t,r,i,e,o,c,a,f,s=u(n[7].key)+"";function l(){return n[3](n[7])}return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=(0,rf.xem)(),e=(0,rf.Qq7)(s),o=(0,rf.xem)(),(0,rf.CFu)(r,"class","icons-chat icons-chat_"+n[7].icon),(0,rf.CFu)(t,"class",c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))},m:function(n,u){(0,rf.Yry)(n,t,u),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),a||(f=[(0,rf.KTR)(t,"keyup",Xx),(0,rf.KTR)(t,"click",l)],a=!0)},p:function(r,i){n=r,1&i&&c!==(c="chat-tabs__item"+(n[0].type===n[7].type?" chat-tabs__item_active":""))&&(0,rf.CFu)(t,"class",c)},d:function(n){n&&(0,rf.YoD)(t),a=!1,(0,rf.oOW)(f)}}}function qx(n){for(var t,r,i,e,o,u,c=(0,rf.rv_)(n[1]),a=[],f=0;f<c.length;f+=1)a[f]=Wx(Fx(n,c,f));return(o=new Bp({props:{chat:n[0]}})).$on("close",n[4]),o.$on("submit",n[5]),{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div");for(var n=0;n<a.length;n+=1)a[n].c();i=(0,rf.xem)(),e=(0,rf.ND4)("div"),(0,rf.N0i)(o.$$.fragment),(0,rf.CFu)(r,"class","chat-tabs__list"),(0,rf.CFu)(e,"class","chat-tabs__content"),(0,rf.CFu)(t,"class","chat-tabs chat-tabs_create")},m:function(n,c){(0,rf.Yry)(n,t,c),(0,rf.BCw)(t,r);for(var f=0;f<a.length;f+=1)a[f]&&a[f].m(r,null);(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.wSR)(o,e,null),u=!0},p:function(n,t){var i=Lx(t,1)[0];if(7&i){var e;for(c=(0,rf.rv_)(n[1]),e=0;e<c.length;e+=1){var u=Fx(n,c,e);a[e]?a[e].p(u,i):(a[e]=Wx(u),a[e].c(),a[e].m(r,null))}for(;e<a.length;e+=1)a[e].d(1);a.length=c.length}var f={};1&i&&(f.chat=n[0]),o.$set(f)},i:function(n){u||((0,rf.c7F)(o.$$.fragment,n),u=!0)},o:function(n){(0,rf.Tn8)(o.$$.fragment,n),u=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(a,n),(0,rf.Hbl)(o)}}}var Xx=function(){Gx(this,Rx)}.bind(undefined);function Hx(n,t,r){var i=this,e=t.chat,o=Object.assign({},e);o.type=e.type===On?En:On;var u=[{type:On,key:"createGroup",icon:"flat-group-chats"},{type:En,key:"createChannel",icon:"flat-channels"}];function c(n){if(n!==e.type){var t=Object.assign({},e);for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&r(0,e[i]=o[i],e);o=t}}var a=function(n){Gx(this,i),c(n.type)}.bind(this);return n.$$set=function(n){Gx(this,i),"chat"in n&&r(0,e=n.chat)}.bind(this),[e,u,c,a,function(t){rf.Tq.call(this,n,t)},function(t){rf.Tq.call(this,n,t)}]}var Jx=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Bx(this,t),(0,rf.TsN)(r,n,Hx,qx,rf.jXN,{chat:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&$x(n,t)}(t,n),function(n,t,r){return t&&Ux(n.prototype,t),r&&Ux(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const Qx=Jx;function Vx(n){return Vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vx(n)}function Yx(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,Zx(i.key),i)}}function Zx(n){var t=function(n,t){if("object"!=Vx(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=Vx(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==Vx(t)?t:t+""}function Kx(n,t,r){return t=tA(t),function(n,t){if(t&&("object"==Vx(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,nA()?Reflect.construct(t,r||[],tA(n).constructor):t.apply(n,r))}function nA(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(nA=function(){return!!n})()}function tA(n){return tA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},tA(n)}function rA(n,t){return rA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},rA(n,t)}function iA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function eA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return oA(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oA(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function uA(n){var t,r,i;return(r=new Qx({props:{chat:n[0]}})).$on("close",n[1]),r.$on("submit",n[2]),{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"slot","content")},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.wSR)(r,t,null),i=!0},p:function(n,t){var i={};1&t&&(i.chat=n[0]),r.$set(i)},i:function(n){i||((0,rf.c7F)(r.$$.fragment,n),i=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),i=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r)}}}function cA(n){var t,r;return(t=new Cs({props:{withTitle:!1,withButtons:!1,$$slots:{content:[uA]},$$scope:{ctx:n}}})).$on("close",n[1]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i=eA(r,1)[0],e={};129&i&&(e.$$scope={dirty:i,ctx:n}),t.$set(e)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function aA(n,t,r){var i,o=this;(0,rf.j0C)(n,Ft,function(n){return iA(this,o),r(4,i=n)}.bind(this));var c=(0,cf.ur)(),a=t.selectedType,f=t.chat,s=void 0===f?{type:a,isPublic:!1,isLimited:!1,name:"",description:"",links:"",inviteLink:"",language:m[or]||m.en,avatar:"",avatarToUpload:undefined,avatarIsPresent:!1,errorInviteLink:undefined,errorName:!1,errorDescription:!1,errorCommon:"",avatarError:undefined}:f,l=function(){iA(this,o),c("close")}.bind(this);function h(n){var t=this;s.type===En?window.fz&&window.fz("event",{name:"MQL5+Chat+Channel+New",unit:"Type",value:s.isPublic?"public":"private"}):s.type===On&&window.fz&&window.fz("event",{name:"MQL5+Chat+Group+New",unit:"Type",value:s.isPublic?"public":"private"}),l(),Sa(n).then(function(){iA(this,t),(0,rf.vu6)(Ft,i.addMembers=!0,i)}.bind(this))}return n.$$set=function(n){iA(this,o),"selectedType"in n&&r(3,a=n.selectedType),"chat"in n&&r(0,s=n.chat)}.bind(this),[s,l,function(){var n=this;r(0,s.errorCommon="",s),Hi(s).then(function(t){var i=this;iA(this,n),s.avatarIsPresent&&s.avatarToUpload?Qi(s.avatarToUpload,t).then(function(){iA(this,i),h(t)}.bind(this))["catch"](function(n){iA(this,i),r(0,s.avatarError=n.message,s),y.error(e.USER,n,"Upload avatar")}.bind(this)):h(t)}.bind(this))["catch"](function(t){iA(this,n),y.error(e.USER,t,"Create chat");var i=t;parseInt(i.name,10)===bn?r(0,s.errorInviteLink=u("inviteLinkExists"),s):r(0,s.errorCommon=i.message,s)}.bind(this))},a]}var fA=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=Kx(this,t),(0,rf.TsN)(r,n,aA,cA,rf.jXN,{selectedType:3,chat:0}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&rA(n,t)}(t,n),function(n,t,r){return t&&Yx(n.prototype,t),r&&Yx(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const sA=fA;function lA(n){return lA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},lA(n)}function hA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,vA(i.key),i)}}function vA(n){var t=function(n,t){if("object"!=lA(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=lA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==lA(t)?t:t+""}function dA(n,t,r){return t=yA(t),function(n,t){if(t&&("object"==lA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,bA()?Reflect.construct(t,r||[],yA(n).constructor):t.apply(n,r))}function bA(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(bA=function(){return!!n})()}function yA(n){return yA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},yA(n)}function pA(n,t){return pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},pA(n,t)}function mA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function wA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return gA(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gA(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function jA(n){var t,r;return(t=new sA({props:{selectedType:n[0]}})).$on("close",n[5]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};1&r&&(i.selectedType=n[0]),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function _A(n){var t,r,i,e,o,c,a,f,s,l,h,v=n[1].create&&jA(n);return{c:function(){t=(0,rf.ND4)("div"),(r=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_search"></i>',i=(0,rf.xem)(),(e=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_add-group-chat"></i>',o=(0,rf.xem)(),(c=(0,rf.ND4)("button")).innerHTML='<i class="icons-chat icons-chat_add-channel"></i>',a=(0,rf.xem)(),v&&v.c(),f=(0,rf.Iex)(),(0,rf.CFu)(r,"class","chat-tools-panel__button"),(0,rf.CFu)(r,"title",u("search")),(0,rf.CFu)(e,"class","chat-tools-panel__button"),(0,rf.CFu)(e,"title",u("createGroup")),(0,rf.CFu)(c,"class","chat-tools-panel__button"),(0,rf.CFu)(c,"title",u("createChannel")),(0,rf.CFu)(t,"class","chat-tools-panel")},m:function(u,d){(0,rf.Yry)(u,t,d),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(t,c),(0,rf.Yry)(u,a,d),v&&v.m(u,d),(0,rf.Yry)(u,f,d),s=!0,l||(h=[(0,rf.KTR)(r,"click",(0,rf.xZN)(n[2])),(0,rf.KTR)(e,"click",(0,rf.xZN)(n[3])),(0,rf.KTR)(c,"click",(0,rf.xZN)(n[4]))],l=!0)},p:function(n,t){var r=this,i=wA(t,1)[0];n[1].create?v?(v.p(n,i),2&i&&(0,rf.c7F)(v,1)):((v=jA(n)).c(),(0,rf.c7F)(v,1),v.m(f.parentNode,f)):v&&((0,rf.V44)(),(0,rf.Tn8)(v,1,1,function(){mA(this,r),v=null}.bind(this)),(0,rf.GYV)())},i:function(n){s||((0,rf.c7F)(v),s=!0)},o:function(n){(0,rf.Tn8)(v),s=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(a),(0,rf.YoD)(f)),v&&v.d(n),l=!1,(0,rf.oOW)(h)}}}function SA(n,t,r){var i,e=this;(0,rf.j0C)(n,Ft,function(n){return mA(this,e),r(1,i=n)}.bind(this));var o=On,u=function(){mA(this,e),(0,rf.vu6)(Ft,i.search=!0,i)}.bind(this),c=function(){mA(this,e),r(0,o=On),(0,rf.vu6)(Ft,i.create=!0,i)}.bind(this),a=function(){mA(this,e),r(0,o=En),(0,rf.vu6)(Ft,i.create=!0,i)}.bind(this),f=function(){mA(this,e),(0,rf.vu6)(Ft,i.create=!1,i)}.bind(this);return[o,i,u,c,a,f]}var OA=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=dA(this,t),(0,rf.TsN)(r,n,SA,_A,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&pA(n,t)}(t,n),function(n,t,r){return t&&hA(n.prototype,t),r&&hA(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const EA=OA;function TA(n){return TA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},TA(n)}function kA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,CA(i.key),i)}}function CA(n){var t=function(n,t){if("object"!=TA(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=TA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==TA(t)?t:t+""}function xA(n,t,r){return t=IA(t),function(n,t){if(t&&("object"==TA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,AA()?Reflect.construct(t,r||[],IA(n).constructor):t.apply(n,r))}function AA(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(AA=function(){return!!n})()}function IA(n){return IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},IA(n)}function MA(n,t){return MA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},MA(n,t)}function RA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function UA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return PA(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?PA(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function BA(n,t,r){var i=n.slice();return i[4]=t[r],i}function NA(n){for(var t,r=(0,rf.rv_)(n[0]),i=[],e=0;e<r.length;e+=1)i[e]=DA(BA(n,r,e));return{c:function(){t=(0,rf.ND4)("div");for(var n=0;n<i.length;n+=1)i[n].c();(0,rf.CFu)(t,"class","chat-choice-type")},m:function(n,r){(0,rf.Yry)(n,t,r);for(var e=0;e<i.length;e+=1)i[e]&&i[e].m(t,null)},p:function(n,e){if(7&e){var o;for(r=(0,rf.rv_)(n[0]),o=0;o<r.length;o+=1){var u=BA(n,r,o);i[o]?i[o].p(u,e):(i[o]=DA(u),i[o].c(),i[o].m(t,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=r.length}},d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(i,n)}}}function DA(n){var t,r,i,e,o,u,c;function a(){return n[3](n[4])}return{c:function(){t=(0,rf.ND4)("button"),r=(0,rf.ND4)("i"),(0,rf.CFu)(r,"class",i="icons-chat icons-chat_"+n[2][n[4]].icon),(0,rf.CFu)(t,"class",e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":"")),(0,rf.CFu)(t,"title",o=n[2][n[4]].title)},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r),u||(c=(0,rf.KTR)(t,"click",(0,rf.xZN)(a)),u=!0)},p:function(u,c){n=u,1&c&&i!==(i="icons-chat icons-chat_"+n[2][n[4]].icon)&&(0,rf.CFu)(r,"class",i),3&c&&e!==(e="chat-choice-type__item"+(n[1]===n[4]?" chat-choice-type__item_active":""))&&(0,rf.CFu)(t,"class",e),1&c&&o!==(o=n[2][n[4]].title)&&(0,rf.CFu)(t,"title",o)},d:function(n){n&&(0,rf.YoD)(t),u=!1,c()}}}function $A(n){var t,r=n[0].length&&NA(n);return{c:function(){r&&r.c(),t=(0,rf.Iex)()},m:function(n,i){r&&r.m(n,i),(0,rf.Yry)(n,t,i)},p:function(n,i){var e=UA(i,1)[0];n[0].length?r?r.p(n,e):((r=NA(n)).c(),r.m(t.parentNode,t)):r&&(r.d(1),r=null)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t),r&&r.d(n)}}}function GA(n,t,r){var i,e,o=this;(0,rf.j0C)(n,ho,function(n){return RA(this,o),r(0,i=n)}.bind(this)),(0,rf.j0C)(n,vo,function(n){return RA(this,o),r(1,e=n)}.bind(this));var c=[{icon:"flat-chats",title:u("allChats")},{icon:"flat-personal-chats",title:u("privateChats")},{icon:"flat-group-chats",title:u("groupChats")},{icon:"flat-channels",title:u("channels")}],a=function(n){RA(this,o),(0,rf.vu6)(vo,e=n,e)}.bind(this);return[i,e,c,a]}var LA=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=xA(this,t),(0,rf.TsN)(r,n,GA,$A,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&MA(n,t)}(t,n),function(n,t,r){return t&&kA(n.prototype,t),r&&kA(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const zA=LA;var FA=(0,Ot.T5)("new");function WA(n){return WA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},WA(n)}function qA(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,XA(i.key),i)}}function XA(n){var t=function(n,t){if("object"!=WA(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=WA(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==WA(t)?t:t+""}function HA(n,t,r){return t=QA(t),function(n,t){if(t&&("object"==WA(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,JA()?Reflect.construct(t,r||[],QA(n).constructor):t.apply(n,r))}function JA(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(JA=function(){return!!n})()}function QA(n){return QA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},QA(n)}function VA(n,t){return VA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},VA(n,t)}function YA(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function ZA(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return KA(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?KA(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KA(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function nI(n){var t;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.CFu)(t,"title",u("verified")),(0,rf.CFu)(t,"class","chat-block__verified"),(0,rf.mq_)(t.src,"https://c.mql5.com/i/chat/verified.svg")||(0,rf.CFu)(t,"src","https://c.mql5.com/i/chat/verified.svg"),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"width","16"),(0,rf.CFu)(t,"height","16")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function tI(n){var t,r,i,e=gr(n[0].countMembers)+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("i"),i=(0,rf.Qq7)(e),(0,rf.CFu)(r,"class","icons-chat icons-chat_members"),(0,rf.CFu)(t,"class","chat-block__members"),(0,rf.CFu)(t,"title",u("members"))},m:function(n,e){(0,rf.Yry)(n,t,e),(0,rf.BCw)(t,r),(0,rf.BCw)(t,i)},p:function(n,t){1&t&&e!==(e=gr(n[0].countMembers)+"")&&(0,rf.iQh)(i,e)},d:function(n){n&&(0,rf.YoD)(t)}}}function rI(n){var t,r,i=n[0].description+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(i),(0,rf.CFu)(t,"class","chat-block__desc")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,t){1&t&&i!==(i=n[0].description+"")&&(0,rf.iQh)(r,i)},d:function(n){n&&(0,rf.YoD)(t)}}}function iI(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d,b=n[0].name+"";i=new KS({props:{data:n[0],size:eI}});var y=n[0].isVerified&&nI(),p=n[1]&&tI(n),m=n[0].description&&rI(n);return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("a"),(0,rf.N0i)(i.$$.fragment),e=(0,rf.xem)(),o=(0,rf.ND4)("div"),u=(0,rf.ND4)("div"),c=(0,rf.ND4)("a"),a=(0,rf.Qq7)(b),f=(0,rf.xem)(),y&&y.c(),s=(0,rf.xem)(),p&&p.c(),l=(0,rf.xem)(),m&&m.c(),(0,rf.CFu)(r,"href",n[2]),(0,rf.CFu)(r,"class","chat-block__avatar"),(0,rf.CFu)(c,"href",n[2]),(0,rf.CFu)(u,"class","chat-block__name"),(0,rf.CFu)(o,"class","chat-block__content"),(0,rf.CFu)(t,"class","chat-block")},m:function(b,w){(0,rf.Yry)(b,t,w),(0,rf.BCw)(t,r),(0,rf.wSR)(i,r,null),(0,rf.BCw)(t,e),(0,rf.BCw)(t,o),(0,rf.BCw)(o,u),(0,rf.BCw)(u,c),(0,rf.BCw)(c,a),(0,rf.BCw)(u,f),y&&y.m(u,null),(0,rf.BCw)(o,s),p&&p.m(o,null),(0,rf.BCw)(o,l),m&&m.m(o,null),h=!0,v||(d=[(0,rf.KTR)(r,"click",(0,rf.xZN)(n[3])),(0,rf.KTR)(c,"click",(0,rf.xZN)(n[3]))],v=!0)},p:function(n,t){var e=ZA(t,1)[0],f={};1&e&&(f.data=n[0]),i.$set(f),(!h||4&e)&&(0,rf.CFu)(r,"href",n[2]),(!h||1&e)&&b!==(b=n[0].name+"")&&(0,rf.iQh)(a,b),(!h||4&e)&&(0,rf.CFu)(c,"href",n[2]),n[0].isVerified?y||((y=nI()).c(),y.m(u,null)):y&&(y.d(1),y=null),n[1]?p?p.p(n,e):((p=tI(n)).c(),p.m(o,l)):p&&(p.d(1),p=null),n[0].description?m?m.p(n,e):((m=rI(n)).c(),m.m(o,null)):m&&(m.d(1),m=null)},i:function(n){h||((0,rf.c7F)(i.$$.fragment,n),h=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),h=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(i),y&&y.d(),p&&p.d(),m&&m.d(),v=!1,(0,rf.oOW)(d)}}}var eI=80;function oI(n,t,r){var i,e=this,o=t.chat,u=t.showCountMembers,c=void 0!==u&&u;return n.$$set=function(n){YA(this,e),"chat"in n&&r(0,o=n.chat),"showCountMembers"in n&&r(1,c=n.showCountMembers)}.bind(this),n.$$.update=function(){YA(this,e),1&n.$$.dirty&&r(2,i=hr(o))}.bind(this),[o,c,i,function(){Sa(o.chatId)}]}var uI=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=HA(this,t),(0,rf.TsN)(r,n,oI,iI,rf.jXN,{chat:0,showCountMembers:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&VA(n,t)}(t,n),function(n,t,r){return t&&qA(n.prototype,t),r&&qA(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const cI=uI;function aI(n){return aI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},aI(n)}var fI=undefined;function sI(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,lI(i.key),i)}}function lI(n){var t=function(n,t){if("object"!=aI(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=aI(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==aI(t)?t:t+""}function hI(n,t,r){return t=dI(t),function(n,t){if(t&&("object"==aI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,vI()?Reflect.construct(t,r||[],dI(n).constructor):t.apply(n,r))}function vI(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(vI=function(){return!!n})()}function dI(n){return dI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},dI(n)}function bI(n,t){return bI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},bI(n,t)}function yI(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return pI(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pI(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pI(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function mI(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function wI(n,t,r){var i=n.slice();return i[4]=t[r],i}var gI=function(n){return mI(this,fI),{}}.bind(undefined),jI=function(n){return mI(this,fI),{}}.bind(undefined);function _I(n,t){var r,i,e;return i=new cI({props:{chat:t[4],showCountMembers:t[1]}}),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),e=!0},p:function(n,r){t=n;var e={};1&r&&(e.chat=t[4]),2&r&&(e.showCountMembers=t[1]),i.$set(e)},i:function(n){e||((0,rf.c7F)(i.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function SI(n){for(var t,r,i,e=this,o=[],u=new Map,c=n[3].title,a=(0,rf.Of3)(c,n,n[2],jI),f=(0,rf.rv_)(n[0]),s=function(n){return mI(this,e),n[4].chatId}.bind(this),l=0;l<f.length;l+=1){var h=wI(n,f,l),v=s(h);u.set(v,o[l]=_I(v,h))}return{c:function(){t=(0,rf.ND4)("div"),a&&a.c(),r=(0,rf.xem)();for(var n=0;n<o.length;n+=1)o[n].c();(0,rf.CFu)(t,"class","chat-intro__list-box")},m:function(n,e){(0,rf.Yry)(n,t,e),a&&a.m(t,null),(0,rf.BCw)(t,r);for(var u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);i=!0},p:function(n,r){var e=yI(r,1)[0];a&&a.p&&(!i||4&e)&&(0,rf.nkG)(a,c,n,n[2],i?(0,rf.sWk)(c,n[2],e,gI):(0,rf.i32)(n[2]),jI),3&e&&(f=(0,rf.rv_)(n[0]),(0,rf.V44)(),o=(0,rf.l7s)(o,e,s,1,n,f,u,t,rf.XP4,_I,null,wI),(0,rf.GYV)())},i:function(n){if(!i){(0,rf.c7F)(a,n);for(var t=0;t<f.length;t+=1)(0,rf.c7F)(o[t]);i=!0}},o:function(n){(0,rf.Tn8)(a,n);for(var t=0;t<o.length;t+=1)(0,rf.Tn8)(o[t]);i=!1},d:function(n){n&&(0,rf.YoD)(t),a&&a.d(n);for(var r=0;r<o.length;r+=1)o[r].d()}}}function OI(n,t,r){var i=this,e=t.$$slots,o=void 0===e?{}:e,u=t.$$scope,c=t.chatList,a=void 0===c?[]:c,f=t.showCountMembers,s=void 0!==f&&f;return n.$$set=function(n){mI(this,i),"chatList"in n&&r(0,a=n.chatList),"showCountMembers"in n&&r(1,s=n.showCountMembers),"$$scope"in n&&r(2,u=n.$$scope)}.bind(this),[a,s,u,o]}var EI=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=hI(this,t),(0,rf.TsN)(r,n,OI,SI,rf.jXN,{chatList:0,showCountMembers:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&bI(n,t)}(t,n),function(n,t,r){return t&&sI(n.prototype,t),r&&sI(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const TI=EI;function kI(n){return kI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},kI(n)}function CI(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,xI(i.key),i)}}function xI(n){var t=function(n,t){if("object"!=kI(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=kI(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==kI(t)?t:t+""}function AI(n,t,r){return t=MI(t),function(n,t){if(t&&("object"==kI(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,II()?Reflect.construct(t,r||[],MI(n).constructor):t.apply(n,r))}function II(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(II=function(){return!!n})()}function MI(n){return MI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},MI(n)}function RI(n,t){return RI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},RI(n,t)}function UI(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return PI(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?PI(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PI(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function BI(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function NI(n){var t;return{c:function(){t=(0,rf.ND4)("img"),(0,rf.CFu)(t,"class","chat-top-message__verified"),(0,rf.mq_)(t.src,"https://c.mql5.com/i/chat/verified.svg")||(0,rf.CFu)(t,"src","https://c.mql5.com/i/chat/verified.svg"),(0,rf.CFu)(t,"title",u("verified")),(0,rf.CFu)(t,"alt",""),(0,rf.CFu)(t,"width","16"),(0,rf.CFu)(t,"height","16")},m:function(n,r){(0,rf.Yry)(n,t,r)},d:function(n){n&&(0,rf.YoD)(t)}}}function DI(n){var t,r,i,e=qr({dateTime:n[0].date,type:"smart"})+"";return{c:function(){t=(0,rf.ND4)("span"),r=(0,rf.Qq7)(e),(0,rf.CFu)(t,"title",i=n[0].dateText)},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.BCw)(t,r)},p:function(n,o){1&o&&e!==(e=qr({dateTime:n[0].date,type:"smart"})+"")&&(0,rf.iQh)(r,e),1&o&&i!==(i=n[0].dateText)&&(0,rf.CFu)(t,"title",i)},d:function(n){n&&(0,rf.YoD)(t)}}}function $I(n){var t,r,i,e,o=qr({dateTime:n[0].topMessage.date,type:"smart"})+"",u=n[0].type===On&&GI(n);return{c:function(){u&&u.c(),t=(0,rf.xem)(),r=(0,rf.ND4)("span"),i=(0,rf.Qq7)(o),(0,rf.CFu)(r,"title",e=n[0].topMessage.dateText)},m:function(n,e){u&&u.m(n,e),(0,rf.Yry)(n,t,e),(0,rf.Yry)(n,r,e),(0,rf.BCw)(r,i)},p:function(n,c){n[0].type===On?u?u.p(n,c):((u=GI(n)).c(),u.m(t.parentNode,t)):u&&(u.d(1),u=null),1&c&&o!==(o=qr({dateTime:n[0].topMessage.date,type:"smart"})+"")&&(0,rf.iQh)(i,o),1&c&&e!==(e=n[0].topMessage.dateText)&&(0,rf.CFu)(r,"title",e)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r)),u&&u.d(n)}}}function GI(n){var t,r,i=n[0].topMessage.authorName+"";return{c:function(){t=(0,rf.Qq7)(i),r=(0,rf.Qq7)(",")},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.Yry)(n,r,i)},p:function(n,r){1&r&&i!==(i=n[0].topMessage.authorName+"")&&(0,rf.iQh)(t,i)},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r))}}}function LI(n){var t,r=n[0].description+"";return{c:function(){t=(0,rf.Qq7)(r)},m:function(n,r){(0,rf.Yry)(n,t,r)},p:function(n,i){1&i&&r!==(r=n[0].description+"")&&(0,rf.iQh)(t,r)},i:rf.lQ1,o:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function zI(n){var t,r,i,e,o,u=[WI,FI],c=[];function a(n,r){return 1&r&&(t=null),n[0].topMessage.recType===Tn?0:(null==t&&(i=n[0].topMessage,t=!(i.recType!==kn||!i.preview||i.preview.type!==Kn)),t?1:-1);var i}return~(r=a(n,-1))&&(i=c[r]=u[r](n)),{c:function(){i&&i.c(),e=(0,rf.Iex)()},m:function(n,t){~r&&c[r].m(n,t),(0,rf.Yry)(n,e,t),o=!0},p:function(n,t){var o=this,f=r;(r=a(n,t))===f?~r&&c[r].p(n,t):(i&&((0,rf.V44)(),(0,rf.Tn8)(c[f],1,1,function(){BI(this,o),c[f]=null}.bind(this)),(0,rf.GYV)()),~r?((i=c[r])?i.p(n,t):(i=c[r]=u[r](n)).c(),(0,rf.c7F)(i,1),i.m(e.parentNode,e)):i=null)},i:function(n){o||((0,rf.c7F)(i),o=!0)},o:function(n){(0,rf.Tn8)(i),o=!1},d:function(n){n&&(0,rf.YoD)(e),~r&&c[r].d(n)}}}function FI(n){var t,r,i,e,o;return r=new gw({props:{src:VI(n[0].topMessage),alt:""}}),{c:function(){t=(0,rf.ND4)("a"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"class","chat-top-message__image"),(0,rf.CFu)(t,"href",n[4]),(0,rf.hgi)(t,"background-image","url('"+QI(n[0].topMessage)+"')")},m:function(u,c){(0,rf.Yry)(u,t,c),(0,rf.wSR)(r,t,null),i=!0,e||(o=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[5])),e=!0)},p:function(n,e){var o={};1&e&&(o.src=VI(n[0].topMessage)),r.$set(o),(!i||16&e)&&(0,rf.CFu)(t,"href",n[4]),(!i||1&e)&&(0,rf.hgi)(t,"background-image","url('"+QI(n[0].topMessage)+"')")},i:function(n){i||((0,rf.c7F)(r.$$.fragment,n),i=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),i=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r),e=!1,o()}}}function WI(n){var t,r,i,e=n[3]&&qI(n),o=n[2]&&XI(n);return{c:function(){e&&e.c(),t=(0,rf.xem)(),o&&o.c(),r=(0,rf.Iex)()},m:function(n,u){e&&e.m(n,u),(0,rf.Yry)(n,t,u),o&&o.m(n,u),(0,rf.Yry)(n,r,u),i=!0},p:function(n,i){var u=this;n[3]?e?(e.p(n,i),8&i&&(0,rf.c7F)(e,1)):((e=qI(n)).c(),(0,rf.c7F)(e,1),e.m(t.parentNode,t)):e&&((0,rf.V44)(),(0,rf.Tn8)(e,1,1,function(){BI(this,u),e=null}.bind(this)),(0,rf.GYV)()),n[2]?o?o.p(n,i):((o=XI(n)).c(),o.m(r.parentNode,r)):o&&(o.d(1),o=null)},i:function(n){i||((0,rf.c7F)(e),i=!0)},o:function(n){(0,rf.Tn8)(e),i=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(r)),e&&e.d(n),o&&o.d(n)}}}function qI(n){var t,r,i,e,o;return r=new gw({props:{src:n[3].url,alt:""}}),{c:function(){var i;t=(0,rf.ND4)("a"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"class","chat-top-message__image"),(0,rf.CFu)(t,"href",n[4]),(0,rf.hgi)(t,"background-image","url('"+((null===(i=n[3].preview)||void 0===i?void 0:i.src)||"")+"')")},m:function(u,c){(0,rf.Yry)(u,t,c),(0,rf.wSR)(r,t,null),i=!0,e||(o=(0,rf.KTR)(t,"click",(0,rf.xZN)(n[5])),e=!0)},p:function(n,e){var o,u={};(8&e&&(u.src=n[3].url),r.$set(u),(!i||16&e)&&(0,rf.CFu)(t,"href",n[4]),!i||8&e)&&(0,rf.hgi)(t,"background-image","url('"+((null===(o=n[3].preview)||void 0===o?void 0:o.src)||"")+"')")},i:function(n){i||((0,rf.c7F)(r.$$.fragment,n),i=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),i=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r),e=!1,o()}}}function XI(n){var t;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"class","chat-top-message__text")},m:function(r,i){(0,rf.Yry)(r,t,i),t.innerHTML=n[2]},p:function(n,r){4&r&&(t.innerHTML=n[2])},d:function(n){n&&(0,rf.YoD)(t)}}}function HI(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d,b,y,p,m,w,g,j=n[0].name+"";o=new KS({props:{data:n[0],size:JI}});var _=n[0].isVerified&&NI();function S(n,t){return n[0].topMessage?$I:DI}var O=S(n),E=O(n),T=[zI,LI],k=[];function C(n,t){return n[0].topMessage?0:1}return y=C(n),p=k[y]=T[y](n),{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.ND4)("div"),i=(0,rf.ND4)("div"),e=(0,rf.ND4)("a"),(0,rf.N0i)(o.$$.fragment),u=(0,rf.xem)(),c=(0,rf.ND4)("div"),a=(0,rf.ND4)("div"),f=(0,rf.ND4)("a"),s=(0,rf.Qq7)(j),l=(0,rf.xem)(),_&&_.c(),h=(0,rf.xem)(),v=(0,rf.ND4)("div"),E.c(),d=(0,rf.xem)(),b=(0,rf.ND4)("div"),p.c(),(0,rf.CFu)(e,"href",n[4]),(0,rf.CFu)(e,"class","chat-top-message__avatar"),(0,rf.CFu)(f,"href",n[4]),(0,rf.CFu)(a,"class","chat-top-message__name"),(0,rf.CFu)(v,"class","chat-top-message__date"),(0,rf.CFu)(c,"class","chat-top-message__info"),(0,rf.CFu)(i,"class","chat-top-message__header"),(0,rf.CFu)(b,"class","chat-top-message__desc"),(0,rf.CFu)(r,"class","chat-top-message__box"),(0,rf.CFu)(t,"class","chat-top-message"),(0,rf.CFu)(t,"data-colimn",n[1])},m:function(p,j){(0,rf.Yry)(p,t,j),(0,rf.BCw)(t,r),(0,rf.BCw)(r,i),(0,rf.BCw)(i,e),(0,rf.wSR)(o,e,null),(0,rf.BCw)(i,u),(0,rf.BCw)(i,c),(0,rf.BCw)(c,a),(0,rf.BCw)(a,f),(0,rf.BCw)(f,s),(0,rf.BCw)(a,l),_&&_.m(a,null),(0,rf.BCw)(c,h),(0,rf.BCw)(c,v),E.m(v,null),(0,rf.BCw)(r,d),(0,rf.BCw)(r,b),k[y].m(b,null),m=!0,w||(g=[(0,rf.KTR)(e,"click",(0,rf.xZN)(n[5])),(0,rf.KTR)(f,"click",(0,rf.xZN)(n[5]))],w=!0)},p:function(n,r){var i=this,u=UI(r,1)[0],c={};1&u&&(c.data=n[0]),o.$set(c),(!m||16&u)&&(0,rf.CFu)(e,"href",n[4]),(!m||1&u)&&j!==(j=n[0].name+"")&&(0,rf.iQh)(s,j),(!m||16&u)&&(0,rf.CFu)(f,"href",n[4]),n[0].isVerified?_||((_=NI()).c(),_.m(a,null)):_&&(_.d(1),_=null),O===(O=S(n))&&E?E.p(n,u):(E.d(1),(E=O(n))&&(E.c(),E.m(v,null)));var l=y;(y=C(n))===l?k[y].p(n,u):((0,rf.V44)(),(0,rf.Tn8)(k[l],1,1,function(){BI(this,i),k[l]=null}.bind(this)),(0,rf.GYV)(),(p=k[y])?p.p(n,u):(p=k[y]=T[y](n)).c(),(0,rf.c7F)(p,1),p.m(b,null)),(!m||2&u)&&(0,rf.CFu)(t,"data-colimn",n[1])},i:function(n){m||((0,rf.c7F)(o.$$.fragment,n),(0,rf.c7F)(p),m=!0)},o:function(n){(0,rf.Tn8)(o.$$.fragment,n),(0,rf.Tn8)(p),m=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(o),_&&_.d(),E.d(),k[y].d(),w=!1,(0,rf.oOW)(g)}}}var JI=48;function QI(n){return n.recType===kn&&n.preview?n.preview.src:""}function VI(n){return n.recType===kn?n.url:""}function YI(n,t,r){var i,e,o,u,c,a=this,f=t.chat,s=t.column;return n.$$set=function(n){BI(this,a),"chat"in n&&r(0,f=n.chat),"column"in n&&r(1,s=n.column)}.bind(this),n.$$.update=function(){if(BI(this,a),1&n.$$.dirty&&r(4,c=hr(f)),193&n.$$.dirty&&f.topMessage&&f.topMessage.recType===Tn){if(null===r(7,e=null===r(6,i=null==f?void 0:f.topMessage)||void 0===i?void 0:i.parsedTags)||void 0===e?void 0:e.media)for(var t=0,s=f.topMessage.parsedTags.media.length;t<s;t++){var l=f.topMessage.parsedTags.media[t];if(l.preview&&l.preview.type===Kn){r(3,u=l);break}}f.topMessage.text&&r(2,o=f.topMessage.text)}}.bind(this),[f,s,o,u,c,function(){Sa(f.chatId)},i,e]}var ZI=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=AI(this,t),(0,rf.TsN)(r,n,YI,HI,rf.jXN,{chat:0,column:1}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&RI(n,t)}(t,n),function(n,t,r){return t&&CI(n.prototype,t),r&&CI(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const KI=ZI;function nM(n){return nM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nM(n)}function tM(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,rM(i.key),i)}}function rM(n){var t=function(n,t){if("object"!=nM(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=nM(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==nM(t)?t:t+""}function iM(n,t,r){return t=oM(t),function(n,t){if(t&&("object"==nM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,eM()?Reflect.construct(t,r||[],oM(n).constructor):t.apply(n,r))}function eM(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(eM=function(){return!!n})()}function oM(n){return oM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},oM(n)}function uM(n,t){return uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},uM(n,t)}function cM(n){return function(n){if(Array.isArray(n))return sM(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||fM(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function aM(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||fM(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fM(n,t){if(n){if("string"==typeof n)return sM(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sM(n,t):void 0}}function sM(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function lM(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function hM(n,t,r){var i=n.slice();return i[8]=t[r],i[10]=r,i}function vM(n,t,r){var i=n.slice();return i[11]=t[r],i[12]=t,i[13]=r,i}function dM(n){for(var t,r,i=this,e=(0,rf.rv_)(n[1]),o=[],u=0;u<e.length;u+=1)o[u]=yM(hM(n,e,u));var c=function(n){var t=this;return lM(this,i),(0,rf.Tn8)(o[n],1,1,function(){lM(this,t),o[n]=null}.bind(this))}.bind(this);return{c:function(){for(var n=0;n<o.length;n+=1)o[n].c();t=(0,rf.Iex)()},m:function(n,i){for(var e=0;e<o.length;e+=1)o[e]&&o[e].m(n,i);(0,rf.Yry)(n,t,i),r=!0},p:function(n,r){if(2&r){var i;for(e=(0,rf.rv_)(n[1]),i=0;i<e.length;i+=1){var u=hM(n,e,i);o[i]?(o[i].p(u,r),(0,rf.c7F)(o[i],1)):(o[i]=yM(u),o[i].c(),(0,rf.c7F)(o[i],1),o[i].m(t.parentNode,t))}for((0,rf.V44)(),i=e.length;i<o.length;i+=1)c(i);(0,rf.GYV)()}},i:function(n){if(!r){for(var t=0;t<e.length;t+=1)(0,rf.c7F)(o[t]);r=!0}},o:function(n){o=o.filter(Boolean);for(var t=0;t<o.length;t+=1)(0,rf.Tn8)(o[t]);r=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.ppq)(o,n)}}}function bM(n,t){var r,i,e,o,u=this;function c(n){t[6](n,t[11],t[12],t[13])}var a={column:t[10]};return void 0!==t[11]&&(a.chat=t[11]),i=new KI({props:a}),rf.Dnk.push(function(){return lM(this,u),(0,rf.oIE)(i,"chat",c)}.bind(this)),{key:n,first:null,c:function(){r=(0,rf.Iex)(),(0,rf.N0i)(i.$$.fragment),this.first=r},m:function(n,t){(0,rf.Yry)(n,r,t),(0,rf.wSR)(i,n,t),o=!0},p:function(n,r){var o=this;t=n;var u={};!e&&2&r&&(e=!0,u.chat=t[11],(0,rf.Jk$)(function(){return lM(this,o),e=!1}.bind(this))),i.$set(u)},i:function(n){o||((0,rf.c7F)(i.$$.fragment,n),o=!0)},o:function(n){(0,rf.Tn8)(i.$$.fragment,n),o=!1},d:function(n){n&&(0,rf.YoD)(r),(0,rf.Hbl)(i,n)}}}function yM(n){for(var t,r,i,e=this,o=[],u=new Map,c=(0,rf.rv_)(n[8]),a=function(n){return lM(this,e),n[11].chatId+(n[11].topMessage?n[11].topMessage.messageId:"")}.bind(this),f=0;f<c.length;f+=1){var s=vM(n,c,f),l=a(s);u.set(l,o[f]=bM(l,s))}return{c:function(){t=(0,rf.ND4)("div");for(var n=0;n<o.length;n+=1)o[n].c();r=(0,rf.xem)(),(0,rf.CFu)(t,"class","chat-list-columns__column")},m:function(n,e){(0,rf.Yry)(n,t,e);for(var u=0;u<o.length;u+=1)o[u]&&o[u].m(t,null);(0,rf.BCw)(t,r),i=!0},p:function(n,i){2&i&&(c=(0,rf.rv_)(n[8]),(0,rf.V44)(),o=(0,rf.l7s)(o,i,a,1,n,c,u,t,rf.XP4,bM,r,vM),(0,rf.GYV)())},i:function(n){if(!i){for(var t=0;t<c.length;t+=1)(0,rf.c7F)(o[t]);i=!0}},o:function(n){for(var t=0;t<o.length;t+=1)(0,rf.Tn8)(o[t]);i=!1},d:function(n){n&&(0,rf.YoD)(t);for(var r=0;r<o.length;r+=1)o[r].d()}}}function pM(n){var t,r,i,e=n[1].length&&dM(n);return{c:function(){t=(0,rf.ND4)("div"),e&&e.c(),(0,rf.CFu)(t,"class",r="chat-list-columns"+(n[1].length?"":" chat-list-columns_loading"))},m:function(n,r){(0,rf.Yry)(n,t,r),e&&e.m(t,null),i=!0},p:function(n,o){var u=this,c=aM(o,1)[0];n[1].length?e?(e.p(n,c),2&c&&(0,rf.c7F)(e,1)):((e=dM(n)).c(),(0,rf.c7F)(e,1),e.m(t,null)):e&&((0,rf.V44)(),(0,rf.Tn8)(e,1,1,function(){lM(this,u),e=null}.bind(this)),(0,rf.GYV)()),(!i||2&c&&r!==(r="chat-list-columns"+(n[1].length?"":" chat-list-columns_loading")))&&(0,rf.CFu)(t,"class",r)},i:function(n){i||((0,rf.c7F)(e),i=!0)},o:function(n){(0,rf.Tn8)(e),i=!1},d:function(n){n&&(0,rf.YoD)(t),e&&e.d()}}}function mM(n){var t;if(!n.topMessage)return 0;var r=0,i=n.topMessage;if(i.recType===Tn){if(r+=22*Math.min(Math.ceil(i.text.length/43),5),null===(t=null==i?void 0:i.parsedTags)||void 0===t?void 0:t.media)for(var e=0,o=i.parsedTags.media.length;e<o;e++){var u=i.parsedTags.media[e];if(u.preview&&u.preview.type===Kn){r+=212;break}}return r}return i.recType===kn&&i.preview&&i.preview.type===Kn&&(r+=200),r}function wM(n,t,r){var i,e=this,o=rf.lQ1,u=function(){var n=this;return lM(this,e),o(),o=(0,rf.B1Y)(c,function(t){return lM(this,n),r(5,i=t)}.bind(this)),c}.bind(this);n.$$.on_destroy.push(function(){return lM(this,e),o()}.bind(this));var c=t.list;u();var a=t.maxCountToShow,f=[],s=6,l=[];function h(){var n=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;r(3,s=4),n>=2400?r(3,s=6):n<=1366?r(3,s=2):n<=1600&&r(3,s=3)}return(0,cf.Rc)(function(){var n=this;lM(this,e);var t=sa(h,100);return window.addEventListener("resize",t),t(),function(){lM(this,n),window.removeEventListener("resize",t)}.bind(this)}.bind(this)),n.$$set=function(n){lM(this,e),"list"in n&&u(r(0,c=n.list)),"maxCountToShow"in n&&r(2,a=n.maxCountToShow)}.bind(this),n.$$.update=function(){if(lM(this,e),62&n.$$.dirty){r(1,f=[]),r(4,l=[]);for(var t=0;t<s;t++)f.push([]),r(4,l[t]=0,l);for(var o=0,u=i.length;o<u&&!(o>=a);o++){var c=i[o],h=l.indexOf(Math.min.apply(Math,cM(l)));f[h].push(c),r(4,l[h]+=mM(c)+60,l)}}}.bind(this),[c,f,a,s,l,i,function(n,t,e,o){e[o]=n,r(1,f),r(3,s),r(5,i),r(2,a),r(4,l)}]}var gM=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=iM(this,t),(0,rf.TsN)(r,n,wM,pM,rf.jXN,{list:0,maxCountToShow:2}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&uM(n,t)}(t,n),function(n,t,r){return t&&tM(n.prototype,t),r&&tM(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const jM=gM;function _M(n){return _M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},_M(n)}var SM=undefined;function OM(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,EM(i.key),i)}}function EM(n){var t=function(n,t){if("object"!=_M(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=_M(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==_M(t)?t:t+""}function TM(n,t,r){return t=CM(t),function(n,t){if(t&&("object"==_M(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,kM()?Reflect.construct(t,r||[],CM(n).constructor):t.apply(n,r))}function kM(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(kM=function(){return!!n})()}function CM(n){return CM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},CM(n)}function xM(n,t){return xM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},xM(n,t)}function AM(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return IM(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?IM(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function IM(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function MM(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function RM(n){var t,r,i,e,o,c=u("new")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(c),(0,rf.CFu)(t,"class",i="chat-tabs__item"+("new"===n[1]?" chat-tabs__item_active":""))},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),e||(o=[(0,rf.KTR)(t,"keyup",XM),(0,rf.KTR)(t,"click",n[6])],e=!0)},p:function(n,r){2&r&&i!==(i="chat-tabs__item"+("new"===n[1]?" chat-tabs__item_active":""))&&(0,rf.CFu)(t,"class",i)},d:function(n){n&&(0,rf.YoD)(t),e=!1,(0,rf.oOW)(o)}}}function UM(n){var t,r,i,e,o,c=u("popular")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(c),(0,rf.CFu)(t,"class",i="chat-tabs__item"+("popular"===n[1]?" chat-tabs__item_active":""))},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),e||(o=[(0,rf.KTR)(t,"keyup",HM),(0,rf.KTR)(t,"click",n[7])],e=!0)},p:function(n,r){2&r&&i!==(i="chat-tabs__item"+("popular"===n[1]?" chat-tabs__item_active":""))&&(0,rf.CFu)(t,"class",i)},d:function(n){n&&(0,rf.YoD)(t),e=!1,(0,rf.oOW)(o)}}}function PM(n){var t,r,i,e,o,c=u("my")+"";return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)(c),(0,rf.CFu)(t,"class",i="chat-tabs__item"+("my"===n[1]?" chat-tabs__item_active":""))},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),e||(o=[(0,rf.KTR)(t,"keyup",JM),(0,rf.KTR)(t,"click",n[8])],e=!0)},p:function(n,r){2&r&&i!==(i="chat-tabs__item"+("my"===n[1]?" chat-tabs__item_active":""))&&(0,rf.CFu)(t,"class",i)},d:function(n){n&&(0,rf.YoD)(t),e=!1,(0,rf.oOW)(o)}}}function BM(n){var t,r,i,e,o;return{c:function(){t=(0,rf.ND4)("div"),r=(0,rf.Qq7)("Тест"),(0,rf.CFu)(t,"title","Тип выборки по количеству читателей"),(0,rf.CFu)(t,"class",i="chat-tabs__item"+("test"===n[1]?" chat-tabs__item_active":""))},m:function(i,u){(0,rf.Yry)(i,t,u),(0,rf.BCw)(t,r),e||(o=[(0,rf.KTR)(t,"keyup",QM),(0,rf.KTR)(t,"click",n[9])],e=!0)},p:function(n,r){2&r&&i!==(i="chat-tabs__item"+("test"===n[1]?" chat-tabs__item_active":""))&&(0,rf.CFu)(t,"class",i)},d:function(n){n&&(0,rf.YoD)(t),e=!1,(0,rf.oOW)(o)}}}function NM(n){var t,r,i,e;return r=new jM({props:{list:Eb,maxCountToShow:32}}),{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"class",i="chat-tabs__content"+("new"===n[1]?"":" hidden"))},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.wSR)(r,t,null),e=!0},p:function(n,r){(!e||2&r&&i!==(i="chat-tabs__content"+("new"===n[1]?"":" hidden")))&&(0,rf.CFu)(t,"class",i)},i:function(n){e||((0,rf.c7F)(r.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r)}}}function DM(n){var t,r,i,e;return r=new TI({props:{chatList:n[2]}}),{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"class",i="chat-tabs__content"+("popular"===n[1]?"":" hidden"))},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.wSR)(r,t,null),e=!0},p:function(n,o){var u={};4&o&&(u.chatList=n[2]),r.$set(u),(!e||2&o&&i!==(i="chat-tabs__content"+("popular"===n[1]?"":" hidden")))&&(0,rf.CFu)(t,"class",i)},i:function(n){e||((0,rf.c7F)(r.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r)}}}function $M(n){var t,r,i,e,o=n[3].length&&GM(n),u=n[4].length&&zM(n);return{c:function(){t=(0,rf.ND4)("div"),o&&o.c(),r=(0,rf.xem)(),u&&u.c(),(0,rf.CFu)(t,"class",i="chat-tabs__content"+("my"===n[1]?"":" hidden"))},m:function(n,i){(0,rf.Yry)(n,t,i),o&&o.m(t,null),(0,rf.BCw)(t,r),u&&u.m(t,null),e=!0},p:function(n,c){var a=this;n[3].length?o?(o.p(n,c),8&c&&(0,rf.c7F)(o,1)):((o=GM(n)).c(),(0,rf.c7F)(o,1),o.m(t,r)):o&&((0,rf.V44)(),(0,rf.Tn8)(o,1,1,function(){MM(this,a),o=null}.bind(this)),(0,rf.GYV)()),n[4].length?u?(u.p(n,c),16&c&&(0,rf.c7F)(u,1)):((u=zM(n)).c(),(0,rf.c7F)(u,1),u.m(t,null)):u&&((0,rf.V44)(),(0,rf.Tn8)(u,1,1,function(){MM(this,a),u=null}.bind(this)),(0,rf.GYV)()),(!e||2&c&&i!==(i="chat-tabs__content"+("my"===n[1]?"":" hidden")))&&(0,rf.CFu)(t,"class",i)},i:function(n){e||((0,rf.c7F)(o),(0,rf.c7F)(u),e=!0)},o:function(n){(0,rf.Tn8)(o),(0,rf.Tn8)(u),e=!1},d:function(n){n&&(0,rf.YoD)(t),o&&o.d(),u&&u.d()}}}function GM(n){var t,r;return t=new TI({props:{chatList:n[3],showCountMembers:!0,$$slots:{title:[LM]},$$scope:{ctx:n}}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};8&r&&(i.chatList=n[3]),1024&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function LM(n){var t;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("groupChatsShort")),(0,rf.CFu)(t,"class","chat-intro__title-list"),(0,rf.CFu)(t,"slot","title")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function zM(n){var t,r;return t=new TI({props:{chatList:n[4],showCountMembers:!0,$$slots:{title:[FM]},$$scope:{ctx:n}}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};16&r&&(i.chatList=n[4]),1024&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function FM(n){var t;return{c:function(){(t=(0,rf.ND4)("div")).textContent="".concat(u("channels")),(0,rf.CFu)(t,"class","chat-intro__title-list"),(0,rf.CFu)(t,"slot","title")},m:function(n,r){(0,rf.Yry)(n,t,r)},p:rf.lQ1,d:function(n){n&&(0,rf.YoD)(t)}}}function WM(n){var t,r,i,e;return r=new TI({props:{chatList:n[5]}}),{c:function(){t=(0,rf.ND4)("div"),(0,rf.N0i)(r.$$.fragment),(0,rf.CFu)(t,"class",i="chat-tabs__content"+("test"===n[1]?"":" hidden"))},m:function(n,i){(0,rf.Yry)(n,t,i),(0,rf.wSR)(r,t,null),e=!0},p:function(n,o){var u={};32&o&&(u.chatList=n[5]),r.$set(u),(!e||2&o&&i!==(i="chat-tabs__content"+("test"===n[1]?"":" hidden")))&&(0,rf.CFu)(t,"class",i)},i:function(n){e||((0,rf.c7F)(r.$$.fragment,n),e=!0)},o:function(n){(0,rf.Tn8)(r.$$.fragment,n),e=!1},d:function(n){n&&(0,rf.YoD)(t),(0,rf.Hbl)(r)}}}function qM(n){var t,r,i,e,o,u,c,a,f,s,l=n[0].length&&RM(n),h=n[2].length&&UM(n),v=(n[3].length||n[4].length)&&PM(n),d=Le&&n[5].length&&BM(n),b=n[0].length&&NM(n),y=n[2].length&&DM(n),p=(n[3].length||n[4].length)&&$M(n),m=Le&&n[5].length&&WM(n);return{c:function(){t=(0,rf.ND4)("div"),l&&l.c(),r=(0,rf.xem)(),h&&h.c(),i=(0,rf.xem)(),v&&v.c(),e=(0,rf.xem)(),d&&d.c(),o=(0,rf.xem)(),b&&b.c(),u=(0,rf.xem)(),y&&y.c(),c=(0,rf.xem)(),p&&p.c(),a=(0,rf.xem)(),m&&m.c(),f=(0,rf.Iex)(),(0,rf.CFu)(t,"class","chat-tabs__list")},m:function(n,w){(0,rf.Yry)(n,t,w),l&&l.m(t,null),(0,rf.BCw)(t,r),h&&h.m(t,null),(0,rf.BCw)(t,i),v&&v.m(t,null),(0,rf.BCw)(t,e),d&&d.m(t,null),(0,rf.Yry)(n,o,w),b&&b.m(n,w),(0,rf.Yry)(n,u,w),y&&y.m(n,w),(0,rf.Yry)(n,c,w),p&&p.m(n,w),(0,rf.Yry)(n,a,w),m&&m.m(n,w),(0,rf.Yry)(n,f,w),s=!0},p:function(n,o){var s=this,w=AM(o,1)[0];n[0].length?l?l.p(n,w):((l=RM(n)).c(),l.m(t,r)):l&&(l.d(1),l=null),n[2].length?h?h.p(n,w):((h=UM(n)).c(),h.m(t,i)):h&&(h.d(1),h=null),n[3].length||n[4].length?v?v.p(n,w):((v=PM(n)).c(),v.m(t,e)):v&&(v.d(1),v=null),Le&&n[5].length?d?d.p(n,w):((d=BM(n)).c(),d.m(t,null)):d&&(d.d(1),d=null),n[0].length?b?(b.p(n,w),1&w&&(0,rf.c7F)(b,1)):((b=NM(n)).c(),(0,rf.c7F)(b,1),b.m(u.parentNode,u)):b&&((0,rf.V44)(),(0,rf.Tn8)(b,1,1,function(){MM(this,s),b=null}.bind(this)),(0,rf.GYV)()),n[2].length?y?(y.p(n,w),4&w&&(0,rf.c7F)(y,1)):((y=DM(n)).c(),(0,rf.c7F)(y,1),y.m(c.parentNode,c)):y&&((0,rf.V44)(),(0,rf.Tn8)(y,1,1,function(){MM(this,s),y=null}.bind(this)),(0,rf.GYV)()),n[3].length||n[4].length?p?(p.p(n,w),24&w&&(0,rf.c7F)(p,1)):((p=$M(n)).c(),(0,rf.c7F)(p,1),p.m(a.parentNode,a)):p&&((0,rf.V44)(),(0,rf.Tn8)(p,1,1,function(){MM(this,s),p=null}.bind(this)),(0,rf.GYV)()),Le&&n[5].length?m?(m.p(n,w),32&w&&(0,rf.c7F)(m,1)):((m=WM(n)).c(),(0,rf.c7F)(m,1),m.m(f.parentNode,f)):m&&((0,rf.V44)(),(0,rf.Tn8)(m,1,1,function(){MM(this,s),m=null}.bind(this)),(0,rf.GYV)())},i:function(n){s||((0,rf.c7F)(b),(0,rf.c7F)(y),(0,rf.c7F)(p),(0,rf.c7F)(m),s=!0)},o:function(n){(0,rf.Tn8)(b),(0,rf.Tn8)(y),(0,rf.Tn8)(p),(0,rf.Tn8)(m),s=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(o),(0,rf.YoD)(u),(0,rf.YoD)(c),(0,rf.YoD)(a),(0,rf.YoD)(f)),l&&l.d(),h&&h.d(),v&&v.d(),d&&d.d(),b&&b.d(n),y&&y.d(n),p&&p.d(n),m&&m.d(n)}}}var XM=function(){MM(this,SM)}.bind(undefined),HM=function(){MM(this,SM)}.bind(undefined),JM=function(){MM(this,SM)}.bind(undefined),QM=function(){MM(this,SM)}.bind(undefined);function VM(n,t,r){var i,e,o,u,c,a,f=this;(0,rf.j0C)(n,Eb,function(n){return MM(this,f),r(0,i=n)}.bind(this)),(0,rf.j0C)(n,FA,function(n){return MM(this,f),r(1,e=n)}.bind(this)),(0,rf.j0C)(n,mb,function(n){return MM(this,f),r(2,o=n)}.bind(this)),(0,rf.j0C)(n,ze,function(n){return MM(this,f),r(3,u=n)}.bind(this)),(0,rf.j0C)(n,Fe,function(n){return MM(this,f),r(4,c=n)}.bind(this)),(0,rf.j0C)(n,Mb,function(n){return MM(this,f),r(5,a=n)}.bind(this)),(0,cf.Rc)(function(){MM(this,f),xb(),gb(),Le&&Rb()}.bind(this));var s=function(){MM(this,f),(0,rf.vu6)(FA,e="new",e)}.bind(this),l=function(){MM(this,f),(0,rf.vu6)(FA,e="popular",e)}.bind(this),h=function(){MM(this,f),(0,rf.vu6)(FA,e="my",e)}.bind(this),v=function(){MM(this,f),(0,rf.vu6)(FA,e="test",e)}.bind(this);return[i,e,o,u,c,a,s,l,h,v]}var YM=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=TM(this,t),(0,rf.TsN)(r,n,VM,qM,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&xM(n,t)}(t,n),function(n,t,r){return t&&OM(n.prototype,t),r&&OM(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const ZM=YM;function KM(n){return KM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},KM(n)}function nR(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,tR(i.key),i)}}function tR(n){var t=function(n,t){if("object"!=KM(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=KM(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==KM(t)?t:t+""}function rR(n,t,r){return t=eR(t),function(n,t){if(t&&("object"==KM(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,iR()?Reflect.construct(t,r||[],eR(n).constructor):t.apply(n,r))}function iR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(iR=function(){return!!n})()}function eR(n){return eR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},eR(n)}function oR(n,t){return oR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},oR(n,t)}function uR(n){var t,r,i=!ur&&function(){var n,t;return n=new ZM({}),{c:function(){(0,rf.N0i)(n.$$.fragment)},m:function(r,i){(0,rf.wSR)(n,r,i),t=!0},i:function(r){t||((0,rf.c7F)(n.$$.fragment,r),t=!0)},o:function(r){(0,rf.Tn8)(n.$$.fragment,r),t=!1},d:function(t){(0,rf.Hbl)(n,t)}}}();return{c:function(){t=(0,rf.ND4)("div"),i&&i.c(),(0,rf.CFu)(t,"class","chat-intro")},m:function(n,e){(0,rf.Yry)(n,t,e),i&&i.m(t,null),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(i),r=!0)},o:function(n){(0,rf.Tn8)(i),r=!1},d:function(n){n&&(0,rf.YoD)(t),i&&i.d()}}}function cR(n){return[]}var aR=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=rR(this,t),(0,rf.TsN)(r,n,cR,uR,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&oR(n,t)}(t,n),function(n,t,r){return t&&nR(n.prototype,t),r&&nR(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const fR=aR;function sR(n){return sR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},sR(n)}function lR(n,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,hR(i.key),i)}}function hR(n){var t=function(n,t){if("object"!=sR(n)||!n)return n;var r=n[Symbol.toPrimitive];if(void 0!==r){var i=r.call(n,t||"default");if("object"!=sR(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(n)}(n,"string");return"symbol"==sR(t)?t:t+""}function vR(n,t,r){return t=bR(t),function(n,t){if(t&&("object"==sR(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}(n)}(n,dR()?Reflect.construct(t,r||[],bR(n).constructor):t.apply(n,r))}function dR(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(n){}return(dR=function(){return!!n})()}function bR(n){return bR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},bR(n)}function yR(n,t){return yR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,t){return n.__proto__=t,n},yR(n,t)}function pR(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var i,e,o,u,c=[],a=!0,f=!1;try{if(o=(r=r.call(n)).next,0===t){if(Object(r)!==r)return;a=!1}else for(;!(a=(i=o.call(r)).done)&&(c.push(i.value),c.length!==t);a=!0);}catch(n){f=!0,e=n}finally{try{if(!a&&null!=r["return"]&&(u=r["return"](),Object(u)!==u))return}finally{if(f)throw e}}return c}}(n,t)||function(n,t){if(n){if("string"==typeof n)return mR(n,t);var r={}.toString.call(n).slice(8,-1);return"Object"===r&&n.constructor&&(r=n.constructor.name),"Map"===r||"Set"===r?Array.from(n):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?mR(n,t):void 0}}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mR(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,i=Array(t);r<t;r++)i[r]=n[r];return i}function wR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}function gR(n){var t,r,i,e,o,u,c,a,f,s,l,h,v,d=n[1].error&&jR(n);r=new EA({});var b=n[1].search&&_R(n);o=new fR({});var y=[OR,SR],p=[];function m(n,t){return n[1].errorWindow?0:n[1].window?1:-1}return~(c=m(n))&&(a=p[c]=y[c](n)),s=new lk({props:{clickHandle:Sa,loadMore:So}}),h=new zA({}),{c:function(){d&&d.c(),t=(0,rf.xem)(),(0,rf.N0i)(r.$$.fragment),i=(0,rf.xem)(),b&&b.c(),e=(0,rf.xem)(),(0,rf.N0i)(o.$$.fragment),u=(0,rf.xem)(),a&&a.c(),f=(0,rf.xem)(),(0,rf.N0i)(s.$$.fragment),l=(0,rf.xem)(),(0,rf.N0i)(h.$$.fragment)},m:function(n,a){d&&d.m(n,a),(0,rf.Yry)(n,t,a),(0,rf.wSR)(r,n,a),(0,rf.Yry)(n,i,a),b&&b.m(n,a),(0,rf.Yry)(n,e,a),(0,rf.wSR)(o,n,a),(0,rf.Yry)(n,u,a),~c&&p[c].m(n,a),(0,rf.Yry)(n,f,a),(0,rf.wSR)(s,n,a),(0,rf.Yry)(n,l,a),(0,rf.wSR)(h,n,a),v=!0},p:function(n,r){var i=this;n[1].error?d?2&r&&(0,rf.c7F)(d,1):((d=jR(n)).c(),(0,rf.c7F)(d,1),d.m(t.parentNode,t)):d&&((0,rf.V44)(),(0,rf.Tn8)(d,1,1,function(){wR(this,i),d=null}.bind(this)),(0,rf.GYV)()),n[1].search?b?2&r&&(0,rf.c7F)(b,1):((b=_R(n)).c(),(0,rf.c7F)(b,1),b.m(e.parentNode,e)):b&&((0,rf.V44)(),(0,rf.Tn8)(b,1,1,function(){wR(this,i),b=null}.bind(this)),(0,rf.GYV)());var o=c;(c=m(n))===o?~c&&p[c].p(n,r):(a&&((0,rf.V44)(),(0,rf.Tn8)(p[o],1,1,function(){wR(this,i),p[o]=null}.bind(this)),(0,rf.GYV)()),~c?((a=p[c])?a.p(n,r):(a=p[c]=y[c](n)).c(),(0,rf.c7F)(a,1),a.m(f.parentNode,f)):a=null)},i:function(n){v||((0,rf.c7F)(d),(0,rf.c7F)(r.$$.fragment,n),(0,rf.c7F)(b),(0,rf.c7F)(o.$$.fragment,n),(0,rf.c7F)(a),(0,rf.c7F)(s.$$.fragment,n),(0,rf.c7F)(h.$$.fragment,n),v=!0)},o:function(n){(0,rf.Tn8)(d),(0,rf.Tn8)(r.$$.fragment,n),(0,rf.Tn8)(b),(0,rf.Tn8)(o.$$.fragment,n),(0,rf.Tn8)(a),(0,rf.Tn8)(s.$$.fragment,n),(0,rf.Tn8)(h.$$.fragment,n),v=!1},d:function(n){n&&((0,rf.YoD)(t),(0,rf.YoD)(i),(0,rf.YoD)(e),(0,rf.YoD)(u),(0,rf.YoD)(f),(0,rf.YoD)(l)),d&&d.d(n),(0,rf.Hbl)(r,n),b&&b.d(n),(0,rf.Hbl)(o,n),~c&&p[c].d(n),(0,rf.Hbl)(s,n),(0,rf.Hbl)(h,n)}}}function jR(n){var t,r;return t=new jf({}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function _R(n){var t,r;return t=new Ix({}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function SR(n){var t,r;return t=new kT({props:{loadMore:Wu}}),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:rf.lQ1,i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function OR(n){var t,r;return(t=new $f({props:{$$slots:{content:[ER]},$$scope:{ctx:n}}})).$on("close",n[3]),{c:function(){(0,rf.N0i)(t.$$.fragment)},m:function(n,i){(0,rf.wSR)(t,n,i),r=!0},p:function(n,r){var i={};20&r&&(i.$$scope={dirty:r,ctx:n}),t.$set(i)},i:function(n){r||((0,rf.c7F)(t.$$.fragment,n),r=!0)},o:function(n){(0,rf.Tn8)(t.$$.fragment,n),r=!1},d:function(n){(0,rf.Hbl)(t,n)}}}function ER(n){var t;return{c:function(){t=(0,rf.ND4)("div"),(0,rf.CFu)(t,"slot","content")},m:function(r,i){(0,rf.Yry)(r,t,i),t.innerHTML=n[2]},p:function(n,r){4&r&&(t.innerHTML=n[2])},d:function(n){n&&(0,rf.YoD)(t)}}}function TR(n){var t,r,i=n[0]&&gR(n);return{c:function(){i&&i.c(),t=(0,rf.Iex)()},m:function(n,e){i&&i.m(n,e),(0,rf.Yry)(n,t,e),r=!0},p:function(n,r){var e=this,o=pR(r,1)[0];n[0]?i?(i.p(n,o),1&o&&(0,rf.c7F)(i,1)):((i=gR(n)).c(),(0,rf.c7F)(i,1),i.m(t.parentNode,t)):i&&((0,rf.V44)(),(0,rf.Tn8)(i,1,1,function(){wR(this,e),i=null}.bind(this)),(0,rf.GYV)())},i:function(n){r||((0,rf.c7F)(i),r=!0)},o:function(n){(0,rf.Tn8)(i),r=!1},d:function(n){n&&(0,rf.YoD)(t),i&&i.d(n)}}}function kR(n,t,r){var i,o,u=this;(0,rf.j0C)(n,Ft,function(n){return wR(this,u),r(1,i=n)}.bind(this)),(0,rf.j0C)(n,qt,function(n){return wR(this,u),r(2,o=n)}.bind(this));var c=!1;(0,cf.Rc)(function(){var n=this;wR(this,u),Ak()["catch"](function(t){wR(this,n),y.error(e._,t)}.bind(this))["finally"](function(){var t,i=this;wR(this,n),t="/".concat(or,"/users/").concat(Qt.toLowerCase(),"/messages"),window.history&&(Xo=!0,qo=t,window.addEventListener("popstate",Qo)),Yo({path:"/{language}/users/{login}/messages",callback:function(){wR(this,i),ou(),va()}.bind(this)}),Yo({path:"/{language}/messages/{id}",callback:function(n){var t=this;wR(this,i),n&&n.id&&(va(),_a(n.id,!0)["catch"](function(n){wR(this,t),y.error(e.USER,n)}.bind(this)))}.bind(this)}),Yo({path:"/{language}/channels/{id}",callback:function(n){var t=this;wR(this,i),n&&n.id&&(va(),_a(n.id,!0)["catch"](function(n){wR(this,t),y.error(e.USER,n)}.bind(this)))}.bind(this)}),Yo({path:"/{language}/channels/{id}/edit",callback:function(n){var t=this;wR(this,i),n&&n.id&&_a(n.id,!0).then(function(){wR(this,t),nu(n.id)}.bind(this))["catch"](function(n){wR(this,t),y.error(e.USER,n)}.bind(this))}.bind(this)}),Yo({path:"/{language}/messages/{id}/edit",callback:function(n){var t=this;wR(this,i),n&&n.id&&_a(n.id,!0).then(function(){wR(this,t),nu(n.id)}.bind(this))["catch"](function(n){wR(this,t),y.error(e.USER,n)}.bind(this))}.bind(this)}),r(0,c=!0),Qo()}.bind(this))}.bind(this));var a=function(){wR(this,u),qt.set(undefined)}.bind(this);return[c,i,o,a]}var CR=function(n){function t(n){var r;return function(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=vR(this,t),(0,rf.TsN)(r,n,kR,TR,rf.jXN,{}),r}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),t&&yR(n,t)}(t,n),function(n,t,r){return t&&lR(n.prototype,t),r&&lR(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(t)}(rf.r7T);const xR=CR;function AR(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return IR(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(IR(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,IR(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,IR(l,"constructor",f),IR(f,"constructor",a),a.displayName="GeneratorFunction",IR(f,e,"GeneratorFunction"),IR(l),IR(l,e,"Generator"),IR(l,i,function(){return this}),IR(l,"toString",function(){return"[object Generator]"}),(AR=function(){return{w:o,m:h}})()}function IR(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}IR=function(n,t,r,i){function o(t,r){IR(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},IR(n,t,r,i)}var MR=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})};function RR(){return MR(this,void 0,void 0,AR().m(function n(){var t;return AR().w(function(n){for(;;)switch(n.n){case 0:if(t=document.getElementById("chatContainer")){n.n=1;break}throw new Error("There is no container here");case 1:return n.n=2,Ya();case 2:return ma(),n.n=3,lb();case 3:new xR({target:t});case 4:return n.a(2)}},n)}))}var UR=undefined;function PR(){var n,t,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",e=r.toStringTag||"@@toStringTag";function o(r,i,e,o){var a=i&&i.prototype instanceof c?i:c,f=Object.create(a.prototype);return BR(f,"_invoke",function(r,i,e){var o,c,a,f=0,s=e||[],l=!1,h={p:0,n:0,v:n,a:v,f:v.bind(n,4),d:function(t,r){return o=t,c=0,a=n,h.n=r,u}};function v(r,i){for(c=r,a=i,t=0;!l&&f&&!e&&t<s.length;t++){var e,o=s[t],v=h.p,d=o[2];r>3?(e=d===i)&&(a=o[(c=o[4])?5:(c=3,3)],o[4]=o[5]=n):o[0]<=v&&((e=r<2&&v<o[1])?(c=0,h.v=i,h.n=o[1]):v<d&&(e=r<3||o[0]>i||i>d)&&(o[4]=r,o[5]=i,h.n=d,c=0))}if(e||r>1)return u;throw l=!0,i}return function(e,s,d){if(f>1)throw TypeError("Generator is already running");for(l&&1===s&&v(s,d),c=s,a=d;(t=c<2?n:a)||!l;){o||(c?c<3?(c>1&&(h.n=-1),v(c,a)):h.n=a:h.v=a);try{if(f=2,o){if(c||(e="next"),t=o[e]){if(!(t=t.call(o,a)))throw TypeError("iterator result is not an object");if(!t.done)return t;a=t.value,c<2&&(c=0)}else 1===c&&(t=o["return"])&&t.call(o),c<2&&(a=TypeError("The iterator does not provide a '"+e+"' method"),c=1);o=n}else if((t=(l=h.n<0)?a:r.call(i,h))!==u)break}catch(t){o=n,c=1,a=t}finally{f=1}}return{value:t,done:l}}}(r,e,o),!0),f}var u={};function c(){}function a(){}function f(){}t=Object.getPrototypeOf;var s=[][i]?t(t([][i]())):(BR(t={},i,function(){return this}),t),l=f.prototype=c.prototype=Object.create(s);function h(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,f):(n.__proto__=f,BR(n,e,"GeneratorFunction")),n.prototype=Object.create(l),n}return a.prototype=f,BR(l,"constructor",f),BR(f,"constructor",a),a.displayName="GeneratorFunction",BR(f,e,"GeneratorFunction"),BR(l),BR(l,e,"Generator"),BR(l,i,function(){return this}),BR(l,"toString",function(){return"[object Generator]"}),(PR=function(){return{w:o,m:h}})()}function BR(n,t,r,i){var e=Object.defineProperty;try{e({},"",{})}catch(n){e=0}BR=function(n,t,r,i){function o(t,r){BR(n,t,function(n){return this._invoke(t,r,n)})}t?e?e(n,t,{value:r,enumerable:!i,configurable:!i,writable:!i}):n[t]=r:(o("next",0),o("throw",1),o("return",2))},BR(n,t,r,i)}function NR(n){return NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},NR(n)}function DR(n,t){if(n!==t)throw new TypeError("Cannot instantiate an arrow function")}var $R,GR=undefined&&undefined.__awaiter||function(n,t,r,i){return new(r||(r=Promise))(function(e,o){function u(n){try{a(i.next(n))}catch(t){o(t)}}function c(n){try{a(i["throw"](n))}catch(t){o(t)}}function a(n){var t;n.done?e(n.value):(t=n.value,t instanceof r?t:new r(function(n){n(t)})).then(u,c)}a((i=i.apply(n,t||[])).next())})},LR=!1;function zR(n){var t=this;return new Promise(function(r,i){var c,a=this;(DR(this,t),n&&"object"===NR(n))?(c=n.localization,o=c,window.WebSocket&&window.indexedDB&&"Set"===(new Set).constructor.name?(y.enable(),Be("chat_extended_logs").then(function(t){DR(this,a),lr(n,1===parseInt(t,10)),r()}.bind(this))["catch"](function(t){DR(this,a),y.error(e.S,t),lr(n),r()}.bind(this))):i(new Error(u("notSupportedWebsoket")))):i(new Error("Settings in empty"))}.bind(this))}function FR(n,t){return GR(this,void 0,void 0,PR().m(function r(){return PR().w(function(r){for(;;)switch(r.p=r.n){case 0:return r.p=0,r.n=1,zR(n);case 1:return r.n=2,t();case 2:LR=!0,$R&&($R(),$R=undefined),r.n=4;break;case 3:r.p=3,Wa(r.v);case 4:return r.a(2)}},r,null,[[0,3]])}))}function WR(n){return function(){for(var t=this,r=arguments.length,i=new Array(r),e=0;e<r;e++)i[e]=arguments[e];uC.set(!0),LR?n.apply(void 0,i):$R=function(){DR(this,t),n.apply(void 0,i)}.bind(this)}}window.initChat=function(n){FR(n,RR)},window.initChatWidget=function(n){FR(n,hC)},window.closeAllPopupsChat=WR(va),window.openChatWith=function(n,t){DR(this,UR),ur&&Zt?window.doPost(null,"/".concat(or,"/users/").concat(Qt,"/messages"),null,{user:n}):WR(vC)(n,t)}.bind(undefined),window.openChatByName=WR(_a)}},r={};function i(n){var e=r[n];if(e!==undefined)return e.exports;var o=r[n]={exports:{}};return t[n](o,o.exports,i),o.exports}i.m=t,n=[],i.O=(t,r,e,o)=>{if(!r){var u=Infinity;for(s=0;s<n.length;s++){for(var[r,e,o]=n[s],c=!0,a=0;a<r.length;a++)(!1&o||u>=o)&&Object.keys(i.O).every(n=>i.O[n](r[a]))?r.splice(a--,1):(c=!1,o<u&&(u=o));if(c){n.splice(s--,1);var f=e();f!==undefined&&(t=f)}}return t}o=o||0;for(var s=n.length;s>0&&n[s-1][2]>o;s--)n[s]=n[s-1];n[s]=[r,e,o]},i.d=(n,t)=>{for(var r in t)i.o(t,r)&&!i.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(n){if("object"==typeof window)return window}}(),i.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),i.j=275,(()=>{var n={275:0};i.O.j=t=>0===n[t];var t=(t,r)=>{var e,o,[u,c,a]=r,f=0;if(u.some(t=>0!==n[t])){for(e in c)i.o(c,e)&&(i.m[e]=c[e]);if(a)var s=a(i)}for(t&&t(r);f<u.length;f++)o=u[f],i.o(n,o)&&n[o]&&n[o][0](),n[o]=0;return i.O(s)},r=self.webpackChunkmql5_com=self.webpackChunkmql5_com||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var e=i.O(undefined,[5375],()=>i(3010));e=i.O(e)})();