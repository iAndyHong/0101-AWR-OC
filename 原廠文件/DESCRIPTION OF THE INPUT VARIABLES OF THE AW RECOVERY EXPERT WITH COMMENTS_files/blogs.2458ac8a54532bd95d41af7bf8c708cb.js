function _blogs(){var currentAvatarUrl,isProcessingMouseMove=!1,isMouseDownOnSplash=!1,isMouseDownOnResizer=!1,splashBackgroundHeight=0,splashBackgroundMinHeight=0,splashFrameMinHeight=200,splashFrameMaxHeight=0,splashFrameCurrentHeight=0,splashBackgroundCurrentTopPosition=0,currentMousePosition=0,currentCategoryIconId=null;function processAvatarEditFormCallBack(data){if(data&&(data=data.replace(/<pre[^<>]*>/,""),data=data.replace(/<\/pre>/,""),null!=data&&""!==data)){var validator=$("avatarValidator");validator.style.display="none";var json=eval("("+data+")");json&&(json.Error!=undefined&&null!=json.Error?(validator.style.display="block",validator.setAttribute("title",json.Error)):json.Url!=undefined&&null!=json.Url&&(currentAvatarUrl=json.Url,$("postAvatarImage").src=json.Url,$("AvatarFileName").value=json.Url))}}function processSplashEditFormCallBack(data){if(data&&(data=data.replace(/<pre[^<>]*>/,""),data=data.replace(/<\/pre>/,""),null!=data&&""!==data)){var validator=$("splashValidator");validator.style.display="none";var json=eval("("+data+")");null!=json&&0!=json&&json.Url!=undefined&&null!=json.Url?($("splashFileName").value=json.Url,$("blogPostSplashFrame").style.backgroundImage="url("+json.Url+")",$("blogPostSplashFrame").style.backgroundPosition="top center",$("blogPostSplashFrame").style.backgroundSize="",$("blogPostSplashFrame").style.height=json.FrameHeight+"px",$("blogPostSplashFrame").style.cursor="move",$("postSplashEdit").style.display="inline",$("blogPostSplashTools").style.display="block",splashBackgroundHeight=json.ImageHeight,splashBackgroundMinHeight=json.ImageMinHeight,splashFrameMaxHeight=json.FrameHeight,splashFrameCurrentHeight=json.FrameHeight,splashBackgroundCurrentTopPosition=0):null!=json&&json.Error&&(validator.style.display="block",validator.innerHTML=json.Error,$("blogPostSplashFrame").style.backgroundImage="",$("blogPostSplashFrame").style.height=splashFrameMinHeight+"px",$("blogPostSplashFrame").style.backgroundSize="",splashBackgroundCurrentTopPosition=0)}}function correctionDatePublished(){var e=new Date,t=document.getElementById("datePublishedYear"),o=document.getElementById("datePublishedMonth"),a=document.getElementById("datePublishedDay"),s=document.getElementById("datePublishedHour"),n=document.getElementById("datePublishedMinute"),r=["4","6","9","11"];function l(){function s(){-1!=r.indexOf(o.value)?a.getElementsByTagName("option")[30].disabled=!0:2==o.value?(a.getElementsByTagName("option")[29].disabled=!0,a.getElementsByTagName("option")[30].disabled=!0):(a.getElementsByTagName("option")[29].disabled=!1,a.getElementsByTagName("option")[30].disabled=!1)}if(e.getFullYear()==t.value){for(var n=0;n<e.getMonth();n++)o.getElementsByTagName("option")[n].disabled=!0;if(e.getMonth()+1==o.value){for(n=0;n<=e.getDay();n++)a.getElementsByTagName("option")[n].disabled=!0;s()}else{for(n=0;n<a.getElementsByTagName("option").length;n++)a.getElementsByTagName("option")[n].disabled=!1;s()}}else{for(n=0;n<o.getElementsByTagName("option").length;n++)o.getElementsByTagName("option")[n].disabled=!1;for(n=0;n<a.getElementsByTagName("option").length;n++)a.getElementsByTagName("option")[n].disabled=!1;s()}}s.onchange=function(){s.value>23&&(s.value="00")},s.addEventListener("blur",function(){s.value=s.value.padStart(2,"0")}),n.onchange=function(){n.value>59&&(n.value="00")},n.addEventListener("blur",function(){n.value=n.value.padStart(2,"0")}),l(),n.value=e.getMinutes(),o.onchange=function(){e.getMonth()+1==o.value&&(a.selectedIndex=e.getDay()+1),l()},t.onchange=function(){e.getFullYear()==t.value&&(o.selectedIndex=e.getMonth(),a.selectedIndex=e.getDay()+1),l()}}function processMouseMove(e){if(isMouseDownOnSplash||isMouseDownOnResizer){removeSelection();var t=(window.event?window.event:e).clientY;0==currentMousePosition&&(currentMousePosition=t),isMouseDownOnResizer&&((splashFrameCurrentHeight+=t-currentMousePosition)<splashFrameMinHeight?splashFrameCurrentHeight=splashFrameMinHeight:splashFrameCurrentHeight>splashFrameMaxHeight?splashFrameCurrentHeight=splashFrameMaxHeight:splashFrameCurrentHeight>splashBackgroundHeight&&(splashFrameCurrentHeight=splashBackgroundHeight),$("blogPostSplashFrame").style.height=splashFrameCurrentHeight+"px"),isMouseDownOnSplash&&(splashBackgroundCurrentTopPosition+=t-currentMousePosition,$("blogPostSplashFrame").style.backgroundPosition="center "+splashBackgroundCurrentTopPosition+"px"),currentMousePosition=t}}function processMouseUp(){isProcessingMouseMove&&(isMouseDownOnSplash=!1,isMouseDownOnResizer=!1,splashBackgroundCurrentTopPosition<-1*(splashBackgroundHeight-splashFrameCurrentHeight)&&(splashBackgroundCurrentTopPosition=-1*(splashBackgroundHeight-splashFrameCurrentHeight)),splashBackgroundCurrentTopPosition>0&&(splashBackgroundCurrentTopPosition=0),$("blogPostSplashFrame").style.backgroundPosition="center "+splashBackgroundCurrentTopPosition+"px",$("splashFileTopPosition").value=splashBackgroundCurrentTopPosition,splashFrameCurrentHeight<splashFrameMinHeight?splashFrameCurrentHeight=splashFrameMinHeight:splashFrameCurrentHeight>splashFrameMaxHeight&&(splashFrameCurrentHeight=splashFrameMaxHeight),$("blogPostSplashFrame").style.height=splashFrameCurrentHeight+"px",$("splashFileFrameHeight").value=splashFrameCurrentHeight,currentMousePosition=0)}function stopProp(e){e||(e=window.event),e&&e.stopPropagation?e.stopPropagation():window.event&&window.event.cancelBubble&&(window.event.cancelBubble=!0)}function removeSelection(){window.getSelection?window.getSelection().removeAllRanges():document.selection&&document.selection.clear&&document.selection.clear()}function addHandler(e,t,o){e.attachEvent?e.attachEvent("on"+t,o):e.addEventListener&&e.addEventListener(t,o,!1)}this.StartProcessMouseMove=function(){(addHandler(window.document,"mousemove",function(e){processMouseMove(e)}),addHandler(window.document,"mouseup",function(){processMouseUp()}),$("dalet_Content"))&&addHandler($("dalet_Content").contentDocument||$("dalet_Content").contentWindow.document,"mouseup",function(){processMouseUp()});isProcessingMouseMove=!0},this.ProcessAvatarEditForm=function(){Ajax.form($("blogPostAvatarEditForm"),{onready:processAvatarEditFormCallBack,onerror:function(){alert("error occured")}})},this.ProcessSplashEditForm=function(){Ajax.form($("blogPostSplashEditForm"),{onready:processSplashEditFormCallBack,onerror:function(){alert("error occured")}})},this.ShowDatePublishBox=function(e){correctionDatePublished();const t=document.getElementById("datePublishBox"),o=document.body.querySelector("#IsPublished + label"),a=o?.parentNode;if(!(t&&o&&e&&a))return;const s=t.querySelector(".tail");if("flex"==t.style.display)t.style.display="none";else{t.style.display="flex";const n=e.offsetLeft+o.offsetLeft+e.offsetWidth/2-t.offsetWidth/2,r=a.offsetWidth-t.offsetWidth;t.style.left=Math.min(n,r)+"px",s&&(s.style.marginLeft=r<n?n-r+"px":0)}return!1},this.ApplyDatePublishBox=function(){var e=+$("datePublishedHour").value;(""==e||isNaN(e)||e<0||e>23)&&($("datePublishedHour").value="00");var t=+$("datePublishedMinute").value;(""==t||isNaN(t)||t<0||t>59)&&($("datePublishedMinute").value="00"),$("datePublishSelectorLink").innerHTML=$("datePublishedDay").value+" "+$("datePublishedMonth")[+$("datePublishedMonth").value-1].innerHTML+" "+$("datePublishedYear").value+", "+$("datePublishedHour").value+":"+$("datePublishedMinute").value,$("IsChangedDatePublished")&&($("IsChangedDatePublished").value="true"),$("IsPublished").checked=!0,$("datePublishBox").style.display="none"},this.ApplyDatePublishBoxByKeyDown=function(e){var t=e||window.event;13==t.keyCode&&(this.ApplyDatePublishBox(),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,t.preventDefault&&t.preventDefault())},this.ProcessPrevent=function(e){return removeSelection(),stopProp(e),e.preventDefault&&e.preventDefault(),!1},this.ProcessSplashZoom=function(e,t){removeSelection(),stopProp(e);var o=100*(t?1:-1);splashBackgroundHeight+o<splashFrameMinHeight||splashBackgroundHeight+o<splashBackgroundMinHeight||((splashBackgroundHeight+=o)>=splashFrameMinHeight&&splashBackgroundHeight<splashFrameCurrentHeight&&(splashFrameCurrentHeight=splashBackgroundHeight,$("blogPostSplashFrame").style.height=splashFrameCurrentHeight+"px"),$("blogPostSplashFrame").style.backgroundSize="auto "+splashBackgroundHeight+"px",$("splashFileHeight").value=splashBackgroundHeight)},this.ProcessSplashMouseDown=function(){0==splashFrameCurrentHeight||isMouseDownOnResizer||(isProcessingMouseMove||this.StartProcessMouseMove(),isMouseDownOnSplash=!0)},this.ProcessSplashResizeMouseDown=function(){isMouseDownOnSplash||(isProcessingMouseMove||this.StartProcessMouseMove(),isMouseDownOnResizer=!0)},this.SetCategoryIconsBox=function(e,t){currentCategoryIconId=e;var o=new Image;o.src=t,o.onload=function(){var e=o.height;e<16&&(e=512);for(var a=[],s=0;s>-1*e;s-=16)a.push('<div class="item"><input type="radio" name="iconPos" value="'+s+'" id="icon'+s+'" onclick="Blogs.SetCategoryIcon('+s+')"><label for="icon'+s+'" id="iconLabel'+s+'"><div style="background: url('+t+") no-repeat 0 "+s+'px"></div></label></div>');$("blogsIconsBox").innerHTML=a.join("\r\n"),$("icon"+currentCategoryIconId)&&($("icon"+currentCategoryIconId).checked=!0,$("iconLabel"+currentCategoryIconId)&&($("iconLabel"+currentCategoryIconId).className="selected"))}},this.SetCategoryIcon=function(e){$("iconLabel"+currentCategoryIconId)&&($("iconLabel"+currentCategoryIconId).className=""),$("iconLabel"+e).className="selected",currentCategoryIconId=e},this.CrawlerCheckBox=function(e){var t=$("buttonAction");if(t){var o=document.forms[e];if(o)for(var a=o.elements,s=0,n=a.length;s<n;++s){var r=a[s];if("checkbox"==r.type.toLowerCase()&&r.name.startsWith("boxes[")&&r.checked)return void(t.disabled=!1)}t.disabled="disabled",window.console&&window.console.debug&&window.console.debug(t.disabled)}},this.CheckingkNewPost=function(categoryId,dateFromSecondsLong,lang){var noticeBox=document.getElementById("newPostNotice");if(noticeBox!=undefined)var url="/"+lang+"/blogs/checknewpost",interval=window.setInterval(function(){Ajax.get(url,{categoryId:categoryId,dateFrom:dateFromSecondsLong},{onready:function(json){if(null!=json&&""!=json){var result=eval("("+json+")");noticeBox.innerHTML=result.Content,noticeBox.style.display="block",window.clearInterval(interval)}}})},6e5)}}var Blogs=new _blogs;