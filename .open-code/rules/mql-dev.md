# MQL4/MQL5 專案開發綜合規範

本文件整合了 MQL 開發的所有技術規範、工作流程與安全守則。

## 1. 規格驅動開發 (Spec-Driven Development)
專案遵循「規格先行」原則，核心文件為最終依據。

## 2. 鋼鐵交易規範 (CRITICAL TRADING RULES)

### 2.1 交易返回值強制檢查
- 所有 MQL 內建交易相關函數必須檢查返回值並處理錯誤。

### 2.2 零容忍編譯政策
- 編譯日誌最終結果必須是 0 錯誤、0 警告。

### 2.3 手動修改保護令 (PROTECT USER MODIFICATIONS)
- **核心禁令**：嚴禁 AI 代理擅自修改或「覆蓋回」Andy 手動調整過的代碼片段（特別是 **參數數值、數據邏輯、平滑週期** 等）。
- **例外情況**：僅當該手動修改導致編譯語法錯誤 (Syntax Error) 時，AI 代理才允許介入修正，且修正必須以「維持 Andy 邏輯」為最高指導原則。
- **偵測機制**：在執行任何 `Write` 或 `Edit` 動作前，代理應先進行比對 (Diff)，確認哪些改動是 Andy 剛剛施作的，並在輸出的代碼中予以保留。

## 3. MQL 程式碼風格與規範
- 註解必須使用繁體中文。
- 變數與賦值必須垂直對齊。

## 4. 檔案編輯與安全守則
- 修改前必須建立備份於 `Backups/`。
- 必須使用 `./compile.sh` 驗證。

---
*最後更新：2026-01-11*
